var js=Object.defineProperty,ws=Object.defineProperties;var vs=Object.getOwnPropertyDescriptors;var Ue=Object.getOwnPropertySymbols;var jt=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable;var ve=(t,s)=>(s=Symbol[t])?s:Symbol.for("Symbol."+t),Ns=t=>{throw TypeError(t)};var yt=(t,s,r)=>s in t?js(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,F=(t,s)=>{for(var r in s||(s={}))jt.call(s,r)&&yt(t,r,s[r]);if(Ue)for(var r of Ue(s))wt.call(s,r)&&yt(t,r,s[r]);return t},I=(t,s)=>ws(t,vs(s));var rt=(t,s)=>{var r={};for(var n in t)jt.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Ue)for(var n of Ue(t))s.indexOf(n)<0&&wt.call(t,n)&&(r[n]=t[n]);return r};var Cs=(t,s)=>()=>(s||t((s={exports:{}}).exports,s),s.exports);var W=(t,s,r)=>new Promise((n,a)=>{var c=o=>{try{h(r.next(o))}catch(l){a(l)}},d=o=>{try{h(r.throw(o))}catch(l){a(l)}},h=o=>o.done?n(o.value):Promise.resolve(o.value).then(c,d);h((r=r.apply(t,s)).next())}),pe=function(t,s){this[0]=t,this[1]=s},nt=(t,s,r)=>{var n=(d,h,o,l)=>{try{var i=r[d](h),u=(h=i.value)instanceof pe,f=i.done;Promise.resolve(u?h[0]:h).then(b=>u?n(d==="return"?d:"next",h[1]?{done:b.done,value:b.value}:b,o,l):o({value:b,done:f})).catch(b=>n("throw",b,o,l))}catch(b){l(b)}},a=d=>c[d]=h=>new Promise((o,l)=>n(d,h,o,l)),c={};return r=r.apply(t,s),c[ve("asyncIterator")]=()=>c,a("next"),a("throw"),a("return"),c},at=t=>{var s=t[ve("asyncIterator")],r=!1,n,a={};return s==null?(s=t[ve("iterator")](),n=c=>a[c]=d=>s[c](d)):(s=s.call(t),n=c=>a[c]=d=>{if(r){if(r=!1,c==="throw")throw d;return d}return r=!0,{done:!1,value:new pe(new Promise(h=>{var o=s[c](d);o instanceof Object||Ns("Object expected"),h(o)}),1)}}),a[ve("iterator")]=()=>a,n("next"),"throw"in s?n("throw"):a.throw=c=>{throw c},"return"in s&&n("return"),a},vt=(t,s,r)=>(s=t[ve("asyncIterator")])?s.call(t):(t=t[ve("iterator")](),s={},r=(n,a)=>(a=t[n])&&(s[n]=c=>new Promise((d,h,o)=>(c=a.call(t,c),o=c.done,Promise.resolve(c.value).then(l=>d({value:l,done:o}),h)))),r("next"),r("return"),s);import{j as e}from"./mui-BpRHmZTB.js";import{a as Ss,c as Es,g as ks,r as E,u as Ht,L as _s,b as Pe,d as Rs,R as Oe,e as As,f as me,B as Ms}from"./vendor-BaIKwp6E.js";var $n=Cs(he=>{(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();var dt={},Nt=Ss;dt.createRoot=Nt.createRoot,dt.hydrateRoot=Nt.hydrateRoot;var qt={exports:{}};(function(t,s){(function(r,n){t.exports=n()})(Es,function(){var r=1e3,n=6e4,a=36e5,c="millisecond",d="second",h="minute",o="hour",l="day",i="week",u="month",f="quarter",b="year",m="date",g="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(R){var S=["th","st","nd","rd"],y=R%100;return"["+R+(S[(y-20)%10]||S[y]||S[0])+"]"}},C=function(R,S,y){var j=String(R);return!j||j.length>=S?R:""+Array(S+1-j.length).join(y)+R},w={s:C,z:function(R){var S=-R.utcOffset(),y=Math.abs(S),j=Math.floor(y/60),v=y%60;return(S<=0?"+":"-")+C(j,2,"0")+":"+C(v,2,"0")},m:function R(S,y){if(S.date()<y.date())return-R(y,S);var j=12*(y.year()-S.year())+(y.month()-S.month()),v=S.clone().add(j,u),N=y-v<0,A=S.clone().add(j+(N?-1:1),u);return+(-(j+(y-v)/(N?v-A:A-v))||0)},a:function(R){return R<0?Math.ceil(R)||0:Math.floor(R)},p:function(R){return{M:u,y:b,w:i,d:l,D:m,h:o,m:h,s:d,ms:c,Q:f}[R]||String(R||"").toLowerCase().replace(/s$/,"")},u:function(R){return R===void 0}},P="en",T={};T[P]=k;var U="$isDayjsObject",ie=function(R){return R instanceof K||!(!R||!R[U])},se=function R(S,y,j){var v;if(!S)return P;if(typeof S=="string"){var N=S.toLowerCase();T[N]&&(v=N),y&&(T[N]=y,v=N);var A=S.split("-");if(!v&&A.length>1)return R(A[0])}else{var _=S.name;T[_]=S,v=_}return!j&&v&&(P=v),v||!j&&P},$=function(R,S){if(ie(R))return R.clone();var y=typeof S=="object"?S:{};return y.date=R,y.args=arguments,new K(y)},L=w;L.l=se,L.i=ie,L.w=function(R,S){return $(R,{locale:S.$L,utc:S.$u,x:S.$x,$offset:S.$offset})};var K=function(){function R(y){this.$L=se(y.locale,null,!0),this.parse(y),this.$x=this.$x||y.x||{},this[U]=!0}var S=R.prototype;return S.parse=function(y){this.$d=function(j){var v=j.date,N=j.utc;if(v===null)return new Date(NaN);if(L.u(v))return new Date;if(v instanceof Date)return new Date(v);if(typeof v=="string"&&!/Z$/i.test(v)){var A=v.match(p);if(A){var _=A[2]-1||0,D=(A[7]||"0").substring(0,3);return N?new Date(Date.UTC(A[1],_,A[3]||1,A[4]||0,A[5]||0,A[6]||0,D)):new Date(A[1],_,A[3]||1,A[4]||0,A[5]||0,A[6]||0,D)}}return new Date(v)}(y),this.init()},S.init=function(){var y=this.$d;this.$y=y.getFullYear(),this.$M=y.getMonth(),this.$D=y.getDate(),this.$W=y.getDay(),this.$H=y.getHours(),this.$m=y.getMinutes(),this.$s=y.getSeconds(),this.$ms=y.getMilliseconds()},S.$utils=function(){return L},S.isValid=function(){return this.$d.toString()!==g},S.isSame=function(y,j){var v=$(y);return this.startOf(j)<=v&&v<=this.endOf(j)},S.isAfter=function(y,j){return $(y)<this.startOf(j)},S.isBefore=function(y,j){return this.endOf(j)<$(y)},S.$g=function(y,j,v){return L.u(y)?this[j]:this.set(v,y)},S.unix=function(){return Math.floor(this.valueOf()/1e3)},S.valueOf=function(){return this.$d.getTime()},S.startOf=function(y,j){var v=this,N=!!L.u(j)||j,A=L.p(y),_=function(xe,ne){var ue=L.w(v.$u?Date.UTC(v.$y,ne,xe):new Date(v.$y,ne,xe),v);return N?ue:ue.endOf(l)},D=function(xe,ne){return L.w(v.toDate()[xe].apply(v.toDate("s"),(N?[0,0,0,0]:[23,59,59,999]).slice(ne)),v)},z=this.$W,q=this.$M,re=this.$D,we="set"+(this.$u?"UTC":"");switch(A){case b:return N?_(1,0):_(31,11);case u:return N?_(1,q):_(0,q+1);case i:var fe=this.$locale().weekStart||0,ke=(z<fe?z+7:z)-fe;return _(N?re-ke:re+(6-ke),q);case l:case m:return D(we+"Hours",0);case o:return D(we+"Minutes",1);case h:return D(we+"Seconds",2);case d:return D(we+"Milliseconds",3);default:return this.clone()}},S.endOf=function(y){return this.startOf(y,!1)},S.$set=function(y,j){var v,N=L.p(y),A="set"+(this.$u?"UTC":""),_=(v={},v[l]=A+"Date",v[m]=A+"Date",v[u]=A+"Month",v[b]=A+"FullYear",v[o]=A+"Hours",v[h]=A+"Minutes",v[d]=A+"Seconds",v[c]=A+"Milliseconds",v)[N],D=N===l?this.$D+(j-this.$W):j;if(N===u||N===b){var z=this.clone().set(m,1);z.$d[_](D),z.init(),this.$d=z.set(m,Math.min(this.$D,z.daysInMonth())).$d}else _&&this.$d[_](D);return this.init(),this},S.set=function(y,j){return this.clone().$set(y,j)},S.get=function(y){return this[L.p(y)]()},S.add=function(y,j){var v,N=this;y=Number(y);var A=L.p(j),_=function(q){var re=$(N);return L.w(re.date(re.date()+Math.round(q*y)),N)};if(A===u)return this.set(u,this.$M+y);if(A===b)return this.set(b,this.$y+y);if(A===l)return _(1);if(A===i)return _(7);var D=(v={},v[h]=n,v[o]=a,v[d]=r,v)[A]||1,z=this.$d.getTime()+y*D;return L.w(z,this)},S.subtract=function(y,j){return this.add(-1*y,j)},S.format=function(y){var j=this,v=this.$locale();if(!this.isValid())return v.invalidDate||g;var N=y||"YYYY-MM-DDTHH:mm:ssZ",A=L.z(this),_=this.$H,D=this.$m,z=this.$M,q=v.weekdays,re=v.months,we=v.meridiem,fe=function(ne,ue,_e,Be){return ne&&(ne[ue]||ne(j,N))||_e[ue].slice(0,Be)},ke=function(ne){return L.s(_%12||12,ne,"0")},xe=we||function(ne,ue,_e){var Be=ne<12?"AM":"PM";return _e?Be.toLowerCase():Be};return N.replace(M,function(ne,ue){return ue||function(_e){switch(_e){case"YY":return String(j.$y).slice(-2);case"YYYY":return L.s(j.$y,4,"0");case"M":return z+1;case"MM":return L.s(z+1,2,"0");case"MMM":return fe(v.monthsShort,z,re,3);case"MMMM":return fe(re,z);case"D":return j.$D;case"DD":return L.s(j.$D,2,"0");case"d":return String(j.$W);case"dd":return fe(v.weekdaysMin,j.$W,q,2);case"ddd":return fe(v.weekdaysShort,j.$W,q,3);case"dddd":return q[j.$W];case"H":return String(_);case"HH":return L.s(_,2,"0");case"h":return ke(1);case"hh":return ke(2);case"a":return xe(_,D,!0);case"A":return xe(_,D,!1);case"m":return String(D);case"mm":return L.s(D,2,"0");case"s":return String(j.$s);case"ss":return L.s(j.$s,2,"0");case"SSS":return L.s(j.$ms,3,"0");case"Z":return A}return null}(ne)||A.replace(":","")})},S.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},S.diff=function(y,j,v){var N,A=this,_=L.p(j),D=$(y),z=(D.utcOffset()-this.utcOffset())*n,q=this-D,re=function(){return L.m(A,D)};switch(_){case b:N=re()/12;break;case u:N=re();break;case f:N=re()/3;break;case i:N=(q-z)/6048e5;break;case l:N=(q-z)/864e5;break;case o:N=q/a;break;case h:N=q/n;break;case d:N=q/r;break;default:N=q}return v?N:L.a(N)},S.daysInMonth=function(){return this.endOf(u).$D},S.$locale=function(){return T[this.$L]},S.locale=function(y,j){if(!y)return this.$L;var v=this.clone(),N=se(y,j,!0);return N&&(v.$L=N),v},S.clone=function(){return L.w(this.$d,this)},S.toDate=function(){return new Date(this.valueOf())},S.toJSON=function(){return this.isValid()?this.toISOString():null},S.toISOString=function(){return this.$d.toISOString()},S.toString=function(){return this.$d.toUTCString()},R}(),J=K.prototype;return $.prototype=J,[["$ms",c],["$s",d],["$m",h],["$H",o],["$W",l],["$M",u],["$y",b],["$D",m]].forEach(function(R){J[R[1]]=function(S){return this.$g(S,R[0],R[1])}}),$.extend=function(R,S){return R.$i||(R(S,K,$),R.$i=!0),$},$.locale=se,$.isDayjs=ie,$.unix=function(R){return $(1e3*R)},$.en=T[P],$.Ls=T,$.p={},$})})(qt);var Os=qt.exports;const ee=ks(Os);function Wt(t,s){return function(){return t.apply(s,arguments)}}const{toString:Ls}=Object.prototype,{getPrototypeOf:xt}=Object,{iterator:Ge,toStringTag:Yt}=Symbol,Ze=(t=>s=>{const r=Ls.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),le=t=>(t=t.toLowerCase(),s=>Ze(s)===t),et=t=>s=>typeof s===t,{isArray:Se}=Array,Ce=et("undefined");function Te(t){return t!==null&&!Ce(t)&&t.constructor!==null&&!Ce(t.constructor)&&ae(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Vt=le("ArrayBuffer");function Ps(t){let s;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Vt(t.buffer),s}const Ts=et("string"),ae=et("function"),Jt=et("number"),De=t=>t!==null&&typeof t=="object",Ds=t=>t===!0||t===!1,He=t=>{if(Ze(t)!=="object")return!1;const s=xt(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Yt in t)&&!(Ge in t)},Fs=t=>{if(!De(t)||Te(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch(s){return!1}},$s=le("Date"),Is=le("File"),Bs=le("Blob"),Us=le("FileList"),zs=t=>De(t)&&ae(t.pipe),Hs=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||ae(t.append)&&((s=Ze(t))==="formdata"||s==="object"&&ae(t.toString)&&t.toString()==="[object FormData]"))},qs=le("URLSearchParams"),[Ws,Ys,Vs,Js]=["ReadableStream","Request","Response","Headers"].map(le),Qs=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fe(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t=="undefined")return;let n,a;if(typeof t!="object"&&(t=[t]),Se(t))for(n=0,a=t.length;n<a;n++)s.call(null,t[n],n,t);else{if(Te(t))return;const c=r?Object.getOwnPropertyNames(t):Object.keys(t),d=c.length;let h;for(n=0;n<d;n++)h=c[n],s.call(null,t[h],h,t)}}function Qt(t,s){if(Te(t))return null;s=s.toLowerCase();const r=Object.keys(t);let n=r.length,a;for(;n-- >0;)if(a=r[n],s===a.toLowerCase())return a;return null}const be=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,Kt=t=>!Ce(t)&&t!==be;function ut(){const{caseless:t,skipUndefined:s}=Kt(this)&&this||{},r={},n=(a,c)=>{const d=t&&Qt(r,c)||c;He(r[d])&&He(a)?r[d]=ut(r[d],a):He(a)?r[d]=ut({},a):Se(a)?r[d]=a.slice():(!s||!Ce(a))&&(r[d]=a)};for(let a=0,c=arguments.length;a<c;a++)arguments[a]&&Fe(arguments[a],n);return r}const Ks=(t,s,r,{allOwnKeys:n}={})=>(Fe(s,(a,c)=>{r&&ae(a)?t[c]=Wt(a,r):t[c]=a},{allOwnKeys:n}),t),Xs=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Gs=(t,s,r,n)=>{t.prototype=Object.create(s.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},Zs=(t,s,r,n)=>{let a,c,d;const h={};if(s=s||{},t==null)return s;do{for(a=Object.getOwnPropertyNames(t),c=a.length;c-- >0;)d=a[c],(!n||n(d,t,s))&&!h[d]&&(s[d]=t[d],h[d]=!0);t=r!==!1&&xt(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},er=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const n=t.indexOf(s,r);return n!==-1&&n===r},tr=t=>{if(!t)return null;if(Se(t))return t;let s=t.length;if(!Jt(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},sr=(t=>s=>t&&s instanceof t)(typeof Uint8Array!="undefined"&&xt(Uint8Array)),rr=(t,s)=>{const n=(t&&t[Ge]).call(t);let a;for(;(a=n.next())&&!a.done;){const c=a.value;s.call(t,c[0],c[1])}},nr=(t,s)=>{let r;const n=[];for(;(r=t.exec(s))!==null;)n.push(r);return n},ar=le("HTMLFormElement"),or=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),Ct=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),ir=le("RegExp"),Xt=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Fe(r,(a,c)=>{let d;(d=s(a,c,t))!==!1&&(n[c]=d||a)}),Object.defineProperties(t,n)},lr=t=>{Xt(t,(s,r)=>{if(ae(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(ae(n)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},cr=(t,s)=>{const r={},n=a=>{a.forEach(c=>{r[c]=!0})};return Se(t)?n(t):n(String(t).split(s)),r},dr=()=>{},ur=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function mr(t){return!!(t&&ae(t.append)&&t[Yt]==="FormData"&&t[Ge])}const hr=t=>{const s=new Array(10),r=(n,a)=>{if(De(n)){if(s.indexOf(n)>=0)return;if(Te(n))return n;if(!("toJSON"in n)){s[a]=n;const c=Se(n)?[]:{};return Fe(n,(d,h)=>{const o=r(d,a+1);!Ce(o)&&(c[h]=o)}),s[a]=void 0,c}}return n};return r(t,0)},fr=le("AsyncFunction"),xr=t=>t&&(De(t)||ae(t))&&ae(t.then)&&ae(t.catch),Gt=((t,s)=>t?setImmediate:s?((r,n)=>(be.addEventListener("message",({source:a,data:c})=>{a===be&&c===r&&n.length&&n.shift()()},!1),a=>{n.push(a),be.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ae(be.postMessage)),pr=typeof queueMicrotask!="undefined"?queueMicrotask.bind(be):typeof process!="undefined"&&process.nextTick||Gt,br=t=>t!=null&&ae(t[Ge]),x={isArray:Se,isArrayBuffer:Vt,isBuffer:Te,isFormData:Hs,isArrayBufferView:Ps,isString:Ts,isNumber:Jt,isBoolean:Ds,isObject:De,isPlainObject:He,isEmptyObject:Fs,isReadableStream:Ws,isRequest:Ys,isResponse:Vs,isHeaders:Js,isUndefined:Ce,isDate:$s,isFile:Is,isBlob:Bs,isRegExp:ir,isFunction:ae,isStream:zs,isURLSearchParams:qs,isTypedArray:sr,isFileList:Us,forEach:Fe,merge:ut,extend:Ks,trim:Qs,stripBOM:Xs,inherits:Gs,toFlatObject:Zs,kindOf:Ze,kindOfTest:le,endsWith:er,toArray:tr,forEachEntry:rr,matchAll:nr,isHTMLForm:ar,hasOwnProperty:Ct,hasOwnProp:Ct,reduceDescriptors:Xt,freezeMethods:lr,toObjectSet:cr,toCamelCase:or,noop:dr,toFiniteNumber:ur,findKey:Qt,global:be,isContextDefined:Kt,isSpecCompliantForm:mr,toJSONObject:hr,isAsyncFn:fr,isThenable:xr,setImmediate:Gt,asap:pr,isIterable:br};function O(t,s,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}x.inherits(O,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:x.toJSONObject(this.config),code:this.code,status:this.status}}});const Zt=O.prototype,es={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{es[t]={value:t}});Object.defineProperties(O,es);Object.defineProperty(Zt,"isAxiosError",{value:!0});O.from=(t,s,r,n,a,c)=>{const d=Object.create(Zt);x.toFlatObject(t,d,function(i){return i!==Error.prototype},l=>l!=="isAxiosError");const h=t&&t.message?t.message:"Error",o=s==null&&t?t.code:s;return O.call(d,h,o,r,n,a),t&&d.cause==null&&Object.defineProperty(d,"cause",{value:t,configurable:!0}),d.name=t&&t.name||"Error",c&&Object.assign(d,c),d};const gr=null;function mt(t){return x.isPlainObject(t)||x.isArray(t)}function ts(t){return x.endsWith(t,"[]")?t.slice(0,-2):t}function St(t,s,r){return t?t.concat(s).map(function(a,c){return a=ts(a),!r&&c?"["+a+"]":a}).join(r?".":""):s}function yr(t){return x.isArray(t)&&!t.some(mt)}const jr=x.toFlatObject(x,{},null,function(s){return/^is[A-Z]/.test(s)});function tt(t,s,r){if(!x.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=x.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,p){return!x.isUndefined(p[g])});const n=r.metaTokens,a=r.visitor||i,c=r.dots,d=r.indexes,o=(r.Blob||typeof Blob!="undefined"&&Blob)&&x.isSpecCompliantForm(s);if(!x.isFunction(a))throw new TypeError("visitor must be a function");function l(m){if(m===null)return"";if(x.isDate(m))return m.toISOString();if(x.isBoolean(m))return m.toString();if(!o&&x.isBlob(m))throw new O("Blob is not supported. Use a Buffer instead.");return x.isArrayBuffer(m)||x.isTypedArray(m)?o&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function i(m,g,p){let M=m;if(m&&!p&&typeof m=="object"){if(x.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(x.isArray(m)&&yr(m)||(x.isFileList(m)||x.endsWith(g,"[]"))&&(M=x.toArray(m)))return g=ts(g),M.forEach(function(C,w){!(x.isUndefined(C)||C===null)&&s.append(d===!0?St([g],w,c):d===null?g:g+"[]",l(C))}),!1}return mt(m)?!0:(s.append(St(p,g,c),l(m)),!1)}const u=[],f=Object.assign(jr,{defaultVisitor:i,convertValue:l,isVisitable:mt});function b(m,g){if(!x.isUndefined(m)){if(u.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));u.push(m),x.forEach(m,function(M,k){(!(x.isUndefined(M)||M===null)&&a.call(s,M,x.isString(k)?k.trim():k,g,f))===!0&&b(M,g?g.concat(k):[k])}),u.pop()}}if(!x.isObject(t))throw new TypeError("data must be an object");return b(t),s}function Et(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return s[n]})}function pt(t,s){this._pairs=[],t&&tt(t,this,s)}const ss=pt.prototype;ss.append=function(s,r){this._pairs.push([s,r])};ss.toString=function(s){const r=s?function(n){return s.call(this,n,Et)}:Et;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function wr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function rs(t,s,r){if(!s)return t;const n=r&&r.encode||wr;x.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let c;if(a?c=a(s,r):c=x.isURLSearchParams(s)?s.toString():new pt(s,r).toString(n),c){const d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t}class kt{constructor(){this.handlers=[]}use(s,r,n){return this.handlers.push({fulfilled:s,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){x.forEach(this.handlers,function(n){n!==null&&s(n)})}}const ns={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vr=typeof URLSearchParams!="undefined"?URLSearchParams:pt,Nr=typeof FormData!="undefined"?FormData:null,Cr=typeof Blob!="undefined"?Blob:null,Sr={isBrowser:!0,classes:{URLSearchParams:vr,FormData:Nr,Blob:Cr},protocols:["http","https","file","blob","url","data"]},bt=typeof window!="undefined"&&typeof document!="undefined",ht=typeof navigator=="object"&&navigator||void 0,Er=bt&&(!ht||["ReactNative","NativeScript","NS"].indexOf(ht.product)<0),kr=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_r=bt&&window.location.href||"http://localhost",Rr=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bt,hasStandardBrowserEnv:Er,hasStandardBrowserWebWorkerEnv:kr,navigator:ht,origin:_r},Symbol.toStringTag,{value:"Module"})),te=F(F({},Rr),Sr);function Ar(t,s){return tt(t,new te.classes.URLSearchParams,F({visitor:function(r,n,a,c){return te.isNode&&x.isBuffer(r)?(this.append(n,r.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},s))}function Mr(t){return x.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function Or(t){const s={},r=Object.keys(t);let n;const a=r.length;let c;for(n=0;n<a;n++)c=r[n],s[c]=t[c];return s}function as(t){function s(r,n,a,c){let d=r[c++];if(d==="__proto__")return!0;const h=Number.isFinite(+d),o=c>=r.length;return d=!d&&x.isArray(a)?a.length:d,o?(x.hasOwnProp(a,d)?a[d]=[a[d],n]:a[d]=n,!h):((!a[d]||!x.isObject(a[d]))&&(a[d]=[]),s(r,n,a[d],c)&&x.isArray(a[d])&&(a[d]=Or(a[d])),!h)}if(x.isFormData(t)&&x.isFunction(t.entries)){const r={};return x.forEachEntry(t,(n,a)=>{s(Mr(n),a,r,0)}),r}return null}function Lr(t,s,r){if(x.isString(t))try{return(s||JSON.parse)(t),x.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const $e={transitional:ns,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,c=x.isObject(s);if(c&&x.isHTMLForm(s)&&(s=new FormData(s)),x.isFormData(s))return a?JSON.stringify(as(s)):s;if(x.isArrayBuffer(s)||x.isBuffer(s)||x.isStream(s)||x.isFile(s)||x.isBlob(s)||x.isReadableStream(s))return s;if(x.isArrayBufferView(s))return s.buffer;if(x.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let h;if(c){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Ar(s,this.formSerializer).toString();if((h=x.isFileList(s))||n.indexOf("multipart/form-data")>-1){const o=this.env&&this.env.FormData;return tt(h?{"files[]":s}:s,o&&new o,this.formSerializer)}}return c||a?(r.setContentType("application/json",!1),Lr(s)):s}],transformResponse:[function(s){const r=this.transitional||$e.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(x.isResponse(s)||x.isReadableStream(s))return s;if(s&&x.isString(s)&&(n&&!this.responseType||a)){const d=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(s,this.parseReviver)}catch(h){if(d)throw h.name==="SyntaxError"?O.from(h,O.ERR_BAD_RESPONSE,this,null,this.response):h}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:te.classes.FormData,Blob:te.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};x.forEach(["delete","get","head","post","put","patch"],t=>{$e.headers[t]={}});const Pr=x.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Tr=t=>{const s={};let r,n,a;return t&&t.split(`
`).forEach(function(d){a=d.indexOf(":"),r=d.substring(0,a).trim().toLowerCase(),n=d.substring(a+1).trim(),!(!r||s[r]&&Pr[r])&&(r==="set-cookie"?s[r]?s[r].push(n):s[r]=[n]:s[r]=s[r]?s[r]+", "+n:n)}),s},_t=Symbol("internals");function Re(t){return t&&String(t).trim().toLowerCase()}function qe(t){return t===!1||t==null?t:x.isArray(t)?t.map(qe):String(t)}function Dr(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)s[n[1]]=n[2];return s}const Fr=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ot(t,s,r,n,a){if(x.isFunction(n))return n.call(this,s,r);if(a&&(s=r),!!x.isString(s)){if(x.isString(n))return s.indexOf(n)!==-1;if(x.isRegExp(n))return n.test(s)}}function $r(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,n)=>r.toUpperCase()+n)}function Ir(t,s){const r=x.toCamelCase(" "+s);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(a,c,d){return this[n].call(this,s,a,c,d)},configurable:!0})})}let oe=class{constructor(s){s&&this.set(s)}set(s,r,n){const a=this;function c(h,o,l){const i=Re(o);if(!i)throw new Error("header name must be a non-empty string");const u=x.findKey(a,i);(!u||a[u]===void 0||l===!0||l===void 0&&a[u]!==!1)&&(a[u||o]=qe(h))}const d=(h,o)=>x.forEach(h,(l,i)=>c(l,i,o));if(x.isPlainObject(s)||s instanceof this.constructor)d(s,r);else if(x.isString(s)&&(s=s.trim())&&!Fr(s))d(Tr(s),r);else if(x.isObject(s)&&x.isIterable(s)){let h={},o,l;for(const i of s){if(!x.isArray(i))throw TypeError("Object iterator must return a key-value pair");h[l=i[0]]=(o=h[l])?x.isArray(o)?[...o,i[1]]:[o,i[1]]:i[1]}d(h,r)}else s!=null&&c(r,s,n);return this}get(s,r){if(s=Re(s),s){const n=x.findKey(this,s);if(n){const a=this[n];if(!r)return a;if(r===!0)return Dr(a);if(x.isFunction(r))return r.call(this,a,n);if(x.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=Re(s),s){const n=x.findKey(this,s);return!!(n&&this[n]!==void 0&&(!r||ot(this,this[n],n,r)))}return!1}delete(s,r){const n=this;let a=!1;function c(d){if(d=Re(d),d){const h=x.findKey(n,d);h&&(!r||ot(n,n[h],h,r))&&(delete n[h],a=!0)}}return x.isArray(s)?s.forEach(c):c(s),a}clear(s){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const c=r[n];(!s||ot(this,this[c],c,s,!0))&&(delete this[c],a=!0)}return a}normalize(s){const r=this,n={};return x.forEach(this,(a,c)=>{const d=x.findKey(n,c);if(d){r[d]=qe(a),delete r[c];return}const h=s?$r(c):String(c).trim();h!==c&&delete r[c],r[h]=qe(a),n[h]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return x.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=s&&x.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const n=new this(s);return r.forEach(a=>n.set(a)),n}static accessor(s){const n=(this[_t]=this[_t]={accessors:{}}).accessors,a=this.prototype;function c(d){const h=Re(d);n[h]||(Ir(a,d),n[h]=!0)}return x.isArray(s)?s.forEach(c):c(s),this}};oe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);x.reduceDescriptors(oe.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(n){this[r]=n}}});x.freezeMethods(oe);function it(t,s){const r=this||$e,n=s||r,a=oe.from(n.headers);let c=n.data;return x.forEach(t,function(h){c=h.call(r,c,a.normalize(),s?s.status:void 0)}),a.normalize(),c}function os(t){return!!(t&&t.__CANCEL__)}function Ee(t,s,r){O.call(this,t==null?"canceled":t,O.ERR_CANCELED,s,r),this.name="CanceledError"}x.inherits(Ee,O,{__CANCEL__:!0});function is(t,s,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):s(new O("Request failed with status code "+r.status,[O.ERR_BAD_REQUEST,O.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Br(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function Ur(t,s){t=t||10;const r=new Array(t),n=new Array(t);let a=0,c=0,d;return s=s!==void 0?s:1e3,function(o){const l=Date.now(),i=n[c];d||(d=l),r[a]=o,n[a]=l;let u=c,f=0;for(;u!==a;)f+=r[u++],u=u%t;if(a=(a+1)%t,a===c&&(c=(c+1)%t),l-d<s)return;const b=i&&l-i;return b?Math.round(f*1e3/b):void 0}}function zr(t,s){let r=0,n=1e3/s,a,c;const d=(l,i=Date.now())=>{r=i,a=null,c&&(clearTimeout(c),c=null),t(...l)};return[(...l)=>{const i=Date.now(),u=i-r;u>=n?d(l,i):(a=l,c||(c=setTimeout(()=>{c=null,d(a)},n-u)))},()=>a&&d(a)]}const Ye=(t,s,r=3)=>{let n=0;const a=Ur(50,250);return zr(c=>{const d=c.loaded,h=c.lengthComputable?c.total:void 0,o=d-n,l=a(o),i=d<=h;n=d;const u={loaded:d,total:h,progress:h?d/h:void 0,bytes:o,rate:l||void 0,estimated:l&&h&&i?(h-d)/l:void 0,event:c,lengthComputable:h!=null,[s?"download":"upload"]:!0};t(u)},r)},Rt=(t,s)=>{const r=t!=null;return[n=>s[0]({lengthComputable:r,total:t,loaded:n}),s[1]]},At=t=>(...s)=>x.asap(()=>t(...s)),Hr=te.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,te.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(te.origin),te.navigator&&/(msie|trident)/i.test(te.navigator.userAgent)):()=>!0,qr=te.hasStandardBrowserEnv?{write(t,s,r,n,a,c,d){if(typeof document=="undefined")return;const h=[`${t}=${encodeURIComponent(s)}`];x.isNumber(r)&&h.push(`expires=${new Date(r).toUTCString()}`),x.isString(n)&&h.push(`path=${n}`),x.isString(a)&&h.push(`domain=${a}`),c===!0&&h.push("secure"),x.isString(d)&&h.push(`SameSite=${d}`),document.cookie=h.join("; ")},read(t){if(typeof document=="undefined")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Wr(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Yr(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function ls(t,s,r){let n=!Wr(s);return t&&(n||r==!1)?Yr(t,s):s}const Mt=t=>t instanceof oe?F({},t):t;function ye(t,s){s=s||{};const r={};function n(l,i,u,f){return x.isPlainObject(l)&&x.isPlainObject(i)?x.merge.call({caseless:f},l,i):x.isPlainObject(i)?x.merge({},i):x.isArray(i)?i.slice():i}function a(l,i,u,f){if(x.isUndefined(i)){if(!x.isUndefined(l))return n(void 0,l,u,f)}else return n(l,i,u,f)}function c(l,i){if(!x.isUndefined(i))return n(void 0,i)}function d(l,i){if(x.isUndefined(i)){if(!x.isUndefined(l))return n(void 0,l)}else return n(void 0,i)}function h(l,i,u){if(u in s)return n(l,i);if(u in t)return n(void 0,l)}const o={url:c,method:c,data:c,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:h,headers:(l,i,u)=>a(Mt(l),Mt(i),u,!0)};return x.forEach(Object.keys(F(F({},t),s)),function(i){const u=o[i]||a,f=u(t[i],s[i],i);x.isUndefined(f)&&u!==h||(r[i]=f)}),r}const cs=t=>{const s=ye({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:c,headers:d,auth:h}=s;if(s.headers=d=oe.from(d),s.url=rs(ls(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&d.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),x.isFormData(r)){if(te.hasStandardBrowserEnv||te.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(x.isFunction(r.getHeaders)){const o=r.getHeaders(),l=["content-type","content-length"];Object.entries(o).forEach(([i,u])=>{l.includes(i.toLowerCase())&&d.set(i,u)})}}if(te.hasStandardBrowserEnv&&(n&&x.isFunction(n)&&(n=n(s)),n||n!==!1&&Hr(s.url))){const o=a&&c&&qr.read(c);o&&d.set(a,o)}return s},Vr=typeof XMLHttpRequest!="undefined",Jr=Vr&&function(t){return new Promise(function(r,n){const a=cs(t);let c=a.data;const d=oe.from(a.headers).normalize();let{responseType:h,onUploadProgress:o,onDownloadProgress:l}=a,i,u,f,b,m;function g(){b&&b(),m&&m(),a.cancelToken&&a.cancelToken.unsubscribe(i),a.signal&&a.signal.removeEventListener("abort",i)}let p=new XMLHttpRequest;p.open(a.method.toUpperCase(),a.url,!0),p.timeout=a.timeout;function M(){if(!p)return;const C=oe.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),P={data:!h||h==="text"||h==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:C,config:t,request:p};is(function(U){r(U),g()},function(U){n(U),g()},P),p=null}"onloadend"in p?p.onloadend=M:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(M)},p.onabort=function(){p&&(n(new O("Request aborted",O.ECONNABORTED,t,p)),p=null)},p.onerror=function(w){const P=w&&w.message?w.message:"Network Error",T=new O(P,O.ERR_NETWORK,t,p);T.event=w||null,n(T),p=null},p.ontimeout=function(){let w=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||ns;a.timeoutErrorMessage&&(w=a.timeoutErrorMessage),n(new O(w,P.clarifyTimeoutError?O.ETIMEDOUT:O.ECONNABORTED,t,p)),p=null},c===void 0&&d.setContentType(null),"setRequestHeader"in p&&x.forEach(d.toJSON(),function(w,P){p.setRequestHeader(P,w)}),x.isUndefined(a.withCredentials)||(p.withCredentials=!!a.withCredentials),h&&h!=="json"&&(p.responseType=a.responseType),l&&([f,m]=Ye(l,!0),p.addEventListener("progress",f)),o&&p.upload&&([u,b]=Ye(o),p.upload.addEventListener("progress",u),p.upload.addEventListener("loadend",b)),(a.cancelToken||a.signal)&&(i=C=>{p&&(n(!C||C.type?new Ee(null,t,p):C),p.abort(),p=null)},a.cancelToken&&a.cancelToken.subscribe(i),a.signal&&(a.signal.aborted?i():a.signal.addEventListener("abort",i)));const k=Br(a.url);if(k&&te.protocols.indexOf(k)===-1){n(new O("Unsupported protocol "+k+":",O.ERR_BAD_REQUEST,t));return}p.send(c||null)})},Qr=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let n=new AbortController,a;const c=function(l){if(!a){a=!0,h();const i=l instanceof Error?l:this.reason;n.abort(i instanceof O?i:new Ee(i instanceof Error?i.message:i))}};let d=s&&setTimeout(()=>{d=null,c(new O(`timeout ${s} of ms exceeded`,O.ETIMEDOUT))},s);const h=()=>{t&&(d&&clearTimeout(d),d=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(c):l.removeEventListener("abort",c)}),t=null)};t.forEach(l=>l.addEventListener("abort",c));const{signal:o}=n;return o.unsubscribe=()=>x.asap(h),o}},Kr=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let n=0,a;for(;n<r;)a=n+s,yield t.slice(n,a),n=a},Xr=function(t,s){return nt(this,null,function*(){try{for(var r=vt(Gr(t)),n,a,c;n=!(a=yield new pe(r.next())).done;n=!1){const d=a.value;yield*at(Kr(d,s))}}catch(a){c=[a]}finally{try{n&&(a=r.return)&&(yield new pe(a.call(r)))}finally{if(c)throw c[0]}}})},Gr=function(t){return nt(this,null,function*(){if(t[Symbol.asyncIterator]){yield*at(t);return}const s=t.getReader();try{for(;;){const{done:r,value:n}=yield new pe(s.read());if(r)break;yield n}}finally{yield new pe(s.cancel())}})},Ot=(t,s,r,n)=>{const a=Xr(t,s);let c=0,d,h=l=>{d||(d=!0,n&&n(l))};return new ReadableStream({pull(l){return W(this,null,function*(){try{const{done:i,value:u}=yield a.next();if(i){h(),l.close();return}let f=u.byteLength;if(r){let b=c+=f;r(b)}l.enqueue(new Uint8Array(u))}catch(i){throw h(i),i}})},cancel(l){return h(l),a.return()}},{highWaterMark:2})},Lt=64*1024,{isFunction:ze}=x,Zr=(({Request:t,Response:s})=>({Request:t,Response:s}))(x.global),{ReadableStream:Pt,TextEncoder:Tt}=x.global,Dt=(t,...s)=>{try{return!!t(...s)}catch(r){return!1}},en=t=>{t=x.merge.call({skipUndefined:!0},Zr,t);const{fetch:s,Request:r,Response:n}=t,a=s?ze(s):typeof fetch=="function",c=ze(r),d=ze(n);if(!a)return!1;const h=a&&ze(Pt),o=a&&(typeof Tt=="function"?(m=>g=>m.encode(g))(new Tt):m=>W(he,null,function*(){return new Uint8Array(yield new r(m).arrayBuffer())})),l=c&&h&&Dt(()=>{let m=!1;const g=new r(te.origin,{body:new Pt,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),i=d&&h&&Dt(()=>x.isReadableStream(new n("").body)),u={stream:i&&(m=>m.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!u[m]&&(u[m]=(g,p)=>{let M=g&&g[m];if(M)return M.call(g);throw new O(`Response type '${m}' is not supported`,O.ERR_NOT_SUPPORT,p)})});const f=m=>W(he,null,function*(){if(m==null)return 0;if(x.isBlob(m))return m.size;if(x.isSpecCompliantForm(m))return(yield new r(te.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(x.isArrayBufferView(m)||x.isArrayBuffer(m))return m.byteLength;if(x.isURLSearchParams(m)&&(m=m+""),x.isString(m))return(yield o(m)).byteLength}),b=(m,g)=>W(he,null,function*(){const p=x.toFiniteNumber(m.getContentLength());return p==null?f(g):p});return m=>W(he,null,function*(){let{url:g,method:p,data:M,signal:k,cancelToken:C,timeout:w,onDownloadProgress:P,onUploadProgress:T,responseType:U,headers:ie,withCredentials:se="same-origin",fetchOptions:$}=cs(m),L=s||fetch;U=U?(U+"").toLowerCase():"text";let K=Qr([k,C&&C.toAbortSignal()],w),J=null;const R=K&&K.unsubscribe&&(()=>{K.unsubscribe()});let S;try{if(T&&l&&p!=="get"&&p!=="head"&&(S=yield b(ie,M))!==0){let _=new r(g,{method:"POST",body:M,duplex:"half"}),D;if(x.isFormData(M)&&(D=_.headers.get("content-type"))&&ie.setContentType(D),_.body){const[z,q]=Rt(S,Ye(At(T)));M=Ot(_.body,Lt,z,q)}}x.isString(se)||(se=se?"include":"omit");const y=c&&"credentials"in r.prototype,j=I(F({},$),{signal:K,method:p.toUpperCase(),headers:ie.normalize().toJSON(),body:M,duplex:"half",credentials:y?se:void 0});J=c&&new r(g,j);let v=yield c?L(J,$):L(g,j);const N=i&&(U==="stream"||U==="response");if(i&&(P||N&&R)){const _={};["status","statusText","headers"].forEach(re=>{_[re]=v[re]});const D=x.toFiniteNumber(v.headers.get("content-length")),[z,q]=P&&Rt(D,Ye(At(P),!0))||[];v=new n(Ot(v.body,Lt,z,()=>{q&&q(),R&&R()}),_)}U=U||"text";let A=yield u[x.findKey(u,U)||"text"](v,m);return!N&&R&&R(),yield new Promise((_,D)=>{is(_,D,{data:A,headers:oe.from(v.headers),status:v.status,statusText:v.statusText,config:m,request:J})})}catch(y){throw R&&R(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new O("Network Error",O.ERR_NETWORK,m,J),{cause:y.cause||y}):O.from(y,y&&y.code,m,J)}})},tn=new Map,ds=t=>{let s=t&&t.env||{};const{fetch:r,Request:n,Response:a}=s,c=[n,a,r];let d=c.length,h=d,o,l,i=tn;for(;h--;)o=c[h],l=i.get(o),l===void 0&&i.set(o,l=h?new Map:en(s)),i=l;return l};ds();const gt={http:gr,xhr:Jr,fetch:{get:ds}};x.forEach(gt,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch(r){}Object.defineProperty(t,"adapterName",{value:s})}});const Ft=t=>`- ${t}`,sn=t=>x.isFunction(t)||t===null||t===!1;function rn(t,s){t=x.isArray(t)?t:[t];const{length:r}=t;let n,a;const c={};for(let d=0;d<r;d++){n=t[d];let h;if(a=n,!sn(n)&&(a=gt[(h=String(n)).toLowerCase()],a===void 0))throw new O(`Unknown adapter '${h}'`);if(a&&(x.isFunction(a)||(a=a.get(s))))break;c[h||"#"+d]=a}if(!a){const d=Object.entries(c).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let h=r?d.length>1?`since :
`+d.map(Ft).join(`
`):" "+Ft(d[0]):"as no adapter specified";throw new O("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return a}const us={getAdapter:rn,adapters:gt};function lt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ee(null,t)}function $t(t){return lt(t),t.headers=oe.from(t.headers),t.data=it.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),us.getAdapter(t.adapter||$e.adapter,t)(t).then(function(n){return lt(t),n.data=it.call(t,t.transformResponse,n),n.headers=oe.from(n.headers),n},function(n){return os(n)||(lt(t),n&&n.response&&(n.response.data=it.call(t,t.transformResponse,n.response),n.response.headers=oe.from(n.response.headers))),Promise.reject(n)})}const ms="1.13.2",st={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{st[t]=function(n){return typeof n===t||"a"+(s<1?"n ":" ")+t}});const It={};st.transitional=function(s,r,n){function a(c,d){return"[Axios v"+ms+"] Transitional option '"+c+"'"+d+(n?". "+n:"")}return(c,d,h)=>{if(s===!1)throw new O(a(d," has been removed"+(r?" in "+r:"")),O.ERR_DEPRECATED);return r&&!It[d]&&(It[d]=!0,console.warn(a(d," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(c,d,h):!0}};st.spelling=function(s){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${s}`),!0)};function nn(t,s,r){if(typeof t!="object")throw new O("options must be an object",O.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let a=n.length;for(;a-- >0;){const c=n[a],d=s[c];if(d){const h=t[c],o=h===void 0||d(h,c,t);if(o!==!0)throw new O("option "+c+" must be "+o,O.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new O("Unknown option "+c,O.ERR_BAD_OPTION)}}const We={assertOptions:nn,validators:st},ce=We.validators;let ge=class{constructor(s){this.defaults=s||{},this.interceptors={request:new kt,response:new kt}}request(s,r){return W(this,null,function*(){try{return yield this._request(s,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const c=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?c&&!String(n.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+c):n.stack=c}catch(d){}}throw n}})}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=ye(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:c}=r;n!==void 0&&We.assertOptions(n,{silentJSONParsing:ce.transitional(ce.boolean),forcedJSONParsing:ce.transitional(ce.boolean),clarifyTimeoutError:ce.transitional(ce.boolean)},!1),a!=null&&(x.isFunction(a)?r.paramsSerializer={serialize:a}:We.assertOptions(a,{encode:ce.function,serialize:ce.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),We.assertOptions(r,{baseUrl:ce.spelling("baseURL"),withXsrfToken:ce.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let d=c&&x.merge(c.common,c[r.method]);c&&x.forEach(["delete","get","head","post","put","patch","common"],m=>{delete c[m]}),r.headers=oe.concat(d,c);const h=[];let o=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(o=o&&g.synchronous,h.unshift(g.fulfilled,g.rejected))});const l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});let i,u=0,f;if(!o){const m=[$t.bind(this),void 0];for(m.unshift(...h),m.push(...l),f=m.length,i=Promise.resolve(r);u<f;)i=i.then(m[u++],m[u++]);return i}f=h.length;let b=r;for(;u<f;){const m=h[u++],g=h[u++];try{b=m(b)}catch(p){g.call(this,p);break}}try{i=$t.call(this,b)}catch(m){return Promise.reject(m)}for(u=0,f=l.length;u<f;)i=i.then(l[u++],l[u++]);return i}getUri(s){s=ye(this.defaults,s);const r=ls(s.baseURL,s.url,s.allowAbsoluteUrls);return rs(r,s.params,s.paramsSerializer)}};x.forEach(["delete","get","head","options"],function(s){ge.prototype[s]=function(r,n){return this.request(ye(n||{},{method:s,url:r,data:(n||{}).data}))}});x.forEach(["post","put","patch"],function(s){function r(n){return function(c,d,h){return this.request(ye(h||{},{method:s,headers:n?{"Content-Type":"multipart/form-data"}:{},url:c,data:d}))}}ge.prototype[s]=r(),ge.prototype[s+"Form"]=r(!0)});let an=class hs{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(c){r=c});const n=this;this.promise.then(a=>{if(!n._listeners)return;let c=n._listeners.length;for(;c-- >0;)n._listeners[c](a);n._listeners=null}),this.promise.then=a=>{let c;const d=new Promise(h=>{n.subscribe(h),c=h}).then(a);return d.cancel=function(){n.unsubscribe(c)},d},s(function(c,d,h){n.reason||(n.reason=new Ee(c,d,h),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=n=>{s.abort(n)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new hs(function(a){s=a}),cancel:s}}};function on(t){return function(r){return t.apply(null,r)}}function ln(t){return x.isObject(t)&&t.isAxiosError===!0}const ft={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ft).forEach(([t,s])=>{ft[s]=t});function fs(t){const s=new ge(t),r=Wt(ge.prototype.request,s);return x.extend(r,ge.prototype,s,{allOwnKeys:!0}),x.extend(r,s,null,{allOwnKeys:!0}),r.create=function(a){return fs(ye(t,a))},r}const Y=fs($e);Y.Axios=ge;Y.CanceledError=Ee;Y.CancelToken=an;Y.isCancel=os;Y.VERSION=ms;Y.toFormData=tt;Y.AxiosError=O;Y.Cancel=Y.CanceledError;Y.all=function(s){return Promise.all(s)};Y.spread=on;Y.isAxiosError=ln;Y.mergeConfig=ye;Y.AxiosHeaders=oe;Y.formToJSON=t=>as(x.isHTMLForm(t)?new FormData(t):t);Y.getAdapter=us.getAdapter;Y.HttpStatusCode=ft;Y.default=Y;const{Axios:qn,AxiosError:Wn,CanceledError:Yn,isCancel:Vn,CancelToken:Jn,VERSION:Qn,all:Kn,Cancel:Xn,isAxiosError:Gn,spread:Zn,toFormData:ea,AxiosHeaders:ta,HttpStatusCode:sa,formToJSON:ra,getAdapter:na,mergeConfig:aa}=Y,cn="/api",dn=cn,B=Y.create({baseURL:dn});B.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers=I(F({},t.headers),{Authorization:`Bearer ${s}`})),t});B.interceptors.response.use(t=>t,t=>{var r;return((r=t==null?void 0:t.response)==null?void 0:r.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("name"),localStorage.removeItem("userId"),typeof window!="undefined"&&window.location.pathname!=="/"&&window.location.assign("/")),Promise.reject(t)});const xs=E.createContext(void 0),un=({children:t})=>{const[s,r]=E.useState({token:null,role:null,name:null,userId:null,mustChangePassword:!1,ready:!1});E.useEffect(()=>{W(he,null,function*(){const h=localStorage.getItem("token"),o=localStorage.getItem("role"),l=localStorage.getItem("name"),i=localStorage.getItem("userId");if(h)try{const u=yield B.get("/auth/me",{headers:{Authorization:`Bearer ${h}`}}),f=u.data.role;localStorage.setItem("role",f),localStorage.setItem("name",u.data.full_name),localStorage.setItem("userId",u.data.id),r({token:h,role:f,name:u.data.full_name,userId:u.data.id,mustChangePassword:!!u.data.must_change_password,ready:!0});return}catch(u){localStorage.clear(),r({token:null,role:null,name:null,userId:null,mustChangePassword:!1,ready:!0});return}(o||l||i)&&localStorage.clear(),r({token:null,role:null,name:null,userId:null,mustChangePassword:!1,ready:!0})})},[]);const n=()=>W(he,null,function*(){const d=localStorage.getItem("token");if(!d)return;const h=yield B.get("/auth/me",{headers:{Authorization:`Bearer ${d}`}}),o=h.data.role;localStorage.setItem("role",o),localStorage.setItem("name",h.data.full_name),localStorage.setItem("userId",h.data.id),r({token:d,role:o,name:h.data.full_name,userId:h.data.id,mustChangePassword:!!h.data.must_change_password,ready:!0})}),a=(d,h,o,l)=>W(he,null,function*(){const i=yield B.post("/auth/token",{email:d,password:h,mfa_code:o,recovery_code:l}),u=i.data.access_token;localStorage.setItem("token",u);const f=yield B.get("/auth/me",{headers:{Authorization:`Bearer ${u}`}}),b=f.data.role;return localStorage.setItem("role",b),localStorage.setItem("name",f.data.full_name),localStorage.setItem("userId",f.data.id),r({token:u,role:b,name:f.data.full_name,userId:f.data.id,mustChangePassword:!!f.data.must_change_password,ready:!0}),i.data}),c=()=>{localStorage.clear(),r({token:null,role:null,name:null,userId:null,mustChangePassword:!1,ready:!0})};return e.jsx(xs.Provider,{value:I(F({},s),{login:a,logout:c,refreshMe:n}),children:t})},Ie=()=>{const t=E.useContext(xs);if(!t)throw new Error("useAuth must be used within AuthProvider");return t};function Ne({to:t,icon:s,label:r,badge:n}){const c=Ht().pathname===t;return e.jsxs(_s,{to:t,className:`flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition ${c?"bg-app text-text-primary":"text-text-secondary hover:bg-app hover:text-text-primary"}`,children:[e.jsx("span",{className:"h-5 w-5",children:s}),e.jsx("span",{className:"flex-1",children:r}),n!==void 0&&n>0&&e.jsx("span",{className:"ml-auto inline-flex h-5 min-w-5 items-center justify-center rounded-full bg-app px-1 text-[11px] font-semibold text-text-secondary border border-border",children:n})]})}function mn(){var r,n;const{user:t,logout:s}=Ie();return e.jsxs("div",{className:"fixed inset-y-0 left-0 w-64 bg-surface border-r border-border px-6 py-6 flex flex-col gap-6 overflow-y-auto scrollbar-thin",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-brand flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"C"})}),e.jsx("span",{className:"text-lg font-semibold text-text-primary",children:"Compass"})]}),e.jsxs("nav",{className:"flex flex-col gap-1",children:[e.jsx(Ne,{to:"/",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),label:"Dashboard"}),e.jsx(Ne,{to:"/complaints",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),label:"Complaints"}),e.jsx(Ne,{to:"/create",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),label:"New Complaint"}),(t==null?void 0:t.role)!=="read_only"&&e.jsx(Ne,{to:"/reference",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),label:"Reference Data"}),((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="complaints_manager")&&e.jsx(Ne,{to:"/users",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),label:"Users"}),e.jsx(Ne,{to:"/settings",icon:e.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),label:"Settings"})]}),e.jsxs("div",{className:"mt-auto pt-6 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-app flex items-center justify-center text-text-primary font-semibold text-sm",children:((r=t==null?void 0:t.full_name)==null?void 0:r.charAt(0))||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary truncate",children:t==null?void 0:t.full_name}),e.jsx("div",{className:"text-xs text-text-muted truncate capitalize",children:(n=t==null?void 0:t.role)==null?void 0:n.replace("_"," ")})]})]}),e.jsxs("button",{onClick:s,className:"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium text-text-secondary hover:bg-app hover:text-text-primary transition",children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{children:"Sign out"})]})]})]})}function hn({children:t}){return e.jsxs("div",{className:"min-h-screen bg-app text-text-primary",children:[e.jsx(mn,{}),e.jsx("div",{className:"ml-64 min-h-screen flex flex-col",children:t})]})}function V(c){var d=c,{variant:t="primary",size:s="md",className:r="",children:n}=d,a=rt(d,["variant","size","className","children"]);const h="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-offset-2 focus-visible:ring-offset-app disabled:opacity-40 disabled:pointer-events-none",o={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm"},l={primary:"bg-brand text-white hover:opacity-90 active:translate-y-px",secondary:"bg-surface text-text-primary border border-border hover:bg-app active:translate-y-px",ghost:"bg-transparent text-text-primary hover:bg-app active:translate-y-px",icon:"h-10 w-10 p-0 rounded-full hover:bg-app active:translate-y-px"};return e.jsx("button",I(F({className:`${h} ${o[s]} ${l[t]} ${r}`},a),{children:n}))}function H(a){var c=a,{error:t,leadingIcon:s,className:r=""}=c,n=rt(c,["error","leadingIcon","className"]);const d="w-full h-10 rounded-lg border bg-surface px-3 text-sm text-text-primary placeholder:text-text-muted outline-none transition",h=t?"border-semantic-error focus:border-semantic-error focus:ring-2 focus:ring-semantic-error/15":"border-border focus:border-brand focus:ring-2 focus:ring-brand/15",o=s?"pl-10":"px-3";return e.jsxs("div",{className:"relative",children:[s&&e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-text-muted",children:s}),e.jsx("input",F({className:`${d} ${h} ${o} ${r}`},n))]})}function Q({children:t,className:s="",onClick:r,selected:n,inverse:a}){const c="rounded-card border shadow-card p-4",d=a?"bg-brand text-white border-transparent":"bg-surface text-text-primary border-border",h=n?"ring-2 ring-brand/15":"",o=r?"cursor-pointer hover:shadow-sm active:translate-y-px transition":"";return e.jsx("div",{className:`${c} ${d} ${h} ${o} ${s}`,onClick:r,children:t})}function G({children:t,className:s=""}){return e.jsx("div",{className:`flex items-start justify-between gap-3 ${s}`,children:t})}function Z({children:t,className:s="",inverse:r}){const n=r?"text-white":"text-text-primary";return e.jsx("h3",{className:`text-sm font-semibold ${n} ${s}`,children:t})}function X({children:t,className:s="",inverse:r}){const n=r?"text-white/80":"text-text-secondary";return e.jsx("div",{className:`mt-2 text-xs leading-relaxed ${n} ${s}`,children:t})}function Ve({open:t,onClose:s,children:r}){return E.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:s}),e.jsx("div",{className:"fixed left-1/2 top-1/2 w-[min(560px,calc(100%-2rem))] -translate-x-1/2 -translate-y-1/2 rounded-modal border border-border bg-surface p-6 shadow-xl z-50",children:r})]}):null}function Je({children:t,onClose:s}){return e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:t}),s&&e.jsx("button",{onClick:s,className:"inline-flex h-8 w-8 items-center justify-center rounded-full text-text-muted hover:bg-app hover:text-text-primary transition",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function Qe({children:t}){return e.jsx("div",{className:"text-sm text-text-secondary",children:t})}function Ke({children:t}){return e.jsx("div",{className:"mt-6 flex justify-end gap-3",children:t})}function fn({children:t,className:s=""}){return e.jsx("div",{className:`overflow-hidden rounded-card border border-border bg-surface ${s}`,children:e.jsx("table",{className:"w-full table-auto",children:t})})}function xn({children:t}){return e.jsx("thead",{className:"bg-app",children:t})}function pn({children:t}){return e.jsx("tbody",{children:t})}function Bt({children:t,onClick:s,className:r=""}){const n=s?"cursor-pointer hover:bg-app/60":"hover:bg-app/60";return e.jsx("tr",{className:`border-t border-border ${n} ${r}`,onClick:s,children:t})}function Ae({children:t,className:s=""}){return e.jsx("th",{className:`h-10 px-4 text-left text-xs font-semibold text-text-secondary ${s}`,children:t})}function Me({children:t,className:s=""}){return e.jsx("td",{className:`h-12 px-4 text-sm text-text-primary ${s}`,children:t})}function ct({value:t,onChange:s,options:r,placeholder:n,className:a=""}){const[c,d]=E.useState(!1),[h,o]=E.useState(t),[l,i]=E.useState(0),u=E.useRef(null),f=E.useRef(null);E.useEffect(()=>{o(t)},[t]);const b=r.filter(k=>k.toLowerCase().includes(h.toLowerCase()));E.useEffect(()=>{const k=C=>{f.current&&!f.current.contains(C.target)&&u.current&&!u.current.contains(C.target)&&(d(!1),s(h))};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[h,s]);const m=k=>{const C=k.target.value;o(C),d(!0),i(0)},g=k=>{var C;o(k),s(k),d(!1),(C=u.current)==null||C.blur()},p=k=>{var C;if(!c&&(k.key==="ArrowDown"||k.key==="ArrowUp")){d(!0);return}if(c)switch(k.key){case"ArrowDown":k.preventDefault(),i(w=>w<b.length-1?w+1:w);break;case"ArrowUp":k.preventDefault(),i(w=>w>0?w-1:0);break;case"Enter":k.preventDefault(),b[l]&&g(b[l]);break;case"Escape":k.preventDefault(),d(!1),(C=u.current)==null||C.blur();break}},M=()=>{setTimeout(()=>{var k;(k=f.current)!=null&&k.contains(document.activeElement)||(d(!1),s(h))},200)};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:u,type:"text",value:h,onChange:m,onFocus:()=>d(!0),onBlur:M,onKeyDown:p,placeholder:n,className:`w-full h-10 rounded-lg border border-border bg-surface pl-3 pr-10 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15 ${a}`}),e.jsx("button",{type:"button",onClick:()=>{var k;d(!c),(k=u.current)==null||k.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition",children:e.jsx("svg",{className:`h-4 w-4 transition-transform ${c?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})})]}),c&&b.length>0&&e.jsx("div",{ref:f,className:"absolute z-50 mt-1 w-full rounded-lg border border-border bg-surface shadow-lg max-h-60 overflow-auto scrollbar-thin",children:b.map((k,C)=>e.jsx("button",{type:"button",onClick:()=>g(k),onMouseEnter:()=>i(C),className:`w-full text-left px-3 py-2 text-sm transition ${C===l?"bg-app text-text-primary":"text-text-secondary hover:bg-app hover:text-text-primary"}`,children:k},k))}),c&&h&&b.length===0&&e.jsx("div",{ref:f,className:"absolute z-50 mt-1 w-full rounded-lg border border-border bg-surface shadow-lg p-3",children:e.jsxs("p",{className:"text-sm text-text-secondary",children:['No matches found. Type to create "',h,'"']})})]})}function de({title:t,actions:s}){return e.jsxs("div",{className:"h-16 px-10 flex items-center justify-between gap-6 bg-app border-b border-border",children:[t?e.jsx("h1",{className:"text-2xl font-semibold text-text-primary",children:t}):e.jsx("div",{className:"w-full max-w-md",children:e.jsx(H,{type:"search",placeholder:"Search complaints...",leadingIcon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),e.jsx("div",{className:"flex items-center gap-3",children:s})]})}function bn(){const t=Pe(),{userId:s,token:r}=Ie(),[n,a]=E.useState(null),[c,d]=E.useState([]),[h,o]=E.useState("mine"),[l,i]=E.useState(!1);E.useEffect(()=>{r&&B.get("/complaints/metrics",{params:{_:Date.now()}}).then(f=>a(f.data)).catch(f=>{var b;((b=f==null?void 0:f.response)==null?void 0:b.status)!==401&&console.error("Failed to load dashboard metrics",f)})},[r]),E.useEffect(()=>{if(!s||!r)return;W(this,null,function*(){var b;i(!0);try{let m=[];h==="mine"?m=((yield B.get("/complaints",{params:{handler_id:s,page:1,page_size:50,_:Date.now()}})).data||[]).filter(p=>p.status!=="Closed"):h==="unassigned"?m=((yield B.get("/complaints",{params:{page:1,page_size:100,_:Date.now()}})).data||[]).filter(p=>p.status!=="Closed").filter(p=>!p.assigned_handler_id):h==="breached"?m=((yield B.get("/complaints",{params:{overdue:!0,page:1,page_size:100,_:Date.now()}})).data||[]).filter(p=>p.status!=="Closed"):h==="oldest"&&(m=((yield B.get("/complaints",{params:{page:1,page_size:100,_:Date.now()}})).data||[]).filter(p=>p.status!=="Closed"),m.sort((p,M)=>ee(p.received_at).valueOf()-ee(M.received_at).valueOf()),m=m.slice(0,20)),d(m)}catch(m){if(((b=m==null?void 0:m.response)==null?void 0:b.status)===401)return;console.error("Failed to load queue",m)}finally{i(!1)}})},[s,r,h]);const u=f=>f===null?"N/A":`${Math.round(f)}%`;return e.jsxs(e.Fragment,{children:[e.jsx(de,{actions:e.jsxs(V,{variant:"primary",onClick:()=>t("/create"),children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"New Complaint"]})}),e.jsxs("div",{className:"px-10 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"Open Cases"}),e.jsx("div",{className:"mt-3 text-3xl font-semibold text-text-primary",children:(n==null?void 0:n.kpis.open)||0}),e.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"Total open complaints"})]}),e.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"My Open"}),e.jsx("div",{className:"mt-3 text-3xl font-semibold text-text-primary",children:(n==null?void 0:n.kpis.my_open)||0}),e.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"Assigned to me"})]}),e.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"SLA Breaches"}),e.jsx("div",{className:"mt-3 text-3xl font-semibold text-semantic-error",children:(n==null?void 0:n.kpis.open_sla_breaches)||0}),e.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"Open breaches"})]}),e.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"Stale (21d+)"}),e.jsx("div",{className:"mt-3 text-3xl font-semibold text-semantic-warning",children:(n==null?void 0:n.kpis.open_stale_21d)||0}),e.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"No activity"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"Acknowledgement SLA (30d)"})}),e.jsx(X,{children:e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-text-secondary",children:"On-time rate"}),e.jsx("span",{className:"text-sm font-semibold text-text-primary",children:u((n==null?void 0:n.sla_30d.ack.on_time_pct)||null)})]}),e.jsx("div",{className:"w-full h-2 bg-app rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-semantic-success",style:{width:`${(n==null?void 0:n.sla_30d.ack.on_time_pct)||0}%`}})}),e.jsxs("div",{className:"mt-2 text-xs text-text-muted",children:[(n==null?void 0:n.sla_30d.ack.on_time)||0," / ",(n==null?void 0:n.sla_30d.ack.total)||0," on time"]})]})})]}),e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"Final Response SLA (30d)"})}),e.jsx(X,{children:e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-text-secondary",children:"On-time rate"}),e.jsx("span",{className:"text-sm font-semibold text-text-primary",children:u((n==null?void 0:n.sla_30d.final.on_time_pct)||null)})]}),e.jsx("div",{className:"w-full h-2 bg-app rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-semantic-success",style:{width:`${(n==null?void 0:n.sla_30d.final.on_time_pct)||0}%`}})}),e.jsxs("div",{className:"mt-2 text-xs text-text-muted",children:[(n==null?void 0:n.sla_30d.final.on_time)||0," / ",(n==null?void 0:n.sla_30d.final.total)||0," on time"]})]})})]})]}),e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"My Queue"})}),e.jsx("div",{className:"mt-4 border-b border-border",children:e.jsx("div",{className:"flex gap-1 px-4",children:["mine","unassigned","breached","oldest"].map(f=>e.jsx("button",{onClick:()=>o(f),className:`px-4 py-2 text-sm font-medium capitalize transition border-b-2 ${h===f?"border-brand text-text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:f},f))})}),e.jsx("div",{className:"p-4",children:l?e.jsx("div",{className:"text-center py-8 text-text-muted",children:"Loading..."}):c.length===0?e.jsx("div",{className:"text-center py-8 text-text-muted",children:"No complaints in this queue"}):e.jsx("div",{className:"space-y-2",children:c.map(f=>e.jsxs("div",{onClick:()=>t(`/complaints/${f.id}`),className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-app cursor-pointer transition",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary truncate",children:f.reference}),e.jsx("div",{className:"text-xs text-text-secondary truncate mt-1",children:f.description||"No description"})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-4",children:[e.jsx("span",{className:"text-xs text-text-muted whitespace-nowrap",children:ee(f.received_at).format("MMM D")}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium ${f.status==="New"?"bg-semantic-info/10 text-semantic-info":f.status==="Acknowledged"?"bg-semantic-success/10 text-semantic-success":"bg-app text-text-secondary"}`,children:f.status})]})]},f.id))})})]})]})]})}function ps({status:t,className:s=""}){const r=n=>{switch(n){case"New":return"bg-semantic-info/10 text-semantic-info border-semantic-info/20";case"Acknowledged":return"bg-semantic-success/10 text-semantic-success border-semantic-success/20";case"In Investigation":return"bg-blue-50 text-blue-700 border-blue-200";case"Response Drafted":return"bg-purple-50 text-purple-700 border-purple-200";case"Awaiting Customer":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"Escalated":return"bg-semantic-warning/10 text-semantic-warning border-semantic-warning/20";case"Closed":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-app text-text-secondary border-border"}};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium border ${r(t)} ${s}`,children:t})}function gn(){const t=Pe(),[s,r]=E.useState([]),[n,a]=E.useState(!0),[c,d]=E.useState("");E.useEffect(()=>{B.get("/complaints",{params:{page:1,page_size:100}}).then(o=>{r(o.data||[]),a(!1)}).catch(o=>{console.error("Failed to load complaints",o),a(!1)})},[]);const h=s.filter(o=>{var l;return o.reference.toLowerCase().includes(c.toLowerCase())||((l=o.description)==null?void 0:l.toLowerCase().includes(c.toLowerCase()))});return e.jsxs(e.Fragment,{children:[e.jsx(de,{title:"Complaints"}),e.jsxs("div",{className:"px-10 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-full max-w-md",children:e.jsx(H,{type:"search",placeholder:"Search complaints...",value:c,onChange:o=>d(o.target.value),leadingIcon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),e.jsxs(V,{variant:"primary",onClick:()=>t("/create"),children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"New Complaint"]})]}),n?e.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading complaints..."}):e.jsxs(fn,{children:[e.jsx(xn,{children:e.jsxs(Bt,{children:[e.jsx(Ae,{children:"Reference"}),e.jsx(Ae,{children:"Status"}),e.jsx(Ae,{children:"Description"}),e.jsx(Ae,{children:"Received"}),e.jsx(Ae,{children:"Handler"})]})}),e.jsx(pn,{children:h.map(o=>e.jsxs(Bt,{onClick:()=>t(`/complaints/${o.id}`),children:[e.jsx(Me,{children:e.jsx("span",{className:"font-semibold",children:o.reference})}),e.jsx(Me,{children:e.jsx(ps,{status:o.status})}),e.jsx(Me,{children:e.jsx("span",{className:"truncate max-w-md block",children:o.description||"No description"})}),e.jsx(Me,{children:e.jsx("span",{className:"text-text-muted",children:ee(o.received_at).format("MMM D, YYYY")})}),e.jsx(Me,{children:e.jsx("span",{className:"text-text-muted",children:o.assigned_handler_name||"Unassigned"})})]},o.id))})]}),!n&&h.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-sm font-semibold text-text-primary",children:"No complaints found"}),e.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:"Try adjusting your search"})]})]})]})}function yn(){const{id:t}=Rs(),s=Pe(),[r,n]=E.useState(null),[a,c]=E.useState(!0),[d,h]=E.useState("overview"),[o,l]=E.useState(!1),[i,u]=E.useState({channel:"Email",direction:"Inbound",summary:"",occurred_at:ee().format("YYYY-MM-DDTHH:mm"),is_final_response:!1}),[f,b]=E.useState(null),[m,g]=E.useState(!1),[p,M]=E.useState(null);E.useEffect(()=>{t&&k()},[t]);const k=()=>{c(!0),B.get(`/complaints/${t}`).then(w=>{n(w.data),c(!1)}).catch(w=>{console.error("Failed to load complaint",w),c(!1)})},C=()=>W(this,null,function*(){var w,P;if(!(!t||!i.summary)){g(!0),M(null);try{const T=new FormData;T.append("channel",i.channel),T.append("direction",i.direction),T.append("summary",i.summary),T.append("occurred_at",ee(i.occurred_at).toISOString()),T.append("is_final_response",i.is_final_response.toString()),f&&Array.from(f).forEach(U=>{T.append("files",U)}),yield B.post(`/complaints/${t}/communications`,T,{headers:{"Content-Type":"multipart/form-data"}}),l(!1),u({channel:"Email",direction:"Inbound",summary:"",occurred_at:ee().format("YYYY-MM-DDTHH:mm"),is_final_response:!1}),b(null),k()}catch(T){M(((P=(w=T==null?void 0:T.response)==null?void 0:w.data)==null?void 0:P.detail)||"Failed to add communication")}finally{g(!1)}}});return a?e.jsxs(e.Fragment,{children:[e.jsx(de,{title:"Loading..."}),e.jsx("div",{className:"px-10 py-6",children:e.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading complaint details..."})})]}):r?e.jsxs(e.Fragment,{children:[e.jsx(de,{title:r.reference,actions:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ps,{status:r.status}),e.jsx(V,{variant:"secondary",onClick:()=>s("/complaints"),children:"Back"})]})}),e.jsxs("div",{className:"px-10 py-6",children:[e.jsx("div",{className:"border-b border-border mb-6",children:e.jsx("div",{className:"flex gap-1",children:["overview","communications","outcome","history"].map(w=>e.jsx("button",{onClick:()=>h(w),className:`px-4 py-3 text-sm font-medium capitalize transition border-b-2 ${d===w?"border-brand text-text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:w},w))})}),d==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"Complaint Details"})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.description||"No description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Category"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.category||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Reason"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.reason||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Product"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.product||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Scheme"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.scheme||"N/A"})]})]})]})})]}),r.complainant&&e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"Complainant"})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx("p",{className:"text-sm text-text-primary font-medium",children:r.complainant.full_name}),r.complainant.email&&e.jsx("p",{className:"text-sm text-text-secondary",children:r.complainant.email}),r.complainant.phone&&e.jsx("p",{className:"text-sm text-text-secondary",children:r.complainant.phone})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"Timeline"})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Received"}),e.jsx("p",{className:"text-sm text-text-primary",children:ee(r.received_at).format("MMM D, YYYY h:mm A")})]}),r.acknowledged_at&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Acknowledged"}),e.jsx("p",{className:"text-sm text-text-primary",children:ee(r.acknowledged_at).format("MMM D, YYYY h:mm A")})]}),r.closed_at&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Closed"}),e.jsx("p",{className:"text-sm text-text-primary",children:ee(r.closed_at).format("MMM D, YYYY h:mm A")})]})]})})]}),e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"Assignment"})}),e.jsx(X,{children:e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Handler"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.assigned_handler_name||"Unassigned"})]})})]})]})]}),d==="communications"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Communications"}),e.jsxs(V,{variant:"primary",onClick:()=>l(!0),children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Add Communication"]})]}),r.communications&&r.communications.length>0?e.jsx("div",{className:"space-y-4",children:r.communications.sort((w,P)=>ee(P.occurred_at).valueOf()-ee(w.occurred_at).valueOf()).map(w=>e.jsx(Q,{children:e.jsxs(X,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-app text-text-primary border border-border",children:w.channel}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium ${w.direction==="Inbound"?"bg-semantic-info/10 text-semantic-info":"bg-semantic-success/10 text-semantic-success"}`,children:w.direction}),w.is_final_response&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-semantic-warning/10 text-semantic-warning border border-semantic-warning/20",children:"Final Response"})]}),e.jsx("span",{className:"text-xs text-text-muted",children:ee(w.occurred_at).format("MMM D, YYYY h:mm A")})]}),e.jsx("p",{className:"text-sm text-text-primary mt-2",children:w.summary}),w.attachments&&w.attachments.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:w.attachments.map(P=>e.jsxs("a",{href:P.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1 rounded-lg bg-app text-text-primary hover:bg-border text-xs transition",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),P.file_name]},P.id))})]})},w.id))}):e.jsxs("div",{className:"text-center py-12 rounded-lg border border-border bg-surface",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),e.jsx("p",{className:"mt-4 text-sm font-semibold text-text-primary",children:"No communications yet"}),e.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:'Click "Add Communication" to log your first interaction'})]})]}),d==="outcome"&&e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"Outcome & Redress"})}),e.jsx(X,{children:r.outcome?e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Outcome"}),e.jsx("p",{className:"text-sm text-text-primary capitalize",children:r.outcome.outcome.replace("_"," ")})]}),r.outcome.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm text-text-secondary",children:r.outcome.notes})]})]}):e.jsx("p",{className:"text-sm text-text-secondary mt-4",children:"No outcome recorded yet"})})]}),d==="history"&&e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"Activity History"})}),e.jsx(X,{children:r.events&&r.events.length>0?e.jsx("div",{className:"space-y-4 mt-4",children:r.events.map(w=>e.jsx("div",{className:"flex gap-3 pb-4 border-b border-border last:border-0",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-text-primary",children:w.event_type.replace("_"," ")}),e.jsx("span",{className:"text-xs text-text-muted",children:ee(w.created_at).format("MMM D, YYYY h:mm A")})]}),w.description&&e.jsx("p",{className:"text-xs text-text-secondary mt-1",children:w.description}),w.created_by_name&&e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["by ",w.created_by_name]})]})},w.id))}):e.jsx("p",{className:"text-sm text-text-secondary mt-4",children:"No history events recorded"})})]})]}),e.jsxs(Ve,{open:o,onClose:()=>l(!1),children:[e.jsx(Je,{onClose:()=>l(!1),children:"Add Communication"}),e.jsxs(Qe,{children:[p&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:p}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Channel *"}),e.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:i.channel,onChange:w=>u(I(F({},i),{channel:w.target.value})),children:[e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"Letter",children:"Letter"}),e.jsx("option",{value:"In Person",children:"In Person"}),e.jsx("option",{value:"Web Form",children:"Web Form"}),e.jsx("option",{value:"Social Media",children:"Social Media"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Direction *"}),e.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:i.direction,onChange:w=>u(I(F({},i),{direction:w.target.value})),children:[e.jsx("option",{value:"Inbound",children:"Inbound"}),e.jsx("option",{value:"Outbound",children:"Outbound"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Date & Time *"}),e.jsx(H,{type:"datetime-local",value:i.occurred_at,onChange:w=>u(I(F({},i),{occurred_at:w.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Summary *"}),e.jsx("textarea",{className:"w-full min-h-[100px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:i.summary,onChange:w=>u(I(F({},i),{summary:w.target.value})),placeholder:"Describe the communication..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Attachments"}),e.jsx("input",{type:"file",multiple:!0,onChange:w=>b(w.target.files),className:"w-full text-sm text-text-primary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-brand file:text-white hover:file:opacity-90 cursor-pointer"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_final_response,onChange:()=>u(I(F({},i),{is_final_response:!i.is_final_response})),className:"h-4 w-4 rounded border-border text-brand focus:ring-2 focus:ring-brand/15"}),e.jsx("span",{className:"text-sm font-medium text-text-primary",children:"Mark as Final Response"})]})]})]}),e.jsxs(Ke,{children:[e.jsx(V,{variant:"secondary",onClick:()=>l(!1),children:"Cancel"}),e.jsx(V,{variant:"primary",onClick:C,disabled:!i.summary||m,children:m?"Adding...":"Add Communication"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(de,{title:"Not Found"}),e.jsx("div",{className:"px-10 py-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-sm font-semibold text-text-primary",children:"Complaint not found"}),e.jsx(V,{variant:"secondary",onClick:()=>s("/complaints"),className:"mt-4",children:"Back to Complaints"})]})})]})}function jn(){const t=Pe(),[s,r]=E.useState(!1),[n,a]=E.useState(null),[c,d]=E.useState([]),[h,o]=E.useState([]),[l,i]=E.useState([]);E.useEffect(()=>{Promise.all([B.get("/reference/products"),B.get("/reference/insurers"),B.get("/reference/brokers")]).then(([m,g,p])=>{d(m.data.map(M=>M.name)),o(g.data.map(M=>M.name)),i(p.data.map(M=>M.name))}).catch(m=>{console.error("Failed to load reference data",m)})},[]);const[u,f]=E.useState({source:"Email",received_at:ee().format("YYYY-MM-DDTHH:mm"),description:"",category:"",reason:"",vulnerability_flag:!1,vulnerability_notes:"",policy_number:"",insurer:"",broker:"",product:"",scheme:"",complainant_name:"",complainant_email:"",complainant_phone:"",complainant_address:"",complainant_dob:""}),b=m=>W(this,null,function*(){var g,p;m.preventDefault(),a(null),r(!0);try{const M=yield B.post("/complaints",{source:u.source,received_at:ee(u.received_at).toISOString(),description:u.description,category:u.category,reason:u.reason||null,fca_complaint:!0,fca_rationale:null,vulnerability_flag:u.vulnerability_flag,vulnerability_notes:u.vulnerability_notes||null,policy_number:u.policy_number||null,insurer:u.insurer||null,broker:u.broker||null,product:u.product||null,scheme:u.scheme||null,complainant:{full_name:u.complainant_name,email:u.complainant_email||null,phone:u.complainant_phone||null,address:u.complainant_address||null,date_of_birth:u.complainant_dob||null},policy:{policy_number:u.policy_number||null,insurer:u.insurer||null,broker:u.broker||null,product:u.product||null,scheme:u.scheme||null}});t(`/complaints/${M.data.id}`)}catch(M){a(((p=(g=M==null?void 0:M.response)==null?void 0:g.data)==null?void 0:p.detail)||"Failed to create complaint"),r(!1)}});return e.jsxs(e.Fragment,{children:[e.jsx(de,{title:"Create New Complaint"}),e.jsxs("div",{className:"px-10 py-6 max-w-4xl",children:[n&&e.jsx("div",{className:"mb-6 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:n}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"Receipt Information"})}),e.jsx(X,{children:e.jsx("div",{className:"space-y-4 mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Source *"}),e.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:u.source,onChange:m=>f(I(F({},u),{source:m.target.value})),required:!0,children:[e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"Letter",children:"Letter"}),e.jsx("option",{value:"Web Form",children:"Web Form"}),e.jsx("option",{value:"In Person",children:"In Person"}),e.jsx("option",{value:"Social Media",children:"Social Media"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Date Received *"}),e.jsx(H,{type:"datetime-local",value:u.received_at,onChange:m=>f(I(F({},u),{received_at:m.target.value})),required:!0})]})]})})})]}),e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"Complainant Details"})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Full Name *"}),e.jsx(H,{value:u.complainant_name,onChange:m=>f(I(F({},u),{complainant_name:m.target.value})),placeholder:"John Doe",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Email"}),e.jsx(H,{type:"email",value:u.complainant_email,onChange:m=>f(I(F({},u),{complainant_email:m.target.value})),placeholder:"john@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Phone"}),e.jsx(H,{value:u.complainant_phone,onChange:m=>f(I(F({},u),{complainant_phone:m.target.value})),placeholder:"+44 20 1234 5678"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Date of Birth"}),e.jsx(H,{type:"date",value:u.complainant_dob,onChange:m=>f(I(F({},u),{complainant_dob:m.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Address"}),e.jsx(H,{value:u.complainant_address,onChange:m=>f(I(F({},u),{complainant_address:m.target.value})),placeholder:"Full address..."})]})]}),e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u.vulnerability_flag,onChange:()=>f(I(F({},u),{vulnerability_flag:!u.vulnerability_flag})),className:"h-4 w-4 rounded border-border text-brand focus:ring-2 focus:ring-brand/15"}),e.jsx("span",{className:"text-sm font-medium text-text-primary",children:"Vulnerable Customer"})]}),u.vulnerability_flag&&e.jsxs("div",{className:"pl-7 space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Vulnerability Notes"}),e.jsx("textarea",{className:"w-full min-h-[80px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:u.vulnerability_notes,onChange:m=>f(I(F({},u),{vulnerability_notes:m.target.value})),placeholder:"Details about vulnerability..."})]})]})})]})})]}),e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"Complaint Details"})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Description *"}),e.jsx("textarea",{className:"w-full min-h-[120px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:u.description,onChange:m=>f(I(F({},u),{description:m.target.value})),placeholder:"Detailed description of the complaint...",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Category *"}),e.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:u.category,onChange:m=>f(I(F({},u),{category:m.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select category..."}),e.jsx("option",{value:"Claims",children:"Claims"}),e.jsx("option",{value:"Policy",children:"Policy"}),e.jsx("option",{value:"Service",children:"Service"}),e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Communication",children:"Communication"}),e.jsx("option",{value:"Sales",children:"Sales"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Reason"}),e.jsx(H,{value:u.reason,onChange:m=>f(I(F({},u),{reason:m.target.value})),placeholder:"Specific reason..."})]})]})]})})]}),e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"Policy Information"})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Policy Number"}),e.jsx(H,{value:u.policy_number,onChange:m=>f(I(F({},u),{policy_number:m.target.value})),placeholder:"POL-12345"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Product"}),e.jsx(ct,{value:u.product,onChange:m=>f(I(F({},u),{product:m})),options:c,placeholder:"Select or type product..."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Insurer"}),e.jsx(ct,{value:u.insurer,onChange:m=>f(I(F({},u),{insurer:m})),options:h,placeholder:"Select or type insurer..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Broker"}),e.jsx(ct,{value:u.broker,onChange:m=>f(I(F({},u),{broker:m})),options:l,placeholder:"Select or type broker..."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Scheme"}),e.jsx(H,{value:u.scheme,onChange:m=>f(I(F({},u),{scheme:m.target.value})),placeholder:"Scheme name..."})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 sticky bottom-6 bg-app/95 backdrop-blur-sm p-4 rounded-lg border border-border",children:[e.jsx(V,{variant:"secondary",onClick:()=>t("/complaints"),type:"button",children:"Cancel"}),e.jsx(V,{variant:"primary",type:"submit",disabled:s,children:s?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Complaint"})]})]})]})]})}function wn(){return e.jsxs(e.Fragment,{children:[e.jsx(de,{title:"User Management"}),e.jsx("div",{className:"px-10 py-6",children:e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"Users"})}),e.jsx(X,{children:e.jsx("p",{className:"text-sm text-text-secondary mt-4",children:"User management interface - to be implemented"})})]})})]})}function vn(){const{user:t}=Ie(),s=(t==null?void 0:t.role)==="admin",[r,n]=E.useState("products"),[a,c]=E.useState([]),[d,h]=E.useState(!0),[o,l]=E.useState(""),[i,u]=E.useState(!1),[f,b]=E.useState(""),[m,g]=E.useState(!1),[p,M]=E.useState(null),[k,C]=E.useState(!1),[w,P]=E.useState(null),[T,U]=E.useState(!1),[ie,se]=E.useState(null),[$,L]=E.useState(null);E.useEffect(()=>{K()},[r]);const K=()=>W(this,null,function*(){h(!0);try{const j=yield B.get(`/reference/${r}`);c(j.data||[])}catch(j){console.error("Failed to load reference items",j)}finally{h(!1)}}),J=()=>W(this,null,function*(){var j,v;if(f.trim()){g(!0),M(null);try{yield B.post(`/reference/${r}`,{name:f.trim()}),b(""),u(!1),K()}catch(N){M(((v=(j=N==null?void 0:N.response)==null?void 0:j.data)==null?void 0:v.detail)||"Failed to create item")}finally{g(!1)}}}),R=()=>W(this,null,function*(){var j,v;if(w){U(!0),se(null),L(null);try{const N=new FormData;N.append("file",w);const A=yield B.post(`/reference/${r}/import`,N,{headers:{"Content-Type":"multipart/form-data"}});L(`Successfully imported ${A.data.added} items`),P(null),K(),setTimeout(()=>C(!1),2e3)}catch(N){se(((v=(j=N==null?void 0:N.response)==null?void 0:j.data)==null?void 0:v.detail)||"Failed to import file")}finally{U(!1)}}}),S=a.filter(j=>j.name.toLowerCase().includes(o.toLowerCase())),y=j=>{switch(j){case"products":return"Products";case"brokers":return"Brokers";case"insurers":return"Insurers"}};return e.jsxs(e.Fragment,{children:[e.jsx(de,{title:"Reference Data Management"}),e.jsx("div",{className:"px-10 py-6",children:e.jsxs(Q,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(Z,{children:"Reference Lists"}),s&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(V,{variant:"secondary",size:"sm",onClick:()=>C(!0),children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Import CSV"]}),e.jsxs(V,{variant:"primary",size:"sm",onClick:()=>u(!0),children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Add New"]})]})]})}),e.jsx("div",{className:"border-b border-border",children:e.jsx("div",{className:"flex gap-1 px-4",children:["products","brokers","insurers"].map(j=>e.jsxs("button",{onClick:()=>n(j),className:`px-4 py-3 text-sm font-medium capitalize transition border-b-2 ${r===j?"border-brand text-text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[y(j),e.jsx("span",{className:"ml-2 inline-flex items-center justify-center h-5 min-w-5 px-1 rounded-full bg-app text-[11px] font-semibold text-text-secondary border border-border",children:j===r?S.length:a.length})]},j))})}),e.jsxs(X,{children:[e.jsx("div",{className:"mt-4 mb-6",children:e.jsx(H,{type:"search",placeholder:`Search ${y(r).toLowerCase()}...`,value:o,onChange:j=>l(j.target.value),leadingIcon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),d?e.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading..."}):S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"mt-4 text-sm font-semibold text-text-primary",children:o?"No items match your search":`No ${y(r).toLowerCase()} yet`}),!o&&s&&e.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:'Click "Add New" to create your first entry'})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:S.map(j=>e.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border bg-surface hover:bg-app transition",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary truncate",children:j.name}),e.jsxs("div",{className:"text-xs text-text-muted",children:["ID: ",j.id.substring(0,8),"..."]})]})},j.id))})]})]})}),e.jsxs(Ve,{open:i,onClose:()=>u(!1),children:[e.jsxs(Je,{onClose:()=>u(!1),children:["Add New ",y(r).slice(0,-1)]}),e.jsxs(Qe,{children:[p&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:p}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Name *"}),e.jsx(H,{value:f,onChange:j=>b(j.target.value),placeholder:`Enter ${y(r).slice(0,-1).toLowerCase()} name...`,autoFocus:!0,onKeyDown:j=>{j.key==="Enter"&&f.trim()&&J()}})]})]}),e.jsxs(Ke,{children:[e.jsx(V,{variant:"secondary",onClick:()=>u(!1),children:"Cancel"}),e.jsx(V,{variant:"primary",onClick:J,disabled:!f.trim()||m,children:m?"Creating...":"Create"})]})]}),e.jsxs(Ve,{open:k,onClose:()=>C(!1),children:[e.jsxs(Je,{onClose:()=>C(!1),children:["Import ",y(r)," from CSV"]}),e.jsxs(Qe,{children:[ie&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:ie}),$&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-success/30 bg-semantic-success/5 p-3 text-sm text-semantic-success",children:$}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary mb-3",children:'Upload a CSV file with a "name" column. Duplicate names will be skipped.'}),e.jsxs("div",{className:"rounded-lg border-2 border-dashed border-border p-6 text-center",children:[e.jsx("input",{type:"file",accept:".csv",onChange:j=>{var v;return P(((v=j.target.files)==null?void 0:v[0])||null)},className:"hidden",id:"csv-upload"}),e.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("p",{className:"mt-2 text-sm font-medium text-text-primary",children:"Click to select CSV file"}),e.jsx("p",{className:"mt-1 text-xs text-text-muted",children:"or drag and drop"})]})]}),w&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-text-primary",children:[e.jsx("svg",{className:"h-5 w-5 text-semantic-success",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),w.name]})]}),e.jsxs("div",{className:"rounded-lg bg-app p-3 text-xs text-text-secondary",children:[e.jsx("p",{className:"font-semibold text-text-primary mb-1",children:"CSV Format Example:"}),e.jsxs("code",{className:"block bg-surface p-2 rounded border border-border font-mono",children:["name",e.jsx("br",{}),"Product A",e.jsx("br",{}),"Product B",e.jsx("br",{}),"Product C"]})]})]})]}),e.jsxs(Ke,{children:[e.jsx(V,{variant:"secondary",onClick:()=>C(!1),children:"Cancel"}),e.jsx(V,{variant:"primary",onClick:R,disabled:!w||T,children:T?"Importing...":"Import"})]})]})]})}function Ut(){var f;const{user:t}=Ie(),[s,r]=E.useState(""),[n,a]=E.useState(""),[c,d]=E.useState(""),[h,o]=E.useState(null),[l,i]=E.useState(!1),u=b=>W(this,null,function*(){var m,g;if(b.preventDefault(),o(null),n!==c){o({type:"error",text:"New passwords do not match"});return}if(n.length<8){o({type:"error",text:"Password must be at least 8 characters"});return}i(!0);try{yield B.post("/auth/change-password",{current_password:s,new_password:n}),o({type:"success",text:"Password changed successfully"}),r(""),a(""),d("")}catch(p){o({type:"error",text:((g=(m=p==null?void 0:p.response)==null?void 0:m.data)==null?void 0:g.detail)||"Failed to change password"})}finally{i(!1)}});return e.jsxs(e.Fragment,{children:[e.jsx(de,{title:"Profile & Settings"}),e.jsxs("div",{className:"px-10 py-6 max-w-2xl",children:[e.jsxs(Q,{className:"mb-6",children:[e.jsx(G,{children:e.jsx(Z,{children:"User Information"})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Name"}),e.jsx("div",{className:"text-sm text-text-primary",children:t==null?void 0:t.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Email"}),e.jsx("div",{className:"text-sm text-text-primary",children:t==null?void 0:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Role"}),e.jsx("div",{className:"text-sm text-text-primary capitalize",children:(f=t==null?void 0:t.role)==null?void 0:f.replace("_"," ")})]})]})})]}),e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(Z,{children:"Change Password"})}),e.jsxs(X,{children:[h&&e.jsx("div",{className:`mt-4 rounded-lg border p-3 text-sm ${h.type==="success"?"border-semantic-success/30 bg-semantic-success/5 text-semantic-success":"border-semantic-error/30 bg-semantic-error/5 text-semantic-error"}`,children:h.text}),e.jsxs("form",{onSubmit:u,className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Current Password"}),e.jsx(H,{type:"password",value:s,onChange:b=>r(b.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"New Password"}),e.jsx(H,{type:"password",value:n,onChange:b=>a(b.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Confirm New Password"}),e.jsx(H,{type:"password",value:c,onChange:b=>d(b.target.value),required:!0})]}),e.jsx(V,{type:"submit",variant:"primary",disabled:l,children:l?"Changing...":"Change Password"})]})]})]})]})]})}var Nn=Object.defineProperty,Xe=Object.getOwnPropertySymbols,bs=Object.prototype.hasOwnProperty,gs=Object.prototype.propertyIsEnumerable,zt=(t,s,r)=>s in t?Nn(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,Cn=(t,s)=>{for(var r in s||(s={}))bs.call(s,r)&&zt(t,r,s[r]);if(Xe)for(var r of Xe(s))gs.call(s,r)&&zt(t,r,s[r]);return t},Sn=(t,s)=>{var r={};for(var n in t)bs.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Xe)for(var n of Xe(t))s.indexOf(n)<0&&gs.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var je;(t=>{const s=class{constructor(o,l,i,u){if(this.version=o,this.errorCorrectionLevel=l,this.modules=[],this.isFunction=[],o<s.MIN_VERSION||o>s.MAX_VERSION)throw new RangeError("Version value out of range");if(u<-1||u>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let f=[];for(let m=0;m<this.size;m++)f.push(!1);for(let m=0;m<this.size;m++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const b=this.addEccAndInterleave(i);if(this.drawCodewords(b),u==-1){let m=1e9;for(let g=0;g<8;g++){this.applyMask(g),this.drawFormatBits(g);const p=this.getPenaltyScore();p<m&&(u=g,m=p),this.applyMask(g)}}c(0<=u&&u<=7),this.mask=u,this.applyMask(u),this.drawFormatBits(u),this.isFunction=[]}static encodeText(o,l){const i=t.QrSegment.makeSegments(o);return s.encodeSegments(i,l)}static encodeBinary(o,l){const i=t.QrSegment.makeBytes(o);return s.encodeSegments([i],l)}static encodeSegments(o,l,i=1,u=40,f=-1,b=!0){if(!(s.MIN_VERSION<=i&&i<=u&&u<=s.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let m,g;for(m=i;;m++){const C=s.getNumDataCodewords(m,l)*8,w=h.getTotalBits(o,m);if(w<=C){g=w;break}if(m>=u)throw new RangeError("Data too long")}for(const C of[s.Ecc.MEDIUM,s.Ecc.QUARTILE,s.Ecc.HIGH])b&&g<=s.getNumDataCodewords(m,C)*8&&(l=C);let p=[];for(const C of o){n(C.mode.modeBits,4,p),n(C.numChars,C.mode.numCharCountBits(m),p);for(const w of C.getData())p.push(w)}c(p.length==g);const M=s.getNumDataCodewords(m,l)*8;c(p.length<=M),n(0,Math.min(4,M-p.length),p),n(0,(8-p.length%8)%8,p),c(p.length%8==0);for(let C=236;p.length<M;C^=253)n(C,8,p);let k=[];for(;k.length*8<p.length;)k.push(0);return p.forEach((C,w)=>k[w>>>3]|=C<<7-(w&7)),new s(m,l,k,f)}getModule(o,l){return 0<=o&&o<this.size&&0<=l&&l<this.size&&this.modules[l][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let i=0;i<this.size;i++)this.setFunctionModule(6,i,i%2==0),this.setFunctionModule(i,6,i%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const o=this.getAlignmentPatternPositions(),l=o.length;for(let i=0;i<l;i++)for(let u=0;u<l;u++)i==0&&u==0||i==0&&u==l-1||i==l-1&&u==0||this.drawAlignmentPattern(o[i],o[u]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){const l=this.errorCorrectionLevel.formatBits<<3|o;let i=l;for(let f=0;f<10;f++)i=i<<1^(i>>>9)*1335;const u=(l<<10|i)^21522;c(u>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,a(u,f));this.setFunctionModule(8,7,a(u,6)),this.setFunctionModule(8,8,a(u,7)),this.setFunctionModule(7,8,a(u,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,a(u,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,a(u,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,a(u,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let i=0;i<12;i++)o=o<<1^(o>>>11)*7973;const l=this.version<<12|o;c(l>>>18==0);for(let i=0;i<18;i++){const u=a(l,i),f=this.size-11+i%3,b=Math.floor(i/3);this.setFunctionModule(f,b,u),this.setFunctionModule(b,f,u)}}drawFinderPattern(o,l){for(let i=-4;i<=4;i++)for(let u=-4;u<=4;u++){const f=Math.max(Math.abs(u),Math.abs(i)),b=o+u,m=l+i;0<=b&&b<this.size&&0<=m&&m<this.size&&this.setFunctionModule(b,m,f!=2&&f!=4)}}drawAlignmentPattern(o,l){for(let i=-2;i<=2;i++)for(let u=-2;u<=2;u++)this.setFunctionModule(o+u,l+i,Math.max(Math.abs(u),Math.abs(i))!=1)}setFunctionModule(o,l,i){this.modules[l][o]=i,this.isFunction[l][o]=!0}addEccAndInterleave(o){const l=this.version,i=this.errorCorrectionLevel;if(o.length!=s.getNumDataCodewords(l,i))throw new RangeError("Invalid argument");const u=s.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][l],f=s.ECC_CODEWORDS_PER_BLOCK[i.ordinal][l],b=Math.floor(s.getNumRawDataModules(l)/8),m=u-b%u,g=Math.floor(b/u);let p=[];const M=s.reedSolomonComputeDivisor(f);for(let C=0,w=0;C<u;C++){let P=o.slice(w,w+g-f+(C<m?0:1));w+=P.length;const T=s.reedSolomonComputeRemainder(P,M);C<m&&P.push(0),p.push(P.concat(T))}let k=[];for(let C=0;C<p[0].length;C++)p.forEach((w,P)=>{(C!=g-f||P>=m)&&k.push(w[C])});return c(k.length==b),k}drawCodewords(o){if(o.length!=Math.floor(s.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let l=0;for(let i=this.size-1;i>=1;i-=2){i==6&&(i=5);for(let u=0;u<this.size;u++)for(let f=0;f<2;f++){const b=i-f,g=(i+1&2)==0?this.size-1-u:u;!this.isFunction[g][b]&&l<o.length*8&&(this.modules[g][b]=a(o[l>>>3],7-(l&7)),l++)}}c(l==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let l=0;l<this.size;l++)for(let i=0;i<this.size;i++){let u;switch(o){case 0:u=(i+l)%2==0;break;case 1:u=l%2==0;break;case 2:u=i%3==0;break;case 3:u=(i+l)%3==0;break;case 4:u=(Math.floor(i/3)+Math.floor(l/2))%2==0;break;case 5:u=i*l%2+i*l%3==0;break;case 6:u=(i*l%2+i*l%3)%2==0;break;case 7:u=((i+l)%2+i*l%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[l][i]&&u&&(this.modules[l][i]=!this.modules[l][i])}}getPenaltyScore(){let o=0;for(let f=0;f<this.size;f++){let b=!1,m=0,g=[0,0,0,0,0,0,0];for(let p=0;p<this.size;p++)this.modules[f][p]==b?(m++,m==5?o+=s.PENALTY_N1:m>5&&o++):(this.finderPenaltyAddHistory(m,g),b||(o+=this.finderPenaltyCountPatterns(g)*s.PENALTY_N3),b=this.modules[f][p],m=1);o+=this.finderPenaltyTerminateAndCount(b,m,g)*s.PENALTY_N3}for(let f=0;f<this.size;f++){let b=!1,m=0,g=[0,0,0,0,0,0,0];for(let p=0;p<this.size;p++)this.modules[p][f]==b?(m++,m==5?o+=s.PENALTY_N1:m>5&&o++):(this.finderPenaltyAddHistory(m,g),b||(o+=this.finderPenaltyCountPatterns(g)*s.PENALTY_N3),b=this.modules[p][f],m=1);o+=this.finderPenaltyTerminateAndCount(b,m,g)*s.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let b=0;b<this.size-1;b++){const m=this.modules[f][b];m==this.modules[f][b+1]&&m==this.modules[f+1][b]&&m==this.modules[f+1][b+1]&&(o+=s.PENALTY_N2)}let l=0;for(const f of this.modules)l=f.reduce((b,m)=>b+(m?1:0),l);const i=this.size*this.size,u=Math.ceil(Math.abs(l*20-i*10)/i)-1;return c(0<=u&&u<=9),o+=u*s.PENALTY_N4,c(0<=o&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{const o=Math.floor(this.version/7)+2,l=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2;let i=[6];for(let u=this.size-7;i.length<o;u-=l)i.splice(1,0,u);return i}}static getNumRawDataModules(o){if(o<s.MIN_VERSION||o>s.MAX_VERSION)throw new RangeError("Version number out of range");let l=(16*o+128)*o+64;if(o>=2){const i=Math.floor(o/7)+2;l-=(25*i-10)*i-55,o>=7&&(l-=36)}return c(208<=l&&l<=29648),l}static getNumDataCodewords(o,l){return Math.floor(s.getNumRawDataModules(o)/8)-s.ECC_CODEWORDS_PER_BLOCK[l.ordinal][o]*s.NUM_ERROR_CORRECTION_BLOCKS[l.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let l=[];for(let u=0;u<o-1;u++)l.push(0);l.push(1);let i=1;for(let u=0;u<o;u++){for(let f=0;f<l.length;f++)l[f]=s.reedSolomonMultiply(l[f],i),f+1<l.length&&(l[f]^=l[f+1]);i=s.reedSolomonMultiply(i,2)}return l}static reedSolomonComputeRemainder(o,l){let i=l.map(u=>0);for(const u of o){const f=u^i.shift();i.push(0),l.forEach((b,m)=>i[m]^=s.reedSolomonMultiply(b,f))}return i}static reedSolomonMultiply(o,l){if(o>>>8||l>>>8)throw new RangeError("Byte out of range");let i=0;for(let u=7;u>=0;u--)i=i<<1^(i>>>7)*285,i^=(l>>>u&1)*o;return c(i>>>8==0),i}finderPenaltyCountPatterns(o){const l=o[1];c(l<=this.size*3);const i=l>0&&o[2]==l&&o[3]==l*3&&o[4]==l&&o[5]==l;return(i&&o[0]>=l*4&&o[6]>=l?1:0)+(i&&o[6]>=l*4&&o[0]>=l?1:0)}finderPenaltyTerminateAndCount(o,l,i){return o&&(this.finderPenaltyAddHistory(l,i),l=0),l+=this.size,this.finderPenaltyAddHistory(l,i),this.finderPenaltyCountPatterns(i)}finderPenaltyAddHistory(o,l){l[0]==0&&(o+=this.size),l.pop(),l.unshift(o)}};let r=s;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function n(o,l,i){if(l<0||l>31||o>>>l)throw new RangeError("Value out of range");for(let u=l-1;u>=0;u--)i.push(o>>>u&1)}function a(o,l){return(o>>>l&1)!=0}function c(o){if(!o)throw new Error("Assertion error")}const d=class{constructor(o,l,i){if(this.mode=o,this.numChars=l,this.bitData=i,l<0)throw new RangeError("Invalid argument");this.bitData=i.slice()}static makeBytes(o){let l=[];for(const i of o)n(i,8,l);return new d(d.Mode.BYTE,o.length,l)}static makeNumeric(o){if(!d.isNumeric(o))throw new RangeError("String contains non-numeric characters");let l=[];for(let i=0;i<o.length;){const u=Math.min(o.length-i,3);n(parseInt(o.substr(i,u),10),u*3+1,l),i+=u}return new d(d.Mode.NUMERIC,o.length,l)}static makeAlphanumeric(o){if(!d.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let l=[],i;for(i=0;i+2<=o.length;i+=2){let u=d.ALPHANUMERIC_CHARSET.indexOf(o.charAt(i))*45;u+=d.ALPHANUMERIC_CHARSET.indexOf(o.charAt(i+1)),n(u,11,l)}return i<o.length&&n(d.ALPHANUMERIC_CHARSET.indexOf(o.charAt(i)),6,l),new d(d.Mode.ALPHANUMERIC,o.length,l)}static makeSegments(o){return o==""?[]:d.isNumeric(o)?[d.makeNumeric(o)]:d.isAlphanumeric(o)?[d.makeAlphanumeric(o)]:[d.makeBytes(d.toUtf8ByteArray(o))]}static makeEci(o){let l=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)n(o,8,l);else if(o<16384)n(2,2,l),n(o,14,l);else if(o<1e6)n(6,3,l),n(o,21,l);else throw new RangeError("ECI assignment value out of range");return new d(d.Mode.ECI,0,l)}static isNumeric(o){return d.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return d.ALPHANUMERIC_REGEX.test(o)}getData(){return this.bitData.slice()}static getTotalBits(o,l){let i=0;for(const u of o){const f=u.mode.numCharCountBits(l);if(u.numChars>=1<<f)return 1/0;i+=4+f+u.bitData.length}return i}static toUtf8ByteArray(o){o=encodeURI(o);let l=[];for(let i=0;i<o.length;i++)o.charAt(i)!="%"?l.push(o.charCodeAt(i)):(l.push(parseInt(o.substr(i+1,2),16)),i+=2);return l}};let h=d;h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=h})(je||(je={}));(t=>{(s=>{const r=class{constructor(a,c){this.ordinal=a,this.formatBits=c}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),s.Ecc=n})(t.QrCode||(t.QrCode={}))})(je||(je={}));(t=>{(s=>{const r=class{constructor(a,c){this.modeBits=a,this.numBitsCharCount=c}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),s.Mode=n})(t.QrSegment||(t.QrSegment={}))})(je||(je={}));var Le=je;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var En={L:Le.QrCode.Ecc.LOW,M:Le.QrCode.Ecc.MEDIUM,Q:Le.QrCode.Ecc.QUARTILE,H:Le.QrCode.Ecc.HIGH},kn=128,_n="L",Rn="#FFFFFF",An="#000000",Mn=!1,ys=4,On=.1;function Ln(t,s=0){const r=[];return t.forEach(function(n,a){let c=null;n.forEach(function(d,h){if(!d&&c!==null){r.push(`M${c+s} ${a+s}h${h-c}v1H${c+s}z`),c=null;return}if(h===n.length-1){if(!d)return;c===null?r.push(`M${h+s},${a+s} h1v1H${h+s}z`):r.push(`M${c+s},${a+s} h${h+1-c}v1H${c+s}z`);return}d&&c===null&&(c=h)})}),r.join("")}function Pn(t,s){return t.slice().map((r,n)=>n<s.y||n>=s.y+s.h?r:r.map((a,c)=>c<s.x||c>=s.x+s.w?a:!1))}function Tn(t,s,r,n){if(n==null)return null;const a=r?ys:0,c=t.length+a*2,d=Math.floor(s*On),h=c/s,o=(n.width||d)*h,l=(n.height||d)*h,i=n.x==null?t.length/2-o/2:n.x*h,u=n.y==null?t.length/2-l/2:n.y*h;let f=null;if(n.excavate){let b=Math.floor(i),m=Math.floor(u),g=Math.ceil(o+i-b),p=Math.ceil(l+u-m);f={x:b,y:m,w:g,h:p}}return{x:i,y:u,h:l,w:o,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch(t){return!1}return!0})();function Dn(t){const s=t,{value:r,size:n=kn,level:a=_n,bgColor:c=Rn,fgColor:d=An,includeMargin:h=Mn,imageSettings:o}=s,l=Sn(s,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let i=Le.QrCode.encodeText(r,En[a]).getModules();const u=h?ys:0,f=i.length+u*2,b=Tn(i,n,h,o);let m=null;o!=null&&b!=null&&(b.excavation!=null&&(i=Pn(i,b.excavation)),m=Oe.createElement("image",{xlinkHref:o.src,height:b.h,width:b.w,x:b.x+u,y:b.y+u,preserveAspectRatio:"none"}));const g=Ln(i,u);return Oe.createElement("svg",Cn({height:n,width:n,viewBox:`0 0 ${f} ${f}`},l),Oe.createElement("path",{fill:c,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Oe.createElement("path",{fill:d,d:g,shapeRendering:"crispEdges"}),m)}function Fn(){const{token:t,role:s,name:r,login:n,logout:a,mustChangePassword:c,ready:d}=Ie(),[h,o]=E.useState(""),[l,i]=E.useState(""),[u,f]=E.useState(!1),[b,m]=E.useState(""),[g,p]=E.useState(""),[M,k]=E.useState(null),[C,w]=E.useState(!1),[P,T]=E.useState(!1),[U,ie]=E.useState(null),[se,$]=E.useState(null),[L,K]=E.useState(0),J=Pe(),R=Ht();E.useEffect(()=>{d&&(t||R.pathname!=="/"&&J("/",{replace:!0}))},[d,t,R.pathname,J]),E.useEffect(()=>{t&&c&&R.pathname!=="/profile"&&J("/profile",{replace:!0,state:{forced:!0}})},[t,c,R.pathname,J]);const S=()=>W(this,null,function*(){var N,A;k(null);try{const _=yield n(h,l,C?b:void 0,C?g:void 0);w(!1),m(""),p(""),_!=null&&_.mfa_enrollment_required?(K(_.mfa_remaining_skips||0),yield y()):J("/")}catch(_){const D=(A=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:A.detail;D==="MFA code required"||(D==null?void 0:D.code)==="mfa_required"?(w(!0),k("Enter your 6-digit MFA code or a recovery code.")):k(D==="Invalid recovery code"||D==="Invalid MFA code"||D==="Invalid code"?"Invalid code. Please try again.":"Login failed. Check your credentials.")}}),y=()=>W(this,null,function*(){var N,A;try{const _=yield B.post("/auth/mfa/enroll");ie(_.data),$(null),T(!0)}catch(_){k(((A=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:A.detail)||"Could not start MFA enrollment")}}),j=()=>W(this,null,function*(){var N,A;try{const _=yield B.post("/auth/mfa/verify",{code:b});$(_.data.recovery_codes),T(!1),m(""),K(0),J("/")}catch(_){k(((A=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:A.detail)||"Invalid code")}}),v=()=>W(this,null,function*(){var N,A;try{const _=yield B.post("/auth/mfa/skip");K(_.data.remaining_skips),T(!1),ie(null)}catch(_){k(((A=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:A.detail)||"Cannot skip MFA")}});return t?e.jsx(hn,{children:e.jsxs(As,{children:[e.jsx(me,{path:"/",element:e.jsx(bn,{})}),e.jsx(me,{path:"/complaints",element:e.jsx(gn,{})}),e.jsx(me,{path:"/create",element:e.jsx(jn,{})}),e.jsx(me,{path:"/complaints/:id",element:e.jsx(yn,{})}),e.jsx(me,{path:"/profile",element:e.jsx(Ut,{})}),e.jsx(me,{path:"/users",element:e.jsx(wn,{})}),e.jsx(me,{path:"/reference",element:e.jsx(vn,{})}),e.jsx(me,{path:"/settings",element:e.jsx(Ut,{})})]})}):e.jsxs("div",{className:"min-h-screen bg-app flex items-center justify-center p-4",children:[e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"rounded-card border border-border bg-surface shadow-card p-8",children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-text-primary mb-2",children:"Sign in to Compass"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Use your credentials to access the complaints workspace"})]}),M&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:M}),e.jsxs("form",{onSubmit:N=>{N.preventDefault(),S()},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Email"}),e.jsx(H,{type:"email",value:h,onChange:N=>o(N.target.value),placeholder:"you@example.com",autoComplete:"email",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{type:u?"text":"password",value:l,onChange:N=>i(N.target.value),placeholder:"",autoComplete:"current-password",required:!0}),e.jsx("button",{type:"button",onClick:()=>f(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition",children:u?e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),C&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"MFA Code (6 digits)"}),e.jsx(H,{type:"text",value:b,onChange:N=>m(N.target.value),placeholder:"123456",maxLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Recovery Code (optional)"}),e.jsx(H,{type:"text",value:g,onChange:N=>p(N.target.value),placeholder:"recovery-code"})]})]}),e.jsx(V,{type:"submit",variant:"primary",className:"w-full mt-6",children:"Sign in"})]})]})}),e.jsxs(Ve,{open:P,onClose:L>0?()=>T(!1):()=>{},children:[e.jsx(Je,{onClose:L>0?()=>T(!1):void 0,children:"Set up Multi-Factor Authentication"}),e.jsx(Qe,{children:e.jsxs("div",{className:"space-y-4",children:[L<=0?e.jsx("div",{className:"rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:"You must enable MFA to continue."}):e.jsxs("p",{className:"text-sm text-text-secondary",children:["We recommend enabling MFA for enhanced security. You can skip up to ",L," more time(s)."]}),U?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-text-primary mb-2",children:"Scan with your authenticator app"}),e.jsx("div",{className:"flex justify-center p-4 bg-app rounded-lg",children:e.jsx(Dn,{value:U.otpauth_url,size:180})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-text-primary mb-1",children:"Manual entry secret"}),e.jsx("code",{className:"block text-xs bg-app p-2 rounded border border-border font-mono",children:U.secret})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Enter 6-digit code"}),e.jsx(H,{type:"text",value:b,onChange:N=>m(N.target.value),placeholder:"123456",maxLength:6})]}),se&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-text-primary mb-2",children:"Recovery codes (store securely)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:se.map(N=>e.jsx("code",{className:"text-xs bg-app p-2 rounded border border-border font-mono",children:N},N))})]})]}):e.jsx("p",{className:"text-sm text-text-muted",children:"Preparing enrollment..."})]})}),e.jsxs(Ke,{children:[e.jsx(V,{variant:"secondary",onClick:v,disabled:L<=0,children:"Skip for now"}),e.jsx(V,{variant:"primary",onClick:j,disabled:!b||b.length<6,children:"Verify & Enable"})]})]})]})}dt.createRoot(document.getElementById("root")).render(e.jsx(Oe.StrictMode,{children:e.jsx(Ms,{children:e.jsx(un,{children:e.jsx(Fn,{})})})}))});export default $n();
