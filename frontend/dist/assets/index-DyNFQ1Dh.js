var js=Object.defineProperty,ws=Object.defineProperties;var vs=Object.getOwnPropertyDescriptors;var Ue=Object.getOwnPropertySymbols;var jt=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable;var ve=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),Ns=e=>{throw TypeError(e)};var yt=(e,t,r)=>t in e?js(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,D=(e,t)=>{for(var r in t||(t={}))jt.call(t,r)&&yt(e,r,t[r]);if(Ue)for(var r of Ue(t))wt.call(t,r)&&yt(e,r,t[r]);return e},z=(e,t)=>ws(e,vs(t));var Ze=(e,t)=>{var r={};for(var n in e)jt.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Ue)for(var n of Ue(e))t.indexOf(n)<0&&wt.call(e,n)&&(r[n]=e[n]);return r};var Cs=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var W=(e,t,r)=>new Promise((n,a)=>{var l=o=>{try{m(r.next(o))}catch(i){a(i)}},c=o=>{try{m(r.throw(o))}catch(i){a(i)}},m=o=>o.done?n(o.value):Promise.resolve(o.value).then(l,c);m((r=r.apply(e,t)).next())}),xe=function(e,t){this[0]=e,this[1]=t},et=(e,t,r)=>{var n=(c,m,o,i)=>{try{var u=r[c](m),d=(m=u.value)instanceof xe,h=u.done;Promise.resolve(d?m[0]:m).then(g=>d?n(c==="return"?c:"next",m[1]?{done:g.done,value:g.value}:g,o,i):o({value:g,done:h})).catch(g=>n("throw",g,o,i))}catch(g){i(g)}},a=c=>l[c]=m=>new Promise((o,i)=>n(c,m,o,i)),l={};return r=r.apply(e,t),l[ve("asyncIterator")]=()=>l,a("next"),a("throw"),a("return"),l},tt=e=>{var t=e[ve("asyncIterator")],r=!1,n,a={};return t==null?(t=e[ve("iterator")](),n=l=>a[l]=c=>t[l](c)):(t=t.call(e),n=l=>a[l]=c=>{if(r){if(r=!1,l==="throw")throw c;return c}return r=!0,{done:!1,value:new xe(new Promise(m=>{var o=t[l](c);o instanceof Object||Ns("Object expected"),m(o)}),1)}}),a[ve("iterator")]=()=>a,n("next"),"throw"in t?n("throw"):a.throw=l=>{throw l},"return"in t&&n("return"),a},vt=(e,t,r)=>(t=e[ve("asyncIterator")])?t.call(e):(e=e[ve("iterator")](),t={},r=(n,a)=>(a=e[n])&&(t[n]=l=>new Promise((c,m,o)=>(l=a.call(e,l),o=l.done,Promise.resolve(l.value).then(i=>c({value:i,done:o}),m)))),r("next"),r("return"),t);import{j as s}from"./mui-BpRHmZTB.js";import{a as Ss,c as Es,g as ks,r as E,u as Ht,L as _s,b as Pe,d as Rs,R as Oe,e as As,f as me,B as Ms}from"./vendor-BaIKwp6E.js";var Fn=Cs(he=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var ot={},Nt=Ss;ot.createRoot=Nt.createRoot,ot.hydrateRoot=Nt.hydrateRoot;var qt={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Es,function(){var r=1e3,n=6e4,a=36e5,l="millisecond",c="second",m="minute",o="hour",i="day",u="week",d="month",h="quarter",g="year",f="date",x="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,N={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(_){var C=["th","st","nd","rd"],y=_%100;return"["+_+(C[(y-20)%10]||C[y]||C[0])+"]"}},S=function(_,C,y){var j=String(_);return!j||j.length>=C?_:""+Array(C+1-j.length).join(y)+_},A={s:S,z:function(_){var C=-_.utcOffset(),y=Math.abs(C),j=Math.floor(y/60),w=y%60;return(C<=0?"+":"-")+S(j,2,"0")+":"+S(w,2,"0")},m:function _(C,y){if(C.date()<y.date())return-_(y,C);var j=12*(y.year()-C.year())+(y.month()-C.month()),w=C.clone().add(j,d),v=y-w<0,R=C.clone().add(j+(v?-1:1),d);return+(-(j+(y-w)/(v?w-R:R-w))||0)},a:function(_){return _<0?Math.ceil(_)||0:Math.floor(_)},p:function(_){return{M:d,y:g,w:u,d:i,D:f,h:o,m,s:c,ms:l,Q:h}[_]||String(_||"").toLowerCase().replace(/s$/,"")},u:function(_){return _===void 0}},T="en",F={};F[T]=N;var B="$isDayjsObject",oe=function(_){return _ instanceof J||!(!_||!_[B])},ee=function _(C,y,j){var w;if(!C)return T;if(typeof C=="string"){var v=C.toLowerCase();F[v]&&(w=v),y&&(F[v]=y,w=v);var R=C.split("-");if(!w&&R.length>1)return _(R[0])}else{var k=C.name;F[k]=C,w=k}return!j&&w&&(T=w),w||!j&&T},$=function(_,C){if(oe(_))return _.clone();var y=typeof C=="object"?C:{};return y.date=_,y.args=arguments,new J(y)},L=A;L.l=ee,L.i=oe,L.w=function(_,C){return $(_,{locale:C.$L,utc:C.$u,x:C.$x,$offset:C.$offset})};var J=function(){function _(y){this.$L=ee(y.locale,null,!0),this.parse(y),this.$x=this.$x||y.x||{},this[B]=!0}var C=_.prototype;return C.parse=function(y){this.$d=function(j){var w=j.date,v=j.utc;if(w===null)return new Date(NaN);if(L.u(w))return new Date;if(w instanceof Date)return new Date(w);if(typeof w=="string"&&!/Z$/i.test(w)){var R=w.match(b);if(R){var k=R[2]-1||0,P=(R[7]||"0").substring(0,3);return v?new Date(Date.UTC(R[1],k,R[3]||1,R[4]||0,R[5]||0,R[6]||0,P)):new Date(R[1],k,R[3]||1,R[4]||0,R[5]||0,R[6]||0,P)}}return new Date(w)}(y),this.init()},C.init=function(){var y=this.$d;this.$y=y.getFullYear(),this.$M=y.getMonth(),this.$D=y.getDate(),this.$W=y.getDay(),this.$H=y.getHours(),this.$m=y.getMinutes(),this.$s=y.getSeconds(),this.$ms=y.getMilliseconds()},C.$utils=function(){return L},C.isValid=function(){return this.$d.toString()!==x},C.isSame=function(y,j){var w=$(y);return this.startOf(j)<=w&&w<=this.endOf(j)},C.isAfter=function(y,j){return $(y)<this.startOf(j)},C.isBefore=function(y,j){return this.endOf(j)<$(y)},C.$g=function(y,j,w){return L.u(y)?this[j]:this.set(w,y)},C.unix=function(){return Math.floor(this.valueOf()/1e3)},C.valueOf=function(){return this.$d.getTime()},C.startOf=function(y,j){var w=this,v=!!L.u(j)||j,R=L.p(y),k=function(pe,re){var ue=L.w(w.$u?Date.UTC(w.$y,re,pe):new Date(w.$y,re,pe),w);return v?ue:ue.endOf(i)},P=function(pe,re){return L.w(w.toDate()[pe].apply(w.toDate("s"),(v?[0,0,0,0]:[23,59,59,999]).slice(re)),w)},U=this.$W,H=this.$M,te=this.$D,we="set"+(this.$u?"UTC":"");switch(R){case g:return v?k(1,0):k(31,11);case d:return v?k(1,H):k(0,H+1);case u:var fe=this.$locale().weekStart||0,ke=(U<fe?U+7:U)-fe;return k(v?te-ke:te+(6-ke),H);case i:case f:return P(we+"Hours",0);case o:return P(we+"Minutes",1);case m:return P(we+"Seconds",2);case c:return P(we+"Milliseconds",3);default:return this.clone()}},C.endOf=function(y){return this.startOf(y,!1)},C.$set=function(y,j){var w,v=L.p(y),R="set"+(this.$u?"UTC":""),k=(w={},w[i]=R+"Date",w[f]=R+"Date",w[d]=R+"Month",w[g]=R+"FullYear",w[o]=R+"Hours",w[m]=R+"Minutes",w[c]=R+"Seconds",w[l]=R+"Milliseconds",w)[v],P=v===i?this.$D+(j-this.$W):j;if(v===d||v===g){var U=this.clone().set(f,1);U.$d[k](P),U.init(),this.$d=U.set(f,Math.min(this.$D,U.daysInMonth())).$d}else k&&this.$d[k](P);return this.init(),this},C.set=function(y,j){return this.clone().$set(y,j)},C.get=function(y){return this[L.p(y)]()},C.add=function(y,j){var w,v=this;y=Number(y);var R=L.p(j),k=function(H){var te=$(v);return L.w(te.date(te.date()+Math.round(H*y)),v)};if(R===d)return this.set(d,this.$M+y);if(R===g)return this.set(g,this.$y+y);if(R===i)return k(1);if(R===u)return k(7);var P=(w={},w[m]=n,w[o]=a,w[c]=r,w)[R]||1,U=this.$d.getTime()+y*P;return L.w(U,this)},C.subtract=function(y,j){return this.add(-1*y,j)},C.format=function(y){var j=this,w=this.$locale();if(!this.isValid())return w.invalidDate||x;var v=y||"YYYY-MM-DDTHH:mm:ssZ",R=L.z(this),k=this.$H,P=this.$m,U=this.$M,H=w.weekdays,te=w.months,we=w.meridiem,fe=function(re,ue,_e,Be){return re&&(re[ue]||re(j,v))||_e[ue].slice(0,Be)},ke=function(re){return L.s(k%12||12,re,"0")},pe=we||function(re,ue,_e){var Be=re<12?"AM":"PM";return _e?Be.toLowerCase():Be};return v.replace(M,function(re,ue){return ue||function(_e){switch(_e){case"YY":return String(j.$y).slice(-2);case"YYYY":return L.s(j.$y,4,"0");case"M":return U+1;case"MM":return L.s(U+1,2,"0");case"MMM":return fe(w.monthsShort,U,te,3);case"MMMM":return fe(te,U);case"D":return j.$D;case"DD":return L.s(j.$D,2,"0");case"d":return String(j.$W);case"dd":return fe(w.weekdaysMin,j.$W,H,2);case"ddd":return fe(w.weekdaysShort,j.$W,H,3);case"dddd":return H[j.$W];case"H":return String(k);case"HH":return L.s(k,2,"0");case"h":return ke(1);case"hh":return ke(2);case"a":return pe(k,P,!0);case"A":return pe(k,P,!1);case"m":return String(P);case"mm":return L.s(P,2,"0");case"s":return String(j.$s);case"ss":return L.s(j.$s,2,"0");case"SSS":return L.s(j.$ms,3,"0");case"Z":return R}return null}(re)||R.replace(":","")})},C.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},C.diff=function(y,j,w){var v,R=this,k=L.p(j),P=$(y),U=(P.utcOffset()-this.utcOffset())*n,H=this-P,te=function(){return L.m(R,P)};switch(k){case g:v=te()/12;break;case d:v=te();break;case h:v=te()/3;break;case u:v=(H-U)/6048e5;break;case i:v=(H-U)/864e5;break;case o:v=H/a;break;case m:v=H/n;break;case c:v=H/r;break;default:v=H}return w?v:L.a(v)},C.daysInMonth=function(){return this.endOf(d).$D},C.$locale=function(){return F[this.$L]},C.locale=function(y,j){if(!y)return this.$L;var w=this.clone(),v=ee(y,j,!0);return v&&(w.$L=v),w},C.clone=function(){return L.w(this.$d,this)},C.toDate=function(){return new Date(this.valueOf())},C.toJSON=function(){return this.isValid()?this.toISOString():null},C.toISOString=function(){return this.$d.toISOString()},C.toString=function(){return this.$d.toUTCString()},_}(),V=J.prototype;return $.prototype=V,[["$ms",l],["$s",c],["$m",m],["$H",o],["$W",i],["$M",d],["$y",g],["$D",f]].forEach(function(_){V[_[1]]=function(C){return this.$g(C,_[0],_[1])}}),$.extend=function(_,C){return _.$i||(_(C,J,$),_.$i=!0),$},$.locale=ee,$.isDayjs=oe,$.unix=function(_){return $(1e3*_)},$.en=F[T],$.Ls=F,$.p={},$})})(qt);var Os=qt.exports;const ce=ks(Os);function Wt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ls}=Object.prototype,{getPrototypeOf:pt}=Object,{iterator:Je,toStringTag:Yt}=Symbol,Qe=(e=>t=>{const r=Ls.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ie=e=>(e=e.toLowerCase(),t=>Qe(t)===e),Ke=e=>t=>typeof t===e,{isArray:Se}=Array,Ce=Ke("undefined");function Te(e){return e!==null&&!Ce(e)&&e.constructor!==null&&!Ce(e.constructor)&&ne(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Vt=ie("ArrayBuffer");function Ps(e){let t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Vt(e.buffer),t}const Ts=Ke("string"),ne=Ke("function"),Jt=Ke("number"),De=e=>e!==null&&typeof e=="object",Ds=e=>e===!0||e===!1,He=e=>{if(Qe(e)!=="object")return!1;const t=pt(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Yt in e)&&!(Je in e)},$s=e=>{if(!De(e)||Te(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},Fs=ie("Date"),Is=ie("File"),Bs=ie("Blob"),Us=ie("FileList"),zs=e=>De(e)&&ne(e.pipe),Hs=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ne(e.append)&&((t=Qe(e))==="formdata"||t==="object"&&ne(e.toString)&&e.toString()==="[object FormData]"))},qs=ie("URLSearchParams"),[Ws,Ys,Vs,Js]=["ReadableStream","Request","Response","Headers"].map(ie),Qs=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $e(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e=="undefined")return;let n,a;if(typeof e!="object"&&(e=[e]),Se(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(Te(e))return;const l=r?Object.getOwnPropertyNames(e):Object.keys(e),c=l.length;let m;for(n=0;n<c;n++)m=l[n],t.call(null,e[m],m,e)}}function Qt(e,t){if(Te(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const be=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,Kt=e=>!Ce(e)&&e!==be;function it(){const{caseless:e,skipUndefined:t}=Kt(this)&&this||{},r={},n=(a,l)=>{const c=e&&Qt(r,l)||l;He(r[c])&&He(a)?r[c]=it(r[c],a):He(a)?r[c]=it({},a):Se(a)?r[c]=a.slice():(!t||!Ce(a))&&(r[c]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&$e(arguments[a],n);return r}const Ks=(e,t,r,{allOwnKeys:n}={})=>($e(t,(a,l)=>{r&&ne(a)?e[l]=Wt(a,r):e[l]=a},{allOwnKeys:n}),e),Xs=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Gs=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Zs=(e,t,r,n)=>{let a,l,c;const m={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)c=a[l],(!n||n(c,e,t))&&!m[c]&&(t[c]=e[c],m[c]=!0);e=r!==!1&&pt(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},er=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},tr=e=>{if(!e)return null;if(Se(e))return e;let t=e.length;if(!Jt(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},sr=(e=>t=>e&&t instanceof e)(typeof Uint8Array!="undefined"&&pt(Uint8Array)),rr=(e,t)=>{const n=(e&&e[Je]).call(e);let a;for(;(a=n.next())&&!a.done;){const l=a.value;t.call(e,l[0],l[1])}},nr=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},ar=ie("HTMLFormElement"),or=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),Ct=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),ir=ie("RegExp"),Xt=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};$e(r,(a,l)=>{let c;(c=t(a,l,e))!==!1&&(n[l]=c||a)}),Object.defineProperties(e,n)},lr=e=>{Xt(e,(t,r)=>{if(ne(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(ne(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},cr=(e,t)=>{const r={},n=a=>{a.forEach(l=>{r[l]=!0})};return Se(e)?n(e):n(String(e).split(t)),r},dr=()=>{},ur=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function mr(e){return!!(e&&ne(e.append)&&e[Yt]==="FormData"&&e[Je])}const hr=e=>{const t=new Array(10),r=(n,a)=>{if(De(n)){if(t.indexOf(n)>=0)return;if(Te(n))return n;if(!("toJSON"in n)){t[a]=n;const l=Se(n)?[]:{};return $e(n,(c,m)=>{const o=r(c,a+1);!Ce(o)&&(l[m]=o)}),t[a]=void 0,l}}return n};return r(e,0)},fr=ie("AsyncFunction"),pr=e=>e&&(De(e)||ne(e))&&ne(e.then)&&ne(e.catch),Gt=((e,t)=>e?setImmediate:t?((r,n)=>(be.addEventListener("message",({source:a,data:l})=>{a===be&&l===r&&n.length&&n.shift()()},!1),a=>{n.push(a),be.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ne(be.postMessage)),xr=typeof queueMicrotask!="undefined"?queueMicrotask.bind(be):typeof process!="undefined"&&process.nextTick||Gt,br=e=>e!=null&&ne(e[Je]),p={isArray:Se,isArrayBuffer:Vt,isBuffer:Te,isFormData:Hs,isArrayBufferView:Ps,isString:Ts,isNumber:Jt,isBoolean:Ds,isObject:De,isPlainObject:He,isEmptyObject:$s,isReadableStream:Ws,isRequest:Ys,isResponse:Vs,isHeaders:Js,isUndefined:Ce,isDate:Fs,isFile:Is,isBlob:Bs,isRegExp:ir,isFunction:ne,isStream:zs,isURLSearchParams:qs,isTypedArray:sr,isFileList:Us,forEach:$e,merge:it,extend:Ks,trim:Qs,stripBOM:Xs,inherits:Gs,toFlatObject:Zs,kindOf:Qe,kindOfTest:ie,endsWith:er,toArray:tr,forEachEntry:rr,matchAll:nr,isHTMLForm:ar,hasOwnProperty:Ct,hasOwnProp:Ct,reduceDescriptors:Xt,freezeMethods:lr,toObjectSet:cr,toCamelCase:or,noop:dr,toFiniteNumber:ur,findKey:Qt,global:be,isContextDefined:Kt,isSpecCompliantForm:mr,toJSONObject:hr,isAsyncFn:fr,isThenable:pr,setImmediate:Gt,asap:xr,isIterable:br};function O(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}p.inherits(O,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:p.toJSONObject(this.config),code:this.code,status:this.status}}});const Zt=O.prototype,es={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{es[e]={value:e}});Object.defineProperties(O,es);Object.defineProperty(Zt,"isAxiosError",{value:!0});O.from=(e,t,r,n,a,l)=>{const c=Object.create(Zt);p.toFlatObject(e,c,function(u){return u!==Error.prototype},i=>i!=="isAxiosError");const m=e&&e.message?e.message:"Error",o=t==null&&e?e.code:t;return O.call(c,m,o,r,n,a),e&&c.cause==null&&Object.defineProperty(c,"cause",{value:e,configurable:!0}),c.name=e&&e.name||"Error",l&&Object.assign(c,l),c};const gr=null;function lt(e){return p.isPlainObject(e)||p.isArray(e)}function ts(e){return p.endsWith(e,"[]")?e.slice(0,-2):e}function St(e,t,r){return e?e.concat(t).map(function(a,l){return a=ts(a),!r&&l?"["+a+"]":a}).join(r?".":""):t}function yr(e){return p.isArray(e)&&!e.some(lt)}const jr=p.toFlatObject(p,{},null,function(t){return/^is[A-Z]/.test(t)});function Xe(e,t,r){if(!p.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=p.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,b){return!p.isUndefined(b[x])});const n=r.metaTokens,a=r.visitor||u,l=r.dots,c=r.indexes,o=(r.Blob||typeof Blob!="undefined"&&Blob)&&p.isSpecCompliantForm(t);if(!p.isFunction(a))throw new TypeError("visitor must be a function");function i(f){if(f===null)return"";if(p.isDate(f))return f.toISOString();if(p.isBoolean(f))return f.toString();if(!o&&p.isBlob(f))throw new O("Blob is not supported. Use a Buffer instead.");return p.isArrayBuffer(f)||p.isTypedArray(f)?o&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,x,b){let M=f;if(f&&!b&&typeof f=="object"){if(p.endsWith(x,"{}"))x=n?x:x.slice(0,-2),f=JSON.stringify(f);else if(p.isArray(f)&&yr(f)||(p.isFileList(f)||p.endsWith(x,"[]"))&&(M=p.toArray(f)))return x=ts(x),M.forEach(function(S,A){!(p.isUndefined(S)||S===null)&&t.append(c===!0?St([x],A,l):c===null?x:x+"[]",i(S))}),!1}return lt(f)?!0:(t.append(St(b,x,l),i(f)),!1)}const d=[],h=Object.assign(jr,{defaultVisitor:u,convertValue:i,isVisitable:lt});function g(f,x){if(!p.isUndefined(f)){if(d.indexOf(f)!==-1)throw Error("Circular reference detected in "+x.join("."));d.push(f),p.forEach(f,function(M,N){(!(p.isUndefined(M)||M===null)&&a.call(t,M,p.isString(N)?N.trim():N,x,h))===!0&&g(M,x?x.concat(N):[N])}),d.pop()}}if(!p.isObject(e))throw new TypeError("data must be an object");return g(e),t}function Et(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function xt(e,t){this._pairs=[],e&&Xe(e,this,t)}const ss=xt.prototype;ss.append=function(t,r){this._pairs.push([t,r])};ss.toString=function(t){const r=t?function(n){return t.call(this,n,Et)}:Et;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function wr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function rs(e,t,r){if(!t)return e;const n=r&&r.encode||wr;p.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let l;if(a?l=a(t,r):l=p.isURLSearchParams(t)?t.toString():new xt(t,r).toString(n),l){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class kt{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){p.forEach(this.handlers,function(n){n!==null&&t(n)})}}const ns={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vr=typeof URLSearchParams!="undefined"?URLSearchParams:xt,Nr=typeof FormData!="undefined"?FormData:null,Cr=typeof Blob!="undefined"?Blob:null,Sr={isBrowser:!0,classes:{URLSearchParams:vr,FormData:Nr,Blob:Cr},protocols:["http","https","file","blob","url","data"]},bt=typeof window!="undefined"&&typeof document!="undefined",ct=typeof navigator=="object"&&navigator||void 0,Er=bt&&(!ct||["ReactNative","NativeScript","NS"].indexOf(ct.product)<0),kr=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_r=bt&&window.location.href||"http://localhost",Rr=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bt,hasStandardBrowserEnv:Er,hasStandardBrowserWebWorkerEnv:kr,navigator:ct,origin:_r},Symbol.toStringTag,{value:"Module"})),K=D(D({},Rr),Sr);function Ar(e,t){return Xe(e,new K.classes.URLSearchParams,D({visitor:function(r,n,a,l){return K.isNode&&p.isBuffer(r)?(this.append(n,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},t))}function Mr(e){return p.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Or(e){const t={},r=Object.keys(e);let n;const a=r.length;let l;for(n=0;n<a;n++)l=r[n],t[l]=e[l];return t}function as(e){function t(r,n,a,l){let c=r[l++];if(c==="__proto__")return!0;const m=Number.isFinite(+c),o=l>=r.length;return c=!c&&p.isArray(a)?a.length:c,o?(p.hasOwnProp(a,c)?a[c]=[a[c],n]:a[c]=n,!m):((!a[c]||!p.isObject(a[c]))&&(a[c]=[]),t(r,n,a[c],l)&&p.isArray(a[c])&&(a[c]=Or(a[c])),!m)}if(p.isFormData(e)&&p.isFunction(e.entries)){const r={};return p.forEachEntry(e,(n,a)=>{t(Mr(n),a,r,0)}),r}return null}function Lr(e,t,r){if(p.isString(e))try{return(t||JSON.parse)(e),p.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Fe={transitional:ns,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,l=p.isObject(t);if(l&&p.isHTMLForm(t)&&(t=new FormData(t)),p.isFormData(t))return a?JSON.stringify(as(t)):t;if(p.isArrayBuffer(t)||p.isBuffer(t)||p.isStream(t)||p.isFile(t)||p.isBlob(t)||p.isReadableStream(t))return t;if(p.isArrayBufferView(t))return t.buffer;if(p.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let m;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Ar(t,this.formSerializer).toString();if((m=p.isFileList(t))||n.indexOf("multipart/form-data")>-1){const o=this.env&&this.env.FormData;return Xe(m?{"files[]":t}:t,o&&new o,this.formSerializer)}}return l||a?(r.setContentType("application/json",!1),Lr(t)):t}],transformResponse:[function(t){const r=this.transitional||Fe.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(p.isResponse(t)||p.isReadableStream(t))return t;if(t&&p.isString(t)&&(n&&!this.responseType||a)){const c=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(m){if(c)throw m.name==="SyntaxError"?O.from(m,O.ERR_BAD_RESPONSE,this,null,this.response):m}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:K.classes.FormData,Blob:K.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};p.forEach(["delete","get","head","post","put","patch"],e=>{Fe.headers[e]={}});const Pr=p.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Tr=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(c){a=c.indexOf(":"),r=c.substring(0,a).trim().toLowerCase(),n=c.substring(a+1).trim(),!(!r||t[r]&&Pr[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},_t=Symbol("internals");function Re(e){return e&&String(e).trim().toLowerCase()}function qe(e){return e===!1||e==null?e:p.isArray(e)?e.map(qe):String(e)}function Dr(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const $r=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function st(e,t,r,n,a){if(p.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!p.isString(t)){if(p.isString(n))return t.indexOf(n)!==-1;if(p.isRegExp(n))return n.test(t)}}function Fr(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function Ir(e,t){const r=p.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,l,c){return this[n].call(this,t,a,l,c)},configurable:!0})})}let ae=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function l(m,o,i){const u=Re(o);if(!u)throw new Error("header name must be a non-empty string");const d=p.findKey(a,u);(!d||a[d]===void 0||i===!0||i===void 0&&a[d]!==!1)&&(a[d||o]=qe(m))}const c=(m,o)=>p.forEach(m,(i,u)=>l(i,u,o));if(p.isPlainObject(t)||t instanceof this.constructor)c(t,r);else if(p.isString(t)&&(t=t.trim())&&!$r(t))c(Tr(t),r);else if(p.isObject(t)&&p.isIterable(t)){let m={},o,i;for(const u of t){if(!p.isArray(u))throw TypeError("Object iterator must return a key-value pair");m[i=u[0]]=(o=m[i])?p.isArray(o)?[...o,u[1]]:[o,u[1]]:u[1]}c(m,r)}else t!=null&&l(r,t,n);return this}get(t,r){if(t=Re(t),t){const n=p.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return Dr(a);if(p.isFunction(r))return r.call(this,a,n);if(p.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Re(t),t){const n=p.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||st(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function l(c){if(c=Re(c),c){const m=p.findKey(n,c);m&&(!r||st(n,n[m],m,r))&&(delete n[m],a=!0)}}return p.isArray(t)?t.forEach(l):l(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const l=r[n];(!t||st(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const r=this,n={};return p.forEach(this,(a,l)=>{const c=p.findKey(n,l);if(c){r[c]=qe(a),delete r[l];return}const m=t?Fr(l):String(l).trim();m!==l&&delete r[l],r[m]=qe(a),n[m]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return p.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&p.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[_t]=this[_t]={accessors:{}}).accessors,a=this.prototype;function l(c){const m=Re(c);n[m]||(Ir(a,c),n[m]=!0)}return p.isArray(t)?t.forEach(l):l(t),this}};ae.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);p.reduceDescriptors(ae.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});p.freezeMethods(ae);function rt(e,t){const r=this||Fe,n=t||r,a=ae.from(n.headers);let l=n.data;return p.forEach(e,function(m){l=m.call(r,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function os(e){return!!(e&&e.__CANCEL__)}function Ee(e,t,r){O.call(this,e==null?"canceled":e,O.ERR_CANCELED,t,r),this.name="CanceledError"}p.inherits(Ee,O,{__CANCEL__:!0});function is(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new O("Request failed with status code "+r.status,[O.ERR_BAD_REQUEST,O.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Br(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Ur(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,l=0,c;return t=t!==void 0?t:1e3,function(o){const i=Date.now(),u=n[l];c||(c=i),r[a]=o,n[a]=i;let d=l,h=0;for(;d!==a;)h+=r[d++],d=d%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),i-c<t)return;const g=u&&i-u;return g?Math.round(h*1e3/g):void 0}}function zr(e,t){let r=0,n=1e3/t,a,l;const c=(i,u=Date.now())=>{r=u,a=null,l&&(clearTimeout(l),l=null),e(...i)};return[(...i)=>{const u=Date.now(),d=u-r;d>=n?c(i,u):(a=i,l||(l=setTimeout(()=>{l=null,c(a)},n-d)))},()=>a&&c(a)]}const Ye=(e,t,r=3)=>{let n=0;const a=Ur(50,250);return zr(l=>{const c=l.loaded,m=l.lengthComputable?l.total:void 0,o=c-n,i=a(o),u=c<=m;n=c;const d={loaded:c,total:m,progress:m?c/m:void 0,bytes:o,rate:i||void 0,estimated:i&&m&&u?(m-c)/i:void 0,event:l,lengthComputable:m!=null,[t?"download":"upload"]:!0};e(d)},r)},Rt=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},At=e=>(...t)=>p.asap(()=>e(...t)),Hr=K.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,K.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(K.origin),K.navigator&&/(msie|trident)/i.test(K.navigator.userAgent)):()=>!0,qr=K.hasStandardBrowserEnv?{write(e,t,r,n,a,l,c){if(typeof document=="undefined")return;const m=[`${e}=${encodeURIComponent(t)}`];p.isNumber(r)&&m.push(`expires=${new Date(r).toUTCString()}`),p.isString(n)&&m.push(`path=${n}`),p.isString(a)&&m.push(`domain=${a}`),l===!0&&m.push("secure"),p.isString(c)&&m.push(`SameSite=${c}`),document.cookie=m.join("; ")},read(e){if(typeof document=="undefined")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Wr(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Yr(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function ls(e,t,r){let n=!Wr(t);return e&&(n||r==!1)?Yr(e,t):t}const Mt=e=>e instanceof ae?D({},e):e;function ye(e,t){t=t||{};const r={};function n(i,u,d,h){return p.isPlainObject(i)&&p.isPlainObject(u)?p.merge.call({caseless:h},i,u):p.isPlainObject(u)?p.merge({},u):p.isArray(u)?u.slice():u}function a(i,u,d,h){if(p.isUndefined(u)){if(!p.isUndefined(i))return n(void 0,i,d,h)}else return n(i,u,d,h)}function l(i,u){if(!p.isUndefined(u))return n(void 0,u)}function c(i,u){if(p.isUndefined(u)){if(!p.isUndefined(i))return n(void 0,i)}else return n(void 0,u)}function m(i,u,d){if(d in t)return n(i,u);if(d in e)return n(void 0,i)}const o={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:m,headers:(i,u,d)=>a(Mt(i),Mt(u),d,!0)};return p.forEach(Object.keys(D(D({},e),t)),function(u){const d=o[u]||a,h=d(e[u],t[u],u);p.isUndefined(h)&&d!==m||(r[u]=h)}),r}const cs=e=>{const t=ye({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:c,auth:m}=t;if(t.headers=c=ae.from(c),t.url=rs(ls(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),m&&c.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),p.isFormData(r)){if(K.hasStandardBrowserEnv||K.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(p.isFunction(r.getHeaders)){const o=r.getHeaders(),i=["content-type","content-length"];Object.entries(o).forEach(([u,d])=>{i.includes(u.toLowerCase())&&c.set(u,d)})}}if(K.hasStandardBrowserEnv&&(n&&p.isFunction(n)&&(n=n(t)),n||n!==!1&&Hr(t.url))){const o=a&&l&&qr.read(l);o&&c.set(a,o)}return t},Vr=typeof XMLHttpRequest!="undefined",Jr=Vr&&function(e){return new Promise(function(r,n){const a=cs(e);let l=a.data;const c=ae.from(a.headers).normalize();let{responseType:m,onUploadProgress:o,onDownloadProgress:i}=a,u,d,h,g,f;function x(){g&&g(),f&&f(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(a.method.toUpperCase(),a.url,!0),b.timeout=a.timeout;function M(){if(!b)return;const S=ae.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),T={data:!m||m==="text"||m==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:S,config:e,request:b};is(function(B){r(B),x()},function(B){n(B),x()},T),b=null}"onloadend"in b?b.onloadend=M:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(M)},b.onabort=function(){b&&(n(new O("Request aborted",O.ECONNABORTED,e,b)),b=null)},b.onerror=function(A){const T=A&&A.message?A.message:"Network Error",F=new O(T,O.ERR_NETWORK,e,b);F.event=A||null,n(F),b=null},b.ontimeout=function(){let A=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const T=a.transitional||ns;a.timeoutErrorMessage&&(A=a.timeoutErrorMessage),n(new O(A,T.clarifyTimeoutError?O.ETIMEDOUT:O.ECONNABORTED,e,b)),b=null},l===void 0&&c.setContentType(null),"setRequestHeader"in b&&p.forEach(c.toJSON(),function(A,T){b.setRequestHeader(T,A)}),p.isUndefined(a.withCredentials)||(b.withCredentials=!!a.withCredentials),m&&m!=="json"&&(b.responseType=a.responseType),i&&([h,f]=Ye(i,!0),b.addEventListener("progress",h)),o&&b.upload&&([d,g]=Ye(o),b.upload.addEventListener("progress",d),b.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(u=S=>{b&&(n(!S||S.type?new Ee(null,e,b):S),b.abort(),b=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const N=Br(a.url);if(N&&K.protocols.indexOf(N)===-1){n(new O("Unsupported protocol "+N+":",O.ERR_BAD_REQUEST,e));return}b.send(l||null)})},Qr=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const l=function(i){if(!a){a=!0,m();const u=i instanceof Error?i:this.reason;n.abort(u instanceof O?u:new Ee(u instanceof Error?u.message:u))}};let c=t&&setTimeout(()=>{c=null,l(new O(`timeout ${t} of ms exceeded`,O.ETIMEDOUT))},t);const m=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(i=>{i.unsubscribe?i.unsubscribe(l):i.removeEventListener("abort",l)}),e=null)};e.forEach(i=>i.addEventListener("abort",l));const{signal:o}=n;return o.unsubscribe=()=>p.asap(m),o}},Kr=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},Xr=function(e,t){return et(this,null,function*(){try{for(var r=vt(Gr(e)),n,a,l;n=!(a=yield new xe(r.next())).done;n=!1){const c=a.value;yield*tt(Kr(c,t))}}catch(a){l=[a]}finally{try{n&&(a=r.return)&&(yield new xe(a.call(r)))}finally{if(l)throw l[0]}}})},Gr=function(e){return et(this,null,function*(){if(e[Symbol.asyncIterator]){yield*tt(e);return}const t=e.getReader();try{for(;;){const{done:r,value:n}=yield new xe(t.read());if(r)break;yield n}}finally{yield new xe(t.cancel())}})},Ot=(e,t,r,n)=>{const a=Xr(e,t);let l=0,c,m=i=>{c||(c=!0,n&&n(i))};return new ReadableStream({pull(i){return W(this,null,function*(){try{const{done:u,value:d}=yield a.next();if(u){m(),i.close();return}let h=d.byteLength;if(r){let g=l+=h;r(g)}i.enqueue(new Uint8Array(d))}catch(u){throw m(u),u}})},cancel(i){return m(i),a.return()}},{highWaterMark:2})},Lt=64*1024,{isFunction:ze}=p,Zr=(({Request:e,Response:t})=>({Request:e,Response:t}))(p.global),{ReadableStream:Pt,TextEncoder:Tt}=p.global,Dt=(e,...t)=>{try{return!!e(...t)}catch(r){return!1}},en=e=>{e=p.merge.call({skipUndefined:!0},Zr,e);const{fetch:t,Request:r,Response:n}=e,a=t?ze(t):typeof fetch=="function",l=ze(r),c=ze(n);if(!a)return!1;const m=a&&ze(Pt),o=a&&(typeof Tt=="function"?(f=>x=>f.encode(x))(new Tt):f=>W(he,null,function*(){return new Uint8Array(yield new r(f).arrayBuffer())})),i=l&&m&&Dt(()=>{let f=!1;const x=new r(K.origin,{body:new Pt,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!x}),u=c&&m&&Dt(()=>p.isReadableStream(new n("").body)),d={stream:u&&(f=>f.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(f=>{!d[f]&&(d[f]=(x,b)=>{let M=x&&x[f];if(M)return M.call(x);throw new O(`Response type '${f}' is not supported`,O.ERR_NOT_SUPPORT,b)})});const h=f=>W(he,null,function*(){if(f==null)return 0;if(p.isBlob(f))return f.size;if(p.isSpecCompliantForm(f))return(yield new r(K.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(p.isArrayBufferView(f)||p.isArrayBuffer(f))return f.byteLength;if(p.isURLSearchParams(f)&&(f=f+""),p.isString(f))return(yield o(f)).byteLength}),g=(f,x)=>W(he,null,function*(){const b=p.toFiniteNumber(f.getContentLength());return b==null?h(x):b});return f=>W(he,null,function*(){let{url:x,method:b,data:M,signal:N,cancelToken:S,timeout:A,onDownloadProgress:T,onUploadProgress:F,responseType:B,headers:oe,withCredentials:ee="same-origin",fetchOptions:$}=cs(f),L=t||fetch;B=B?(B+"").toLowerCase():"text";let J=Qr([N,S&&S.toAbortSignal()],A),V=null;const _=J&&J.unsubscribe&&(()=>{J.unsubscribe()});let C;try{if(F&&i&&b!=="get"&&b!=="head"&&(C=yield g(oe,M))!==0){let k=new r(x,{method:"POST",body:M,duplex:"half"}),P;if(p.isFormData(M)&&(P=k.headers.get("content-type"))&&oe.setContentType(P),k.body){const[U,H]=Rt(C,Ye(At(F)));M=Ot(k.body,Lt,U,H)}}p.isString(ee)||(ee=ee?"include":"omit");const y=l&&"credentials"in r.prototype,j=z(D({},$),{signal:J,method:b.toUpperCase(),headers:oe.normalize().toJSON(),body:M,duplex:"half",credentials:y?ee:void 0});V=l&&new r(x,j);let w=yield l?L(V,$):L(x,j);const v=u&&(B==="stream"||B==="response");if(u&&(T||v&&_)){const k={};["status","statusText","headers"].forEach(te=>{k[te]=w[te]});const P=p.toFiniteNumber(w.headers.get("content-length")),[U,H]=T&&Rt(P,Ye(At(T),!0))||[];w=new n(Ot(w.body,Lt,U,()=>{H&&H(),_&&_()}),k)}B=B||"text";let R=yield d[p.findKey(d,B)||"text"](w,f);return!v&&_&&_(),yield new Promise((k,P)=>{is(k,P,{data:R,headers:ae.from(w.headers),status:w.status,statusText:w.statusText,config:f,request:V})})}catch(y){throw _&&_(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new O("Network Error",O.ERR_NETWORK,f,V),{cause:y.cause||y}):O.from(y,y&&y.code,f,V)}})},tn=new Map,ds=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:a}=t,l=[n,a,r];let c=l.length,m=c,o,i,u=tn;for(;m--;)o=l[m],i=u.get(o),i===void 0&&u.set(o,i=m?new Map:en(t)),u=i;return i};ds();const gt={http:gr,xhr:Jr,fetch:{get:ds}};p.forEach(gt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});const $t=e=>`- ${e}`,sn=e=>p.isFunction(e)||e===null||e===!1;function rn(e,t){e=p.isArray(e)?e:[e];const{length:r}=e;let n,a;const l={};for(let c=0;c<r;c++){n=e[c];let m;if(a=n,!sn(n)&&(a=gt[(m=String(n)).toLowerCase()],a===void 0))throw new O(`Unknown adapter '${m}'`);if(a&&(p.isFunction(a)||(a=a.get(t))))break;l[m||"#"+c]=a}if(!a){const c=Object.entries(l).map(([o,i])=>`adapter ${o} `+(i===!1?"is not supported by the environment":"is not available in the build"));let m=r?c.length>1?`since :
`+c.map($t).join(`
`):" "+$t(c[0]):"as no adapter specified";throw new O("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return a}const us={getAdapter:rn,adapters:gt};function nt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ee(null,e)}function Ft(e){return nt(e),e.headers=ae.from(e.headers),e.data=rt.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),us.getAdapter(e.adapter||Fe.adapter,e)(e).then(function(n){return nt(e),n.data=rt.call(e,e.transformResponse,n),n.headers=ae.from(n.headers),n},function(n){return os(n)||(nt(e),n&&n.response&&(n.response.data=rt.call(e,e.transformResponse,n.response),n.response.headers=ae.from(n.response.headers))),Promise.reject(n)})}const ms="1.13.2",Ge={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ge[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const It={};Ge.transitional=function(t,r,n){function a(l,c){return"[Axios v"+ms+"] Transitional option '"+l+"'"+c+(n?". "+n:"")}return(l,c,m)=>{if(t===!1)throw new O(a(c," has been removed"+(r?" in "+r:"")),O.ERR_DEPRECATED);return r&&!It[c]&&(It[c]=!0,console.warn(a(c," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(l,c,m):!0}};Ge.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function nn(e,t,r){if(typeof e!="object")throw new O("options must be an object",O.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const l=n[a],c=t[l];if(c){const m=e[l],o=m===void 0||c(m,l,e);if(o!==!0)throw new O("option "+l+" must be "+o,O.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new O("Unknown option "+l,O.ERR_BAD_OPTION)}}const We={assertOptions:nn,validators:Ge},le=We.validators;let ge=class{constructor(t){this.defaults=t||{},this.interceptors={request:new kt,response:new kt}}request(t,r){return W(this,null,function*(){try{return yield this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch(c){}}throw n}})}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=ye(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:l}=r;n!==void 0&&We.assertOptions(n,{silentJSONParsing:le.transitional(le.boolean),forcedJSONParsing:le.transitional(le.boolean),clarifyTimeoutError:le.transitional(le.boolean)},!1),a!=null&&(p.isFunction(a)?r.paramsSerializer={serialize:a}:We.assertOptions(a,{encode:le.function,serialize:le.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),We.assertOptions(r,{baseUrl:le.spelling("baseURL"),withXsrfToken:le.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let c=l&&p.merge(l.common,l[r.method]);l&&p.forEach(["delete","get","head","post","put","patch","common"],f=>{delete l[f]}),r.headers=ae.concat(c,l);const m=[];let o=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(o=o&&x.synchronous,m.unshift(x.fulfilled,x.rejected))});const i=[];this.interceptors.response.forEach(function(x){i.push(x.fulfilled,x.rejected)});let u,d=0,h;if(!o){const f=[Ft.bind(this),void 0];for(f.unshift(...m),f.push(...i),h=f.length,u=Promise.resolve(r);d<h;)u=u.then(f[d++],f[d++]);return u}h=m.length;let g=r;for(;d<h;){const f=m[d++],x=m[d++];try{g=f(g)}catch(b){x.call(this,b);break}}try{u=Ft.call(this,g)}catch(f){return Promise.reject(f)}for(d=0,h=i.length;d<h;)u=u.then(i[d++],i[d++]);return u}getUri(t){t=ye(this.defaults,t);const r=ls(t.baseURL,t.url,t.allowAbsoluteUrls);return rs(r,t.params,t.paramsSerializer)}};p.forEach(["delete","get","head","options"],function(t){ge.prototype[t]=function(r,n){return this.request(ye(n||{},{method:t,url:r,data:(n||{}).data}))}});p.forEach(["post","put","patch"],function(t){function r(n){return function(l,c,m){return this.request(ye(m||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}ge.prototype[t]=r(),ge.prototype[t+"Form"]=r(!0)});let an=class hs{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const c=new Promise(m=>{n.subscribe(m),l=m}).then(a);return c.cancel=function(){n.unsubscribe(l)},c},t(function(l,c,m){n.reason||(n.reason=new Ee(l,c,m),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new hs(function(a){t=a}),cancel:t}}};function on(e){return function(r){return e.apply(null,r)}}function ln(e){return p.isObject(e)&&e.isAxiosError===!0}const dt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(dt).forEach(([e,t])=>{dt[t]=e});function fs(e){const t=new ge(e),r=Wt(ge.prototype.request,t);return p.extend(r,ge.prototype,t,{allOwnKeys:!0}),p.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return fs(ye(e,a))},r}const q=fs(Fe);q.Axios=ge;q.CanceledError=Ee;q.CancelToken=an;q.isCancel=os;q.VERSION=ms;q.toFormData=Xe;q.AxiosError=O;q.Cancel=q.CanceledError;q.all=function(t){return Promise.all(t)};q.spread=on;q.isAxiosError=ln;q.mergeConfig=ye;q.AxiosHeaders=ae;q.formToJSON=e=>as(p.isHTMLForm(e)?new FormData(e):e);q.getAdapter=us.getAdapter;q.HttpStatusCode=dt;q.default=q;const{Axios:qn,AxiosError:Wn,CanceledError:Yn,isCancel:Vn,CancelToken:Jn,VERSION:Qn,all:Kn,Cancel:Xn,isAxiosError:Gn,spread:Zn,toFormData:ea,AxiosHeaders:ta,HttpStatusCode:sa,formToJSON:ra,getAdapter:na,mergeConfig:aa}=q,cn="/api",dn=cn,I=q.create({baseURL:dn});I.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers=z(D({},e.headers),{Authorization:`Bearer ${t}`})),e});I.interceptors.response.use(e=>e,e=>{var r;return((r=e==null?void 0:e.response)==null?void 0:r.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("name"),localStorage.removeItem("userId"),typeof window!="undefined"&&window.location.pathname!=="/"&&window.location.assign("/")),Promise.reject(e)});const ps=E.createContext(void 0),un=({children:e})=>{const[t,r]=E.useState({token:null,role:null,name:null,userId:null,mustChangePassword:!1,ready:!1});E.useEffect(()=>{W(he,null,function*(){const m=localStorage.getItem("token"),o=localStorage.getItem("role"),i=localStorage.getItem("name"),u=localStorage.getItem("userId");if(m)try{const d=yield I.get("/auth/me",{headers:{Authorization:`Bearer ${m}`}}),h=d.data.role;localStorage.setItem("role",h),localStorage.setItem("name",d.data.full_name),localStorage.setItem("userId",d.data.id),r({token:m,role:h,name:d.data.full_name,userId:d.data.id,mustChangePassword:!!d.data.must_change_password,ready:!0});return}catch(d){localStorage.clear(),r({token:null,role:null,name:null,userId:null,mustChangePassword:!1,ready:!0});return}(o||i||u)&&localStorage.clear(),r({token:null,role:null,name:null,userId:null,mustChangePassword:!1,ready:!0})})},[]);const n=()=>W(he,null,function*(){const c=localStorage.getItem("token");if(!c)return;const m=yield I.get("/auth/me",{headers:{Authorization:`Bearer ${c}`}}),o=m.data.role;localStorage.setItem("role",o),localStorage.setItem("name",m.data.full_name),localStorage.setItem("userId",m.data.id),r({token:c,role:o,name:m.data.full_name,userId:m.data.id,mustChangePassword:!!m.data.must_change_password,ready:!0})}),a=(c,m,o,i)=>W(he,null,function*(){const u=yield I.post("/auth/token",{email:c,password:m,mfa_code:o,recovery_code:i}),d=u.data.access_token;localStorage.setItem("token",d);const h=yield I.get("/auth/me",{headers:{Authorization:`Bearer ${d}`}}),g=h.data.role;return localStorage.setItem("role",g),localStorage.setItem("name",h.data.full_name),localStorage.setItem("userId",h.data.id),r({token:d,role:g,name:h.data.full_name,userId:h.data.id,mustChangePassword:!!h.data.must_change_password,ready:!0}),u.data}),l=()=>{localStorage.clear(),r({token:null,role:null,name:null,userId:null,mustChangePassword:!1,ready:!0})};return s.jsx(ps.Provider,{value:z(D({},t),{login:a,logout:l,refreshMe:n}),children:e})},Ie=()=>{const e=E.useContext(ps);if(!e)throw new Error("useAuth must be used within AuthProvider");return e};function Ne({to:e,icon:t,label:r,badge:n}){const l=Ht().pathname===e;return s.jsxs(_s,{to:e,className:`flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition ${l?"bg-app text-text-primary":"text-text-secondary hover:bg-app hover:text-text-primary"}`,children:[s.jsx("span",{className:"h-5 w-5",children:t}),s.jsx("span",{className:"flex-1",children:r}),n!==void 0&&n>0&&s.jsx("span",{className:"ml-auto inline-flex h-5 min-w-5 items-center justify-center rounded-full bg-app px-1 text-[11px] font-semibold text-text-secondary border border-border",children:n})]})}function mn(){var r,n;const{user:e,logout:t}=Ie();return s.jsxs("div",{className:"fixed inset-y-0 left-0 w-64 bg-surface border-r border-border px-6 py-6 flex flex-col gap-6 overflow-y-auto scrollbar-thin",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-8 w-8 rounded-lg bg-brand flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"C"})}),s.jsx("span",{className:"text-lg font-semibold text-text-primary",children:"Compass"})]}),s.jsxs("nav",{className:"flex flex-col gap-1",children:[s.jsx(Ne,{to:"/",icon:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),label:"Dashboard"}),s.jsx(Ne,{to:"/complaints",icon:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),label:"Complaints"}),s.jsx(Ne,{to:"/create",icon:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),label:"New Complaint"}),(e==null?void 0:e.role)!=="read_only"&&s.jsx(Ne,{to:"/reference",icon:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),label:"Reference Data"}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="complaints_manager")&&s.jsx(Ne,{to:"/users",icon:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),label:"Users"}),s.jsx(Ne,{to:"/settings",icon:s.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),label:"Settings"})]}),s.jsxs("div",{className:"mt-auto pt-6 border-t border-border",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-app flex items-center justify-center text-text-primary font-semibold text-sm",children:((r=e==null?void 0:e.full_name)==null?void 0:r.charAt(0))||"U"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-text-primary truncate",children:e==null?void 0:e.full_name}),s.jsx("div",{className:"text-xs text-text-muted truncate capitalize",children:(n=e==null?void 0:e.role)==null?void 0:n.replace("_"," ")})]})]}),s.jsxs("button",{onClick:t,className:"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium text-text-secondary hover:bg-app hover:text-text-primary transition",children:[s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),s.jsx("span",{children:"Sign out"})]})]})]})}function hn({children:e}){return s.jsxs("div",{className:"min-h-screen bg-app text-text-primary",children:[s.jsx(mn,{}),s.jsx("div",{className:"ml-64 min-h-screen flex flex-col",children:e})]})}function Q(l){var c=l,{variant:e="primary",size:t="md",className:r="",children:n}=c,a=Ze(c,["variant","size","className","children"]);const m="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-offset-2 focus-visible:ring-offset-app disabled:opacity-40 disabled:pointer-events-none",o={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm"},i={primary:"bg-brand text-white hover:opacity-90 active:translate-y-px",secondary:"bg-surface text-text-primary border border-border hover:bg-app active:translate-y-px",ghost:"bg-transparent text-text-primary hover:bg-app active:translate-y-px",icon:"h-10 w-10 p-0 rounded-full hover:bg-app active:translate-y-px"};return s.jsx("button",z(D({className:`${m} ${o[t]} ${i[e]} ${r}`},a),{children:n}))}function Y(a){var l=a,{error:e,leadingIcon:t,className:r=""}=l,n=Ze(l,["error","leadingIcon","className"]);const c="w-full h-10 rounded-lg border bg-surface px-3 text-sm text-text-primary placeholder:text-text-muted outline-none transition",m=e?"border-semantic-error focus:border-semantic-error focus:ring-2 focus:ring-semantic-error/15":"border-border focus:border-brand focus:ring-2 focus:ring-brand/15",o=t?"pl-10":"px-3";return s.jsxs("div",{className:"relative",children:[t&&s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-text-muted",children:t}),s.jsx("input",D({className:`${c} ${m} ${o} ${r}`},n))]})}function X({children:e,className:t="",onClick:r,selected:n,inverse:a}){const l="rounded-card border shadow-card p-4",c=a?"bg-brand text-white border-transparent":"bg-surface text-text-primary border-border",m=n?"ring-2 ring-brand/15":"",o=r?"cursor-pointer hover:shadow-sm active:translate-y-px transition":"";return s.jsx("div",{className:`${l} ${c} ${m} ${o} ${t}`,onClick:r,children:e})}function G({children:e,className:t=""}){return s.jsx("div",{className:`flex items-start justify-between gap-3 ${t}`,children:e})}function Z({children:e,className:t="",inverse:r}){const n=r?"text-white":"text-text-primary";return s.jsx("h3",{className:`text-sm font-semibold ${n} ${t}`,children:e})}function se({children:e,className:t="",inverse:r}){const n=r?"text-white/80":"text-text-secondary";return s.jsx("div",{className:`mt-2 text-xs leading-relaxed ${n} ${t}`,children:e})}function ut({open:e,onClose:t,children:r}){return E.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:t}),s.jsx("div",{className:"fixed left-1/2 top-1/2 w-[min(560px,calc(100%-2rem))] -translate-x-1/2 -translate-y-1/2 rounded-modal border border-border bg-surface p-6 shadow-xl z-50",children:r})]}):null}function mt({children:e,onClose:t}){return s.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:e}),t&&s.jsx("button",{onClick:t,className:"inline-flex h-8 w-8 items-center justify-center rounded-full text-text-muted hover:bg-app hover:text-text-primary transition",children:s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function ht({children:e}){return s.jsx("div",{className:"text-sm text-text-secondary",children:e})}function ft({children:e}){return s.jsx("div",{className:"mt-6 flex justify-end gap-3",children:e})}function fn({children:e,className:t=""}){return s.jsx("div",{className:`overflow-hidden rounded-card border border-border bg-surface ${t}`,children:s.jsx("table",{className:"w-full table-auto",children:e})})}function pn({children:e}){return s.jsx("thead",{className:"bg-app",children:e})}function xn({children:e}){return s.jsx("tbody",{children:e})}function Bt({children:e,onClick:t,className:r=""}){const n=t?"cursor-pointer hover:bg-app/60":"hover:bg-app/60";return s.jsx("tr",{className:`border-t border-border ${n} ${r}`,onClick:t,children:e})}function Ae({children:e,className:t=""}){return s.jsx("th",{className:`h-10 px-4 text-left text-xs font-semibold text-text-secondary ${t}`,children:e})}function Me({children:e,className:t=""}){return s.jsx("td",{className:`h-12 px-4 text-sm text-text-primary ${t}`,children:e})}function at({value:e,onChange:t,options:r,placeholder:n,className:a=""}){const[l,c]=E.useState(!1),[m,o]=E.useState(e),[i,u]=E.useState(0),d=E.useRef(null),h=E.useRef(null);E.useEffect(()=>{o(e)},[e]);const g=r.filter(N=>N.toLowerCase().includes(m.toLowerCase()));E.useEffect(()=>{const N=S=>{h.current&&!h.current.contains(S.target)&&d.current&&!d.current.contains(S.target)&&(c(!1),t(m))};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[m,t]);const f=N=>{const S=N.target.value;o(S),c(!0),u(0)},x=N=>{var S;o(N),t(N),c(!1),(S=d.current)==null||S.blur()},b=N=>{var S;if(!l&&(N.key==="ArrowDown"||N.key==="ArrowUp")){c(!0);return}if(l)switch(N.key){case"ArrowDown":N.preventDefault(),u(A=>A<g.length-1?A+1:A);break;case"ArrowUp":N.preventDefault(),u(A=>A>0?A-1:0);break;case"Enter":N.preventDefault(),g[i]&&x(g[i]);break;case"Escape":N.preventDefault(),c(!1),(S=d.current)==null||S.blur();break}},M=()=>{setTimeout(()=>{var N;(N=h.current)!=null&&N.contains(document.activeElement)||(c(!1),t(m))},200)};return s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:d,type:"text",value:m,onChange:f,onFocus:()=>c(!0),onBlur:M,onKeyDown:b,placeholder:n,className:`w-full h-10 rounded-lg border border-border bg-surface pl-3 pr-10 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15 ${a}`}),s.jsx("button",{type:"button",onClick:()=>{var N;c(!l),(N=d.current)==null||N.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition",children:s.jsx("svg",{className:`h-4 w-4 transition-transform ${l?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})})]}),l&&g.length>0&&s.jsx("div",{ref:h,className:"absolute z-50 mt-1 w-full rounded-lg border border-border bg-surface shadow-lg max-h-60 overflow-auto scrollbar-thin",children:g.map((N,S)=>s.jsx("button",{type:"button",onClick:()=>x(N),onMouseEnter:()=>u(S),className:`w-full text-left px-3 py-2 text-sm transition ${S===i?"bg-app text-text-primary":"text-text-secondary hover:bg-app hover:text-text-primary"}`,children:N},N))}),l&&m&&g.length===0&&s.jsx("div",{ref:h,className:"absolute z-50 mt-1 w-full rounded-lg border border-border bg-surface shadow-lg p-3",children:s.jsxs("p",{className:"text-sm text-text-secondary",children:['No matches found. Type to create "',m,'"']})})]})}function de({title:e,actions:t}){return s.jsxs("div",{className:"h-16 px-10 flex items-center justify-between gap-6 bg-app border-b border-border",children:[e?s.jsx("h1",{className:"text-2xl font-semibold text-text-primary",children:e}):s.jsx("div",{className:"w-full max-w-md",children:s.jsx(Y,{type:"search",placeholder:"Search complaints...",leadingIcon:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),s.jsx("div",{className:"flex items-center gap-3",children:t})]})}function bn(){const e=Pe(),{userId:t,token:r}=Ie(),[n,a]=E.useState(null),[l,c]=E.useState([]),[m,o]=E.useState("mine"),[i,u]=E.useState(!1);E.useEffect(()=>{r&&I.get("/complaints/metrics",{params:{_:Date.now()}}).then(h=>a(h.data)).catch(h=>{var g;((g=h==null?void 0:h.response)==null?void 0:g.status)!==401&&console.error("Failed to load dashboard metrics",h)})},[r]),E.useEffect(()=>{if(!t||!r)return;W(this,null,function*(){var g;u(!0);try{let f=[];m==="mine"?f=((yield I.get("/complaints",{params:{handler_id:t,page:1,page_size:50,_:Date.now()}})).data||[]).filter(b=>b.status!=="Closed"):m==="unassigned"?f=((yield I.get("/complaints",{params:{page:1,page_size:100,_:Date.now()}})).data||[]).filter(b=>b.status!=="Closed").filter(b=>!b.assigned_handler_id):m==="breached"?f=((yield I.get("/complaints",{params:{overdue:!0,page:1,page_size:100,_:Date.now()}})).data||[]).filter(b=>b.status!=="Closed"):m==="oldest"&&(f=((yield I.get("/complaints",{params:{page:1,page_size:100,_:Date.now()}})).data||[]).filter(b=>b.status!=="Closed"),f.sort((b,M)=>ce(b.received_at).valueOf()-ce(M.received_at).valueOf()),f=f.slice(0,20)),c(f)}catch(f){if(((g=f==null?void 0:f.response)==null?void 0:g.status)===401)return;console.error("Failed to load queue",f)}finally{u(!1)}})},[t,r,m]);const d=h=>h===null?"N/A":`${Math.round(h)}%`;return s.jsxs(s.Fragment,{children:[s.jsx(de,{actions:s.jsxs(Q,{variant:"primary",onClick:()=>e("/create"),children:[s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"New Complaint"]})}),s.jsxs("div",{className:"px-10 py-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[s.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[s.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"Open Cases"}),s.jsx("div",{className:"mt-3 text-3xl font-semibold text-text-primary",children:(n==null?void 0:n.kpis.open)||0}),s.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"Total open complaints"})]}),s.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[s.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"My Open"}),s.jsx("div",{className:"mt-3 text-3xl font-semibold text-text-primary",children:(n==null?void 0:n.kpis.my_open)||0}),s.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"Assigned to me"})]}),s.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[s.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"SLA Breaches"}),s.jsx("div",{className:"mt-3 text-3xl font-semibold text-semantic-error",children:(n==null?void 0:n.kpis.open_sla_breaches)||0}),s.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"Open breaches"})]}),s.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[s.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"Stale (21d+)"}),s.jsx("div",{className:"mt-3 text-3xl font-semibold text-semantic-warning",children:(n==null?void 0:n.kpis.open_stale_21d)||0}),s.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"No activity"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs(X,{children:[s.jsx(G,{children:s.jsx(Z,{children:"Acknowledgement SLA (30d)"})}),s.jsx(se,{children:s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs text-text-secondary",children:"On-time rate"}),s.jsx("span",{className:"text-sm font-semibold text-text-primary",children:d((n==null?void 0:n.sla_30d.ack.on_time_pct)||null)})]}),s.jsx("div",{className:"w-full h-2 bg-app rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-semantic-success",style:{width:`${(n==null?void 0:n.sla_30d.ack.on_time_pct)||0}%`}})}),s.jsxs("div",{className:"mt-2 text-xs text-text-muted",children:[(n==null?void 0:n.sla_30d.ack.on_time)||0," / ",(n==null?void 0:n.sla_30d.ack.total)||0," on time"]})]})})]}),s.jsxs(X,{children:[s.jsx(G,{children:s.jsx(Z,{children:"Final Response SLA (30d)"})}),s.jsx(se,{children:s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs text-text-secondary",children:"On-time rate"}),s.jsx("span",{className:"text-sm font-semibold text-text-primary",children:d((n==null?void 0:n.sla_30d.final.on_time_pct)||null)})]}),s.jsx("div",{className:"w-full h-2 bg-app rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-semantic-success",style:{width:`${(n==null?void 0:n.sla_30d.final.on_time_pct)||0}%`}})}),s.jsxs("div",{className:"mt-2 text-xs text-text-muted",children:[(n==null?void 0:n.sla_30d.final.on_time)||0," / ",(n==null?void 0:n.sla_30d.final.total)||0," on time"]})]})})]})]}),s.jsxs(X,{children:[s.jsx(G,{children:s.jsx(Z,{children:"My Queue"})}),s.jsx("div",{className:"mt-4 border-b border-border",children:s.jsx("div",{className:"flex gap-1 px-4",children:["mine","unassigned","breached","oldest"].map(h=>s.jsx("button",{onClick:()=>o(h),className:`px-4 py-2 text-sm font-medium capitalize transition border-b-2 ${m===h?"border-brand text-text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:h},h))})}),s.jsx("div",{className:"p-4",children:i?s.jsx("div",{className:"text-center py-8 text-text-muted",children:"Loading..."}):l.length===0?s.jsx("div",{className:"text-center py-8 text-text-muted",children:"No complaints in this queue"}):s.jsx("div",{className:"space-y-2",children:l.map(h=>s.jsxs("div",{onClick:()=>e(`/complaints/${h.id}`),className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-app cursor-pointer transition",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-semibold text-text-primary truncate",children:h.reference}),s.jsx("div",{className:"text-xs text-text-secondary truncate mt-1",children:h.description||"No description"})]}),s.jsxs("div",{className:"flex items-center gap-3 ml-4",children:[s.jsx("span",{className:"text-xs text-text-muted whitespace-nowrap",children:ce(h.received_at).format("MMM D")}),s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium ${h.status==="New"?"bg-semantic-info/10 text-semantic-info":h.status==="Acknowledged"?"bg-semantic-success/10 text-semantic-success":"bg-app text-text-secondary"}`,children:h.status})]})]},h.id))})})]})]})]})}function xs({status:e,className:t=""}){const r=n=>{switch(n){case"New":return"bg-semantic-info/10 text-semantic-info border-semantic-info/20";case"Acknowledged":return"bg-semantic-success/10 text-semantic-success border-semantic-success/20";case"In Investigation":return"bg-blue-50 text-blue-700 border-blue-200";case"Response Drafted":return"bg-purple-50 text-purple-700 border-purple-200";case"Awaiting Customer":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"Escalated":return"bg-semantic-warning/10 text-semantic-warning border-semantic-warning/20";case"Closed":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-app text-text-secondary border-border"}};return s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium border ${r(e)} ${t}`,children:e})}function gn(){const e=Pe(),[t,r]=E.useState([]),[n,a]=E.useState(!0),[l,c]=E.useState("");E.useEffect(()=>{I.get("/complaints",{params:{page:1,page_size:100}}).then(o=>{r(o.data||[]),a(!1)}).catch(o=>{console.error("Failed to load complaints",o),a(!1)})},[]);const m=t.filter(o=>{var i;return o.reference.toLowerCase().includes(l.toLowerCase())||((i=o.description)==null?void 0:i.toLowerCase().includes(l.toLowerCase()))});return s.jsxs(s.Fragment,{children:[s.jsx(de,{title:"Complaints"}),s.jsxs("div",{className:"px-10 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("div",{className:"w-full max-w-md",children:s.jsx(Y,{type:"search",placeholder:"Search complaints...",value:l,onChange:o=>c(o.target.value),leadingIcon:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),s.jsxs(Q,{variant:"primary",onClick:()=>e("/create"),children:[s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"New Complaint"]})]}),n?s.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading complaints..."}):s.jsxs(fn,{children:[s.jsx(pn,{children:s.jsxs(Bt,{children:[s.jsx(Ae,{children:"Reference"}),s.jsx(Ae,{children:"Status"}),s.jsx(Ae,{children:"Description"}),s.jsx(Ae,{children:"Received"}),s.jsx(Ae,{children:"Handler"})]})}),s.jsx(xn,{children:m.map(o=>s.jsxs(Bt,{onClick:()=>e(`/complaints/${o.id}`),children:[s.jsx(Me,{children:s.jsx("span",{className:"font-semibold",children:o.reference})}),s.jsx(Me,{children:s.jsx(xs,{status:o.status})}),s.jsx(Me,{children:s.jsx("span",{className:"truncate max-w-md block",children:o.description||"No description"})}),s.jsx(Me,{children:s.jsx("span",{className:"text-text-muted",children:ce(o.received_at).format("MMM D, YYYY")})}),s.jsx(Me,{children:s.jsx("span",{className:"text-text-muted",children:o.assigned_handler_name||"Unassigned"})})]},o.id))})]}),!n&&m.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-sm font-semibold text-text-primary",children:"No complaints found"}),s.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:"Try adjusting your search"})]})]})]})}function yn(){const{id:e}=Rs(),t=Pe(),[r,n]=E.useState(null),[a,l]=E.useState(!0);return E.useEffect(()=>{e&&I.get(`/complaints/${e}`).then(c=>{n(c.data),l(!1)}).catch(c=>{console.error("Failed to load complaint",c),l(!1)})},[e]),a?s.jsxs(s.Fragment,{children:[s.jsx(de,{title:"Loading..."}),s.jsx("div",{className:"px-10 py-6",children:s.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading complaint details..."})})]}):r?s.jsxs(s.Fragment,{children:[s.jsx(de,{title:r.reference,actions:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(xs,{status:r.status}),s.jsx(Q,{variant:"secondary",onClick:()=>t("/complaints"),children:"Back"})]})}),s.jsx("div",{className:"px-10 py-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(X,{children:[s.jsx(G,{children:s.jsx(Z,{children:"Complaint Details"})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Description"}),s.jsx("p",{className:"text-sm text-text-primary",children:r.description||"No description"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Category"}),s.jsx("p",{className:"text-sm text-text-primary",children:r.category||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Reason"}),s.jsx("p",{className:"text-sm text-text-primary",children:r.reason||"N/A"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Product"}),s.jsx("p",{className:"text-sm text-text-primary",children:r.product||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Scheme"}),s.jsx("p",{className:"text-sm text-text-primary",children:r.scheme||"N/A"})]})]})]})})]}),r.complainant&&s.jsxs(X,{children:[s.jsx(G,{children:s.jsx(Z,{children:"Complainant"})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-2 mt-4",children:[s.jsx("p",{className:"text-sm text-text-primary font-medium",children:r.complainant.full_name}),s.jsx("p",{className:"text-sm text-text-secondary",children:r.complainant.email}),s.jsx("p",{className:"text-sm text-text-secondary",children:r.complainant.phone})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(X,{children:[s.jsx(G,{children:s.jsx(Z,{children:"Timeline"})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-3 mt-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Received"}),s.jsx("p",{className:"text-sm text-text-primary",children:ce(r.received_at).format("MMM D, YYYY h:mm A")})]}),r.acknowledged_at&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Acknowledged"}),s.jsx("p",{className:"text-sm text-text-primary",children:ce(r.acknowledged_at).format("MMM D, YYYY h:mm A")})]}),r.closed_at&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Closed"}),s.jsx("p",{className:"text-sm text-text-primary",children:ce(r.closed_at).format("MMM D, YYYY h:mm A")})]})]})})]}),s.jsxs(X,{children:[s.jsx(G,{children:s.jsx(Z,{children:"Assignment"})}),s.jsx(se,{children:s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Handler"}),s.jsx("p",{className:"text-sm text-text-primary",children:r.assigned_handler_name||"Unassigned"})]})})]})]})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(de,{title:"Not Found"}),s.jsx("div",{className:"px-10 py-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-sm font-semibold text-text-primary",children:"Complaint not found"}),s.jsx(Q,{variant:"secondary",onClick:()=>t("/complaints"),className:"mt-4",children:"Back to Complaints"})]})})]})}function jn(){const e=Pe(),[t,r]=E.useState(!1),[n,a]=E.useState(null),[l,c]=E.useState([]),[m,o]=E.useState([]),[i,u]=E.useState([]);E.useEffect(()=>{Promise.all([I.get("/reference/products"),I.get("/reference/insurers"),I.get("/reference/brokers")]).then(([x,b,M])=>{c(x.data.map(N=>N.name)),o(b.data.map(N=>N.name)),u(M.data.map(N=>N.name))}).catch(x=>{console.error("Failed to load reference data",x)})},[]);const[d,h]=E.useState({source:"Email",received_at:ce().format("YYYY-MM-DDTHH:mm"),description:"",category:"",reason:"",fca_complaint:!1,fca_rationale:"",vulnerability_flag:!1,vulnerability_notes:"",policy_number:"",insurer:"",broker:"",product:"",scheme:"",complainant_name:"",complainant_email:"",complainant_phone:"",complainant_address:""}),g=x=>{h(z(D({},d),{[x]:!d[x]}))},f=x=>W(this,null,function*(){var b,M;x.preventDefault(),a(null),r(!0);try{const N=yield I.post("/complaints",{source:d.source,received_at:ce(d.received_at).toISOString(),description:d.description,category:d.category,reason:d.reason||null,fca_complaint:d.fca_complaint,fca_rationale:d.fca_rationale||null,vulnerability_flag:d.vulnerability_flag,vulnerability_notes:d.vulnerability_notes||null,policy_number:d.policy_number||null,insurer:d.insurer||null,broker:d.broker||null,product:d.product||null,scheme:d.scheme||null,complainant:{full_name:d.complainant_name,email:d.complainant_email||null,phone:d.complainant_phone||null,address:d.complainant_address||null},policy:{policy_number:d.policy_number||null,insurer:d.insurer||null,broker:d.broker||null,product:d.product||null,scheme:d.scheme||null}});e(`/complaints/${N.data.id}`)}catch(N){a(((M=(b=N==null?void 0:N.response)==null?void 0:b.data)==null?void 0:M.detail)||"Failed to create complaint"),r(!1)}});return s.jsxs(s.Fragment,{children:[s.jsx(de,{title:"Create New Complaint"}),s.jsxs("div",{className:"px-10 py-6 max-w-4xl",children:[n&&s.jsx("div",{className:"mb-6 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:n}),s.jsxs("form",{onSubmit:f,className:"space-y-6",children:[s.jsxs(X,{children:[s.jsx(G,{children:s.jsx(Z,{children:"Receipt Information"})}),s.jsx(se,{children:s.jsx("div",{className:"space-y-4 mt-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Source *"}),s.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:d.source,onChange:x=>h(z(D({},d),{source:x.target.value})),required:!0,children:[s.jsx("option",{value:"Email",children:"Email"}),s.jsx("option",{value:"Phone",children:"Phone"}),s.jsx("option",{value:"Letter",children:"Letter"}),s.jsx("option",{value:"Web Form",children:"Web Form"}),s.jsx("option",{value:"In Person",children:"In Person"}),s.jsx("option",{value:"Social Media",children:"Social Media"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Date Received *"}),s.jsx(Y,{type:"datetime-local",value:d.received_at,onChange:x=>h(z(D({},d),{received_at:x.target.value})),required:!0})]})]})})})]}),s.jsxs(X,{children:[s.jsx(G,{children:s.jsx(Z,{children:"Complaint Details"})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Description *"}),s.jsx("textarea",{className:"w-full min-h-[120px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:d.description,onChange:x=>h(z(D({},d),{description:x.target.value})),placeholder:"Detailed description of the complaint...",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Category *"}),s.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:d.category,onChange:x=>h(z(D({},d),{category:x.target.value})),required:!0,children:[s.jsx("option",{value:"",children:"Select category..."}),s.jsx("option",{value:"Claims",children:"Claims"}),s.jsx("option",{value:"Policy",children:"Policy"}),s.jsx("option",{value:"Service",children:"Service"}),s.jsx("option",{value:"Premium",children:"Premium"}),s.jsx("option",{value:"Communication",children:"Communication"}),s.jsx("option",{value:"Sales",children:"Sales"}),s.jsx("option",{value:"Other",children:"Other"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Reason"}),s.jsx(Y,{value:d.reason,onChange:x=>h(z(D({},d),{reason:x.target.value})),placeholder:"Specific reason..."})]})]})]})})]}),s.jsxs(X,{children:[s.jsx(G,{children:s.jsx(Z,{children:"FCA & Vulnerability"})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:d.fca_complaint,onChange:()=>g("fca_complaint"),className:"h-4 w-4 rounded border-border text-brand focus:ring-2 focus:ring-brand/15"}),s.jsx("span",{className:"text-sm font-medium text-text-primary",children:"FCA Reportable Complaint"})]}),d.fca_complaint&&s.jsxs("div",{className:"pl-7 space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"FCA Rationale"}),s.jsx("textarea",{className:"w-full min-h-[80px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:d.fca_rationale,onChange:x=>h(z(D({},d),{fca_rationale:x.target.value})),placeholder:"Rationale for FCA reporting..."})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:d.vulnerability_flag,onChange:()=>g("vulnerability_flag"),className:"h-4 w-4 rounded border-border text-brand focus:ring-2 focus:ring-brand/15"}),s.jsx("span",{className:"text-sm font-medium text-text-primary",children:"Vulnerable Customer"})]}),d.vulnerability_flag&&s.jsxs("div",{className:"pl-7 space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Vulnerability Notes"}),s.jsx("textarea",{className:"w-full min-h-[80px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:d.vulnerability_notes,onChange:x=>h(z(D({},d),{vulnerability_notes:x.target.value})),placeholder:"Details about vulnerability..."})]})]})]})})]}),s.jsxs(X,{children:[s.jsx(G,{children:s.jsx(Z,{children:"Policy Information"})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Policy Number"}),s.jsx(Y,{value:d.policy_number,onChange:x=>h(z(D({},d),{policy_number:x.target.value})),placeholder:"POL-12345"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Product"}),s.jsx(at,{value:d.product,onChange:x=>h(z(D({},d),{product:x})),options:l,placeholder:"Select or type product..."})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Insurer"}),s.jsx(at,{value:d.insurer,onChange:x=>h(z(D({},d),{insurer:x})),options:m,placeholder:"Select or type insurer..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Broker"}),s.jsx(at,{value:d.broker,onChange:x=>h(z(D({},d),{broker:x})),options:i,placeholder:"Select or type broker..."})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Scheme"}),s.jsx(Y,{value:d.scheme,onChange:x=>h(z(D({},d),{scheme:x.target.value})),placeholder:"Scheme name..."})]})]})})]}),s.jsxs(X,{children:[s.jsx(G,{children:s.jsx(Z,{children:"Complainant Details"})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Full Name *"}),s.jsx(Y,{value:d.complainant_name,onChange:x=>h(z(D({},d),{complainant_name:x.target.value})),placeholder:"John Doe",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Email"}),s.jsx(Y,{type:"email",value:d.complainant_email,onChange:x=>h(z(D({},d),{complainant_email:x.target.value})),placeholder:"john@example.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Phone"}),s.jsx(Y,{value:d.complainant_phone,onChange:x=>h(z(D({},d),{complainant_phone:x.target.value})),placeholder:"+44 20 1234 5678"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Address"}),s.jsx("textarea",{className:"w-full min-h-[80px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:d.complainant_address,onChange:x=>h(z(D({},d),{complainant_address:x.target.value})),placeholder:"Full address..."})]})]})})]}),s.jsxs("div",{className:"flex justify-end gap-3 sticky bottom-6 bg-app/95 backdrop-blur-sm p-4 rounded-lg border border-border",children:[s.jsx(Q,{variant:"secondary",onClick:()=>e("/complaints"),type:"button",children:"Cancel"}),s.jsx(Q,{variant:"primary",type:"submit",disabled:t,children:t?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Complaint"})]})]})]})]})}function wn(){return s.jsxs(s.Fragment,{children:[s.jsx(de,{title:"User Management"}),s.jsx("div",{className:"px-10 py-6",children:s.jsxs(X,{children:[s.jsx(G,{children:s.jsx(Z,{children:"Users"})}),s.jsx(se,{children:s.jsx("p",{className:"text-sm text-text-secondary mt-4",children:"User management interface - to be implemented"})})]})})]})}function vn(){const{user:e}=Ie(),t=(e==null?void 0:e.role)==="admin",[r,n]=E.useState("products"),[a,l]=E.useState([]),[c,m]=E.useState(!0),[o,i]=E.useState(""),[u,d]=E.useState(!1),[h,g]=E.useState(""),[f,x]=E.useState(!1),[b,M]=E.useState(null),[N,S]=E.useState(!1),[A,T]=E.useState(null),[F,B]=E.useState(!1),[oe,ee]=E.useState(null),[$,L]=E.useState(null);E.useEffect(()=>{J()},[r]);const J=()=>W(this,null,function*(){m(!0);try{const j=yield I.get(`/reference/${r}`);l(j.data||[])}catch(j){console.error("Failed to load reference items",j)}finally{m(!1)}}),V=()=>W(this,null,function*(){var j,w;if(h.trim()){x(!0),M(null);try{yield I.post(`/reference/${r}`,{name:h.trim()}),g(""),d(!1),J()}catch(v){M(((w=(j=v==null?void 0:v.response)==null?void 0:j.data)==null?void 0:w.detail)||"Failed to create item")}finally{x(!1)}}}),_=()=>W(this,null,function*(){var j,w;if(A){B(!0),ee(null),L(null);try{const v=new FormData;v.append("file",A);const R=yield I.post(`/reference/${r}/import`,v,{headers:{"Content-Type":"multipart/form-data"}});L(`Successfully imported ${R.data.added} items`),T(null),J(),setTimeout(()=>S(!1),2e3)}catch(v){ee(((w=(j=v==null?void 0:v.response)==null?void 0:j.data)==null?void 0:w.detail)||"Failed to import file")}finally{B(!1)}}}),C=a.filter(j=>j.name.toLowerCase().includes(o.toLowerCase())),y=j=>{switch(j){case"products":return"Products";case"brokers":return"Brokers";case"insurers":return"Insurers"}};return s.jsxs(s.Fragment,{children:[s.jsx(de,{title:"Reference Data Management"}),s.jsx("div",{className:"px-10 py-6",children:s.jsxs(X,{children:[s.jsx(G,{children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsx(Z,{children:"Reference Lists"}),t&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Q,{variant:"secondary",size:"sm",onClick:()=>S(!0),children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Import CSV"]}),s.jsxs(Q,{variant:"primary",size:"sm",onClick:()=>d(!0),children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Add New"]})]})]})}),s.jsx("div",{className:"border-b border-border",children:s.jsx("div",{className:"flex gap-1 px-4",children:["products","brokers","insurers"].map(j=>s.jsxs("button",{onClick:()=>n(j),className:`px-4 py-3 text-sm font-medium capitalize transition border-b-2 ${r===j?"border-brand text-text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[y(j),s.jsx("span",{className:"ml-2 inline-flex items-center justify-center h-5 min-w-5 px-1 rounded-full bg-app text-[11px] font-semibold text-text-secondary border border-border",children:j===r?C.length:a.length})]},j))})}),s.jsxs(se,{children:[s.jsx("div",{className:"mt-4 mb-6",children:s.jsx(Y,{type:"search",placeholder:`Search ${y(r).toLowerCase()}...`,value:o,onChange:j=>i(j.target.value),leadingIcon:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),c?s.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading..."}):C.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"mt-4 text-sm font-semibold text-text-primary",children:o?"No items match your search":`No ${y(r).toLowerCase()} yet`}),!o&&t&&s.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:'Click "Add New" to create your first entry'})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:C.map(j=>s.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border bg-surface hover:bg-app transition",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-text-primary truncate",children:j.name}),s.jsxs("div",{className:"text-xs text-text-muted",children:["ID: ",j.id.substring(0,8),"..."]})]})},j.id))})]})]})}),s.jsxs(ut,{open:u,onClose:()=>d(!1),children:[s.jsxs(mt,{onClose:()=>d(!1),children:["Add New ",y(r).slice(0,-1)]}),s.jsxs(ht,{children:[b&&s.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:b}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Name *"}),s.jsx(Y,{value:h,onChange:j=>g(j.target.value),placeholder:`Enter ${y(r).slice(0,-1).toLowerCase()} name...`,autoFocus:!0,onKeyDown:j=>{j.key==="Enter"&&h.trim()&&V()}})]})]}),s.jsxs(ft,{children:[s.jsx(Q,{variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),s.jsx(Q,{variant:"primary",onClick:V,disabled:!h.trim()||f,children:f?"Creating...":"Create"})]})]}),s.jsxs(ut,{open:N,onClose:()=>S(!1),children:[s.jsxs(mt,{onClose:()=>S(!1),children:["Import ",y(r)," from CSV"]}),s.jsxs(ht,{children:[oe&&s.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:oe}),$&&s.jsx("div",{className:"mb-4 rounded-lg border border-semantic-success/30 bg-semantic-success/5 p-3 text-sm text-semantic-success",children:$}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-text-secondary mb-3",children:'Upload a CSV file with a "name" column. Duplicate names will be skipped.'}),s.jsxs("div",{className:"rounded-lg border-2 border-dashed border-border p-6 text-center",children:[s.jsx("input",{type:"file",accept:".csv",onChange:j=>{var w;return T(((w=j.target.files)==null?void 0:w[0])||null)},className:"hidden",id:"csv-upload"}),s.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("p",{className:"mt-2 text-sm font-medium text-text-primary",children:"Click to select CSV file"}),s.jsx("p",{className:"mt-1 text-xs text-text-muted",children:"or drag and drop"})]})]}),A&&s.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-text-primary",children:[s.jsx("svg",{className:"h-5 w-5 text-semantic-success",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),A.name]})]}),s.jsxs("div",{className:"rounded-lg bg-app p-3 text-xs text-text-secondary",children:[s.jsx("p",{className:"font-semibold text-text-primary mb-1",children:"CSV Format Example:"}),s.jsxs("code",{className:"block bg-surface p-2 rounded border border-border font-mono",children:["name",s.jsx("br",{}),"Product A",s.jsx("br",{}),"Product B",s.jsx("br",{}),"Product C"]})]})]})]}),s.jsxs(ft,{children:[s.jsx(Q,{variant:"secondary",onClick:()=>S(!1),children:"Cancel"}),s.jsx(Q,{variant:"primary",onClick:_,disabled:!A||F,children:F?"Importing...":"Import"})]})]})]})}function Ut(){var h;const{user:e}=Ie(),[t,r]=E.useState(""),[n,a]=E.useState(""),[l,c]=E.useState(""),[m,o]=E.useState(null),[i,u]=E.useState(!1),d=g=>W(this,null,function*(){var f,x;if(g.preventDefault(),o(null),n!==l){o({type:"error",text:"New passwords do not match"});return}if(n.length<8){o({type:"error",text:"Password must be at least 8 characters"});return}u(!0);try{yield I.post("/auth/change-password",{current_password:t,new_password:n}),o({type:"success",text:"Password changed successfully"}),r(""),a(""),c("")}catch(b){o({type:"error",text:((x=(f=b==null?void 0:b.response)==null?void 0:f.data)==null?void 0:x.detail)||"Failed to change password"})}finally{u(!1)}});return s.jsxs(s.Fragment,{children:[s.jsx(de,{title:"Profile & Settings"}),s.jsxs("div",{className:"px-10 py-6 max-w-2xl",children:[s.jsxs(X,{className:"mb-6",children:[s.jsx(G,{children:s.jsx(Z,{children:"User Information"})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Name"}),s.jsx("div",{className:"text-sm text-text-primary",children:e==null?void 0:e.full_name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Email"}),s.jsx("div",{className:"text-sm text-text-primary",children:e==null?void 0:e.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Role"}),s.jsx("div",{className:"text-sm text-text-primary capitalize",children:(h=e==null?void 0:e.role)==null?void 0:h.replace("_"," ")})]})]})})]}),s.jsxs(X,{children:[s.jsx(G,{children:s.jsx(Z,{children:"Change Password"})}),s.jsxs(se,{children:[m&&s.jsx("div",{className:`mt-4 rounded-lg border p-3 text-sm ${m.type==="success"?"border-semantic-success/30 bg-semantic-success/5 text-semantic-success":"border-semantic-error/30 bg-semantic-error/5 text-semantic-error"}`,children:m.text}),s.jsxs("form",{onSubmit:d,className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Current Password"}),s.jsx(Y,{type:"password",value:t,onChange:g=>r(g.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"New Password"}),s.jsx(Y,{type:"password",value:n,onChange:g=>a(g.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Confirm New Password"}),s.jsx(Y,{type:"password",value:l,onChange:g=>c(g.target.value),required:!0})]}),s.jsx(Q,{type:"submit",variant:"primary",disabled:i,children:i?"Changing...":"Change Password"})]})]})]})]})]})}var Nn=Object.defineProperty,Ve=Object.getOwnPropertySymbols,bs=Object.prototype.hasOwnProperty,gs=Object.prototype.propertyIsEnumerable,zt=(e,t,r)=>t in e?Nn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Cn=(e,t)=>{for(var r in t||(t={}))bs.call(t,r)&&zt(e,r,t[r]);if(Ve)for(var r of Ve(t))gs.call(t,r)&&zt(e,r,t[r]);return e},Sn=(e,t)=>{var r={};for(var n in e)bs.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Ve)for(var n of Ve(e))t.indexOf(n)<0&&gs.call(e,n)&&(r[n]=e[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var je;(e=>{const t=class{constructor(o,i,u,d){if(this.version=o,this.errorCorrectionLevel=i,this.modules=[],this.isFunction=[],o<t.MIN_VERSION||o>t.MAX_VERSION)throw new RangeError("Version value out of range");if(d<-1||d>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let h=[];for(let f=0;f<this.size;f++)h.push(!1);for(let f=0;f<this.size;f++)this.modules.push(h.slice()),this.isFunction.push(h.slice());this.drawFunctionPatterns();const g=this.addEccAndInterleave(u);if(this.drawCodewords(g),d==-1){let f=1e9;for(let x=0;x<8;x++){this.applyMask(x),this.drawFormatBits(x);const b=this.getPenaltyScore();b<f&&(d=x,f=b),this.applyMask(x)}}l(0<=d&&d<=7),this.mask=d,this.applyMask(d),this.drawFormatBits(d),this.isFunction=[]}static encodeText(o,i){const u=e.QrSegment.makeSegments(o);return t.encodeSegments(u,i)}static encodeBinary(o,i){const u=e.QrSegment.makeBytes(o);return t.encodeSegments([u],i)}static encodeSegments(o,i,u=1,d=40,h=-1,g=!0){if(!(t.MIN_VERSION<=u&&u<=d&&d<=t.MAX_VERSION)||h<-1||h>7)throw new RangeError("Invalid value");let f,x;for(f=u;;f++){const S=t.getNumDataCodewords(f,i)*8,A=m.getTotalBits(o,f);if(A<=S){x=A;break}if(f>=d)throw new RangeError("Data too long")}for(const S of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])g&&x<=t.getNumDataCodewords(f,S)*8&&(i=S);let b=[];for(const S of o){n(S.mode.modeBits,4,b),n(S.numChars,S.mode.numCharCountBits(f),b);for(const A of S.getData())b.push(A)}l(b.length==x);const M=t.getNumDataCodewords(f,i)*8;l(b.length<=M),n(0,Math.min(4,M-b.length),b),n(0,(8-b.length%8)%8,b),l(b.length%8==0);for(let S=236;b.length<M;S^=253)n(S,8,b);let N=[];for(;N.length*8<b.length;)N.push(0);return b.forEach((S,A)=>N[A>>>3]|=S<<7-(A&7)),new t(f,i,N,h)}getModule(o,i){return 0<=o&&o<this.size&&0<=i&&i<this.size&&this.modules[i][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const o=this.getAlignmentPatternPositions(),i=o.length;for(let u=0;u<i;u++)for(let d=0;d<i;d++)u==0&&d==0||u==0&&d==i-1||u==i-1&&d==0||this.drawAlignmentPattern(o[u],o[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){const i=this.errorCorrectionLevel.formatBits<<3|o;let u=i;for(let h=0;h<10;h++)u=u<<1^(u>>>9)*1335;const d=(i<<10|u)^21522;l(d>>>15==0);for(let h=0;h<=5;h++)this.setFunctionModule(8,h,a(d,h));this.setFunctionModule(8,7,a(d,6)),this.setFunctionModule(8,8,a(d,7)),this.setFunctionModule(7,8,a(d,8));for(let h=9;h<15;h++)this.setFunctionModule(14-h,8,a(d,h));for(let h=0;h<8;h++)this.setFunctionModule(this.size-1-h,8,a(d,h));for(let h=8;h<15;h++)this.setFunctionModule(8,this.size-15+h,a(d,h));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let u=0;u<12;u++)o=o<<1^(o>>>11)*7973;const i=this.version<<12|o;l(i>>>18==0);for(let u=0;u<18;u++){const d=a(i,u),h=this.size-11+u%3,g=Math.floor(u/3);this.setFunctionModule(h,g,d),this.setFunctionModule(g,h,d)}}drawFinderPattern(o,i){for(let u=-4;u<=4;u++)for(let d=-4;d<=4;d++){const h=Math.max(Math.abs(d),Math.abs(u)),g=o+d,f=i+u;0<=g&&g<this.size&&0<=f&&f<this.size&&this.setFunctionModule(g,f,h!=2&&h!=4)}}drawAlignmentPattern(o,i){for(let u=-2;u<=2;u++)for(let d=-2;d<=2;d++)this.setFunctionModule(o+d,i+u,Math.max(Math.abs(d),Math.abs(u))!=1)}setFunctionModule(o,i,u){this.modules[i][o]=u,this.isFunction[i][o]=!0}addEccAndInterleave(o){const i=this.version,u=this.errorCorrectionLevel;if(o.length!=t.getNumDataCodewords(i,u))throw new RangeError("Invalid argument");const d=t.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][i],h=t.ECC_CODEWORDS_PER_BLOCK[u.ordinal][i],g=Math.floor(t.getNumRawDataModules(i)/8),f=d-g%d,x=Math.floor(g/d);let b=[];const M=t.reedSolomonComputeDivisor(h);for(let S=0,A=0;S<d;S++){let T=o.slice(A,A+x-h+(S<f?0:1));A+=T.length;const F=t.reedSolomonComputeRemainder(T,M);S<f&&T.push(0),b.push(T.concat(F))}let N=[];for(let S=0;S<b[0].length;S++)b.forEach((A,T)=>{(S!=x-h||T>=f)&&N.push(A[S])});return l(N.length==g),N}drawCodewords(o){if(o.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let i=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let d=0;d<this.size;d++)for(let h=0;h<2;h++){const g=u-h,x=(u+1&2)==0?this.size-1-d:d;!this.isFunction[x][g]&&i<o.length*8&&(this.modules[x][g]=a(o[i>>>3],7-(i&7)),i++)}}l(i==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let i=0;i<this.size;i++)for(let u=0;u<this.size;u++){let d;switch(o){case 0:d=(u+i)%2==0;break;case 1:d=i%2==0;break;case 2:d=u%3==0;break;case 3:d=(u+i)%3==0;break;case 4:d=(Math.floor(u/3)+Math.floor(i/2))%2==0;break;case 5:d=u*i%2+u*i%3==0;break;case 6:d=(u*i%2+u*i%3)%2==0;break;case 7:d=((u+i)%2+u*i%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[i][u]&&d&&(this.modules[i][u]=!this.modules[i][u])}}getPenaltyScore(){let o=0;for(let h=0;h<this.size;h++){let g=!1,f=0,x=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[h][b]==g?(f++,f==5?o+=t.PENALTY_N1:f>5&&o++):(this.finderPenaltyAddHistory(f,x),g||(o+=this.finderPenaltyCountPatterns(x)*t.PENALTY_N3),g=this.modules[h][b],f=1);o+=this.finderPenaltyTerminateAndCount(g,f,x)*t.PENALTY_N3}for(let h=0;h<this.size;h++){let g=!1,f=0,x=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[b][h]==g?(f++,f==5?o+=t.PENALTY_N1:f>5&&o++):(this.finderPenaltyAddHistory(f,x),g||(o+=this.finderPenaltyCountPatterns(x)*t.PENALTY_N3),g=this.modules[b][h],f=1);o+=this.finderPenaltyTerminateAndCount(g,f,x)*t.PENALTY_N3}for(let h=0;h<this.size-1;h++)for(let g=0;g<this.size-1;g++){const f=this.modules[h][g];f==this.modules[h][g+1]&&f==this.modules[h+1][g]&&f==this.modules[h+1][g+1]&&(o+=t.PENALTY_N2)}let i=0;for(const h of this.modules)i=h.reduce((g,f)=>g+(f?1:0),i);const u=this.size*this.size,d=Math.ceil(Math.abs(i*20-u*10)/u)-1;return l(0<=d&&d<=9),o+=d*t.PENALTY_N4,l(0<=o&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{const o=Math.floor(this.version/7)+2,i=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2;let u=[6];for(let d=this.size-7;u.length<o;d-=i)u.splice(1,0,d);return u}}static getNumRawDataModules(o){if(o<t.MIN_VERSION||o>t.MAX_VERSION)throw new RangeError("Version number out of range");let i=(16*o+128)*o+64;if(o>=2){const u=Math.floor(o/7)+2;i-=(25*u-10)*u-55,o>=7&&(i-=36)}return l(208<=i&&i<=29648),i}static getNumDataCodewords(o,i){return Math.floor(t.getNumRawDataModules(o)/8)-t.ECC_CODEWORDS_PER_BLOCK[i.ordinal][o]*t.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let i=[];for(let d=0;d<o-1;d++)i.push(0);i.push(1);let u=1;for(let d=0;d<o;d++){for(let h=0;h<i.length;h++)i[h]=t.reedSolomonMultiply(i[h],u),h+1<i.length&&(i[h]^=i[h+1]);u=t.reedSolomonMultiply(u,2)}return i}static reedSolomonComputeRemainder(o,i){let u=i.map(d=>0);for(const d of o){const h=d^u.shift();u.push(0),i.forEach((g,f)=>u[f]^=t.reedSolomonMultiply(g,h))}return u}static reedSolomonMultiply(o,i){if(o>>>8||i>>>8)throw new RangeError("Byte out of range");let u=0;for(let d=7;d>=0;d--)u=u<<1^(u>>>7)*285,u^=(i>>>d&1)*o;return l(u>>>8==0),u}finderPenaltyCountPatterns(o){const i=o[1];l(i<=this.size*3);const u=i>0&&o[2]==i&&o[3]==i*3&&o[4]==i&&o[5]==i;return(u&&o[0]>=i*4&&o[6]>=i?1:0)+(u&&o[6]>=i*4&&o[0]>=i?1:0)}finderPenaltyTerminateAndCount(o,i,u){return o&&(this.finderPenaltyAddHistory(i,u),i=0),i+=this.size,this.finderPenaltyAddHistory(i,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(o,i){i[0]==0&&(o+=this.size),i.pop(),i.unshift(o)}};let r=t;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=r;function n(o,i,u){if(i<0||i>31||o>>>i)throw new RangeError("Value out of range");for(let d=i-1;d>=0;d--)u.push(o>>>d&1)}function a(o,i){return(o>>>i&1)!=0}function l(o){if(!o)throw new Error("Assertion error")}const c=class{constructor(o,i,u){if(this.mode=o,this.numChars=i,this.bitData=u,i<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(o){let i=[];for(const u of o)n(u,8,i);return new c(c.Mode.BYTE,o.length,i)}static makeNumeric(o){if(!c.isNumeric(o))throw new RangeError("String contains non-numeric characters");let i=[];for(let u=0;u<o.length;){const d=Math.min(o.length-u,3);n(parseInt(o.substr(u,d),10),d*3+1,i),u+=d}return new c(c.Mode.NUMERIC,o.length,i)}static makeAlphanumeric(o){if(!c.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let i=[],u;for(u=0;u+2<=o.length;u+=2){let d=c.ALPHANUMERIC_CHARSET.indexOf(o.charAt(u))*45;d+=c.ALPHANUMERIC_CHARSET.indexOf(o.charAt(u+1)),n(d,11,i)}return u<o.length&&n(c.ALPHANUMERIC_CHARSET.indexOf(o.charAt(u)),6,i),new c(c.Mode.ALPHANUMERIC,o.length,i)}static makeSegments(o){return o==""?[]:c.isNumeric(o)?[c.makeNumeric(o)]:c.isAlphanumeric(o)?[c.makeAlphanumeric(o)]:[c.makeBytes(c.toUtf8ByteArray(o))]}static makeEci(o){let i=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)n(o,8,i);else if(o<16384)n(2,2,i),n(o,14,i);else if(o<1e6)n(6,3,i),n(o,21,i);else throw new RangeError("ECI assignment value out of range");return new c(c.Mode.ECI,0,i)}static isNumeric(o){return c.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return c.ALPHANUMERIC_REGEX.test(o)}getData(){return this.bitData.slice()}static getTotalBits(o,i){let u=0;for(const d of o){const h=d.mode.numCharCountBits(i);if(d.numChars>=1<<h)return 1/0;u+=4+h+d.bitData.length}return u}static toUtf8ByteArray(o){o=encodeURI(o);let i=[];for(let u=0;u<o.length;u++)o.charAt(u)!="%"?i.push(o.charCodeAt(u)):(i.push(parseInt(o.substr(u+1,2),16)),u+=2);return i}};let m=c;m.NUMERIC_REGEX=/^[0-9]*$/,m.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,m.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=m})(je||(je={}));(e=>{(t=>{const r=class{constructor(a,l){this.ordinal=a,this.formatBits=l}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(je||(je={}));(e=>{(t=>{const r=class{constructor(a,l){this.modeBits=a,this.numBitsCharCount=l}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(je||(je={}));var Le=je;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var En={L:Le.QrCode.Ecc.LOW,M:Le.QrCode.Ecc.MEDIUM,Q:Le.QrCode.Ecc.QUARTILE,H:Le.QrCode.Ecc.HIGH},kn=128,_n="L",Rn="#FFFFFF",An="#000000",Mn=!1,ys=4,On=.1;function Ln(e,t=0){const r=[];return e.forEach(function(n,a){let l=null;n.forEach(function(c,m){if(!c&&l!==null){r.push(`M${l+t} ${a+t}h${m-l}v1H${l+t}z`),l=null;return}if(m===n.length-1){if(!c)return;l===null?r.push(`M${m+t},${a+t} h1v1H${m+t}z`):r.push(`M${l+t},${a+t} h${m+1-l}v1H${l+t}z`);return}c&&l===null&&(l=m)})}),r.join("")}function Pn(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((a,l)=>l<t.x||l>=t.x+t.w?a:!1))}function Tn(e,t,r,n){if(n==null)return null;const a=r?ys:0,l=e.length+a*2,c=Math.floor(t*On),m=l/t,o=(n.width||c)*m,i=(n.height||c)*m,u=n.x==null?e.length/2-o/2:n.x*m,d=n.y==null?e.length/2-i/2:n.y*m;let h=null;if(n.excavate){let g=Math.floor(u),f=Math.floor(d),x=Math.ceil(o+u-g),b=Math.ceil(i+d-f);h={x:g,y:f,w:x,h:b}}return{x:u,y:d,h:i,w:o,excavation:h}}(function(){try{new Path2D().addPath(new Path2D)}catch(e){return!1}return!0})();function Dn(e){const t=e,{value:r,size:n=kn,level:a=_n,bgColor:l=Rn,fgColor:c=An,includeMargin:m=Mn,imageSettings:o}=t,i=Sn(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let u=Le.QrCode.encodeText(r,En[a]).getModules();const d=m?ys:0,h=u.length+d*2,g=Tn(u,n,m,o);let f=null;o!=null&&g!=null&&(g.excavation!=null&&(u=Pn(u,g.excavation)),f=Oe.createElement("image",{xlinkHref:o.src,height:g.h,width:g.w,x:g.x+d,y:g.y+d,preserveAspectRatio:"none"}));const x=Ln(u,d);return Oe.createElement("svg",Cn({height:n,width:n,viewBox:`0 0 ${h} ${h}`},i),Oe.createElement("path",{fill:l,d:`M0,0 h${h}v${h}H0z`,shapeRendering:"crispEdges"}),Oe.createElement("path",{fill:c,d:x,shapeRendering:"crispEdges"}),f)}function $n(){const{token:e,role:t,name:r,login:n,logout:a,mustChangePassword:l,ready:c}=Ie(),[m,o]=E.useState(""),[i,u]=E.useState(""),[d,h]=E.useState(!1),[g,f]=E.useState(""),[x,b]=E.useState(""),[M,N]=E.useState(null),[S,A]=E.useState(!1),[T,F]=E.useState(!1),[B,oe]=E.useState(null),[ee,$]=E.useState(null),[L,J]=E.useState(0),V=Pe(),_=Ht();E.useEffect(()=>{c&&(e||_.pathname!=="/"&&V("/",{replace:!0}))},[c,e,_.pathname,V]),E.useEffect(()=>{e&&l&&_.pathname!=="/profile"&&V("/profile",{replace:!0,state:{forced:!0}})},[e,l,_.pathname,V]);const C=()=>W(this,null,function*(){var v,R;N(null);try{const k=yield n(m,i,S?g:void 0,S?x:void 0);A(!1),f(""),b(""),k!=null&&k.mfa_enrollment_required?(J(k.mfa_remaining_skips||0),yield y()):V("/")}catch(k){const P=(R=(v=k==null?void 0:k.response)==null?void 0:v.data)==null?void 0:R.detail;P==="MFA code required"||(P==null?void 0:P.code)==="mfa_required"?(A(!0),N("Enter your 6-digit MFA code or a recovery code.")):N(P==="Invalid recovery code"||P==="Invalid MFA code"||P==="Invalid code"?"Invalid code. Please try again.":"Login failed. Check your credentials.")}}),y=()=>W(this,null,function*(){var v,R;try{const k=yield I.post("/auth/mfa/enroll");oe(k.data),$(null),F(!0)}catch(k){N(((R=(v=k==null?void 0:k.response)==null?void 0:v.data)==null?void 0:R.detail)||"Could not start MFA enrollment")}}),j=()=>W(this,null,function*(){var v,R;try{const k=yield I.post("/auth/mfa/verify",{code:g});$(k.data.recovery_codes),F(!1),f(""),J(0),V("/")}catch(k){N(((R=(v=k==null?void 0:k.response)==null?void 0:v.data)==null?void 0:R.detail)||"Invalid code")}}),w=()=>W(this,null,function*(){var v,R;try{const k=yield I.post("/auth/mfa/skip");J(k.data.remaining_skips),F(!1),oe(null)}catch(k){N(((R=(v=k==null?void 0:k.response)==null?void 0:v.data)==null?void 0:R.detail)||"Cannot skip MFA")}});return e?s.jsx(hn,{children:s.jsxs(As,{children:[s.jsx(me,{path:"/",element:s.jsx(bn,{})}),s.jsx(me,{path:"/complaints",element:s.jsx(gn,{})}),s.jsx(me,{path:"/create",element:s.jsx(jn,{})}),s.jsx(me,{path:"/complaints/:id",element:s.jsx(yn,{})}),s.jsx(me,{path:"/profile",element:s.jsx(Ut,{})}),s.jsx(me,{path:"/users",element:s.jsx(wn,{})}),s.jsx(me,{path:"/reference",element:s.jsx(vn,{})}),s.jsx(me,{path:"/settings",element:s.jsx(Ut,{})})]})}):s.jsxs("div",{className:"min-h-screen bg-app flex items-center justify-center p-4",children:[s.jsx("div",{className:"w-full max-w-md",children:s.jsxs("div",{className:"rounded-card border border-border bg-surface shadow-card p-8",children:[s.jsxs("div",{className:"mb-6 text-center",children:[s.jsx("h1",{className:"text-2xl font-semibold text-text-primary mb-2",children:"Sign in to Compass"}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Use your credentials to access the complaints workspace"})]}),M&&s.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:M}),s.jsxs("form",{onSubmit:v=>{v.preventDefault(),C()},className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Email"}),s.jsx(Y,{type:"email",value:m,onChange:v=>o(v.target.value),placeholder:"you@example.com",autoComplete:"email",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Y,{type:d?"text":"password",value:i,onChange:v=>u(v.target.value),placeholder:"",autoComplete:"current-password",required:!0}),s.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition",children:d?s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):s.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),S&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"MFA Code (6 digits)"}),s.jsx(Y,{type:"text",value:g,onChange:v=>f(v.target.value),placeholder:"123456",maxLength:6})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Recovery Code (optional)"}),s.jsx(Y,{type:"text",value:x,onChange:v=>b(v.target.value),placeholder:"recovery-code"})]})]}),s.jsx(Q,{type:"submit",variant:"primary",className:"w-full mt-6",children:"Sign in"})]})]})}),s.jsxs(ut,{open:T,onClose:L>0?()=>F(!1):()=>{},children:[s.jsx(mt,{onClose:L>0?()=>F(!1):void 0,children:"Set up Multi-Factor Authentication"}),s.jsx(ht,{children:s.jsxs("div",{className:"space-y-4",children:[L<=0?s.jsx("div",{className:"rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:"You must enable MFA to continue."}):s.jsxs("p",{className:"text-sm text-text-secondary",children:["We recommend enabling MFA for enhanced security. You can skip up to ",L," more time(s)."]}),B?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-text-primary mb-2",children:"Scan with your authenticator app"}),s.jsx("div",{className:"flex justify-center p-4 bg-app rounded-lg",children:s.jsx(Dn,{value:B.otpauth_url,size:180})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-text-primary mb-1",children:"Manual entry secret"}),s.jsx("code",{className:"block text-xs bg-app p-2 rounded border border-border font-mono",children:B.secret})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Enter 6-digit code"}),s.jsx(Y,{type:"text",value:g,onChange:v=>f(v.target.value),placeholder:"123456",maxLength:6})]}),ee&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-text-primary mb-2",children:"Recovery codes (store securely)"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:ee.map(v=>s.jsx("code",{className:"text-xs bg-app p-2 rounded border border-border font-mono",children:v},v))})]})]}):s.jsx("p",{className:"text-sm text-text-muted",children:"Preparing enrollment..."})]})}),s.jsxs(ft,{children:[s.jsx(Q,{variant:"secondary",onClick:w,disabled:L<=0,children:"Skip for now"}),s.jsx(Q,{variant:"primary",onClick:j,disabled:!g||g.length<6,children:"Verify & Enable"})]})]})]})}ot.createRoot(document.getElementById("root")).render(s.jsx(Oe.StrictMode,{children:s.jsx(Ms,{children:s.jsx(un,{children:s.jsx($n,{})})})}))});export default Fn();
