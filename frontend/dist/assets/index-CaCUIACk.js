var js=Object.defineProperty,vs=Object.defineProperties;var ws=Object.getOwnPropertyDescriptors;var We=Object.getOwnPropertySymbols;var vt=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable;var Ce=(t,s)=>(s=Symbol[t])?s:Symbol.for("Symbol."+t),Ns=t=>{throw TypeError(t)};var jt=(t,s,n)=>s in t?js(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,F=(t,s)=>{for(var n in s||(s={}))vt.call(s,n)&&jt(t,n,s[n]);if(We)for(var n of We(s))wt.call(s,n)&&jt(t,n,s[n]);return t},U=(t,s)=>vs(t,ws(s));var rt=(t,s)=>{var n={};for(var r in t)vt.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&We)for(var r of We(t))s.indexOf(r)<0&&wt.call(t,r)&&(n[r]=t[r]);return n};var Cs=(t,s)=>()=>(s||t((s={exports:{}}).exports,s),s.exports);var H=(t,s,n)=>new Promise((r,a)=>{var d=i=>{try{h(n.next(i))}catch(o){a(o)}},u=i=>{try{h(n.throw(i))}catch(o){a(o)}},h=i=>i.done?r(i.value):Promise.resolve(i.value).then(d,u);h((n=n.apply(t,s)).next())}),pe=function(t,s){this[0]=t,this[1]=s},nt=(t,s,n)=>{var r=(u,h,i,o)=>{try{var l=n[u](h),c=(h=l.value)instanceof pe,f=l.done;Promise.resolve(c?h[0]:h).then(g=>c?r(u==="return"?u:"next",h[1]?{done:g.done,value:g.value}:g,i,o):i({value:g,done:f})).catch(g=>r("throw",g,i,o))}catch(g){o(g)}},a=u=>d[u]=h=>new Promise((i,o)=>r(u,h,i,o)),d={};return n=n.apply(t,s),d[Ce("asyncIterator")]=()=>d,a("next"),a("throw"),a("return"),d},at=t=>{var s=t[Ce("asyncIterator")],n=!1,r,a={};return s==null?(s=t[Ce("iterator")](),r=d=>a[d]=u=>s[d](u)):(s=s.call(t),r=d=>a[d]=u=>{if(n){if(n=!1,d==="throw")throw u;return u}return n=!0,{done:!1,value:new pe(new Promise(h=>{var i=s[d](u);i instanceof Object||Ns("Object expected"),h(i)}),1)}}),a[Ce("iterator")]=()=>a,r("next"),"throw"in s?r("throw"):a.throw=d=>{throw d},"return"in s&&r("return"),a},Nt=(t,s,n)=>(s=t[Ce("asyncIterator")])?s.call(t):(t=t[Ce("iterator")](),s={},n=(r,a)=>(a=t[r])&&(s[r]=d=>new Promise((u,h,i)=>(d=a.call(t,d),i=d.done,Promise.resolve(d.value).then(o=>u({value:o,done:i}),h)))),n("next"),n("return"),s);import{j as e}from"./mui-BpRHmZTB.js";import{a as _s,c as ks,g as Ss,r as _,u as Yt,L as Es,b as ke,d as Ms,R as Pe,e as As,f as ue,B as Rs}from"./vendor-BaIKwp6E.js";var $n=Cs(he=>{(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(a){if(a.ep)return;a.ep=!0;const d=n(a);fetch(a.href,d)}})();var dt={},Ct=_s;dt.createRoot=Ct.createRoot,dt.hydrateRoot=Ct.hydrateRoot;var Wt={exports:{}};(function(t,s){(function(n,r){t.exports=r()})(ks,function(){var n=1e3,r=6e4,a=36e5,d="millisecond",u="second",h="minute",i="hour",o="day",l="week",c="month",f="quarter",g="year",m="date",y="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(A){var k=["th","st","nd","rd"],v=A%100;return"["+A+(k[(v-20)%10]||k[v]||k[0])+"]"}},S=function(A,k,v){var w=String(A);return!w||w.length>=k?A:""+Array(k+1-w.length).join(v)+A},R={s:S,z:function(A){var k=-A.utcOffset(),v=Math.abs(k),w=Math.floor(v/60),x=v%60;return(k<=0?"+":"-")+S(w,2,"0")+":"+S(x,2,"0")},m:function A(k,v){if(k.date()<v.date())return-A(v,k);var w=12*(v.year()-k.year())+(v.month()-k.month()),x=k.clone().add(w,c),j=v-x<0,C=k.clone().add(w+(j?-1:1),c);return+(-(w+(v-x)/(j?x-C:C-x))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:c,y:g,w:l,d:o,D:m,h:i,m:h,s:u,ms:d,Q:f}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},O="en",I={};I[O]=E;var z="$isDayjsObject",se=function(A){return A instanceof X||!(!A||!A[z])},te=function A(k,v,w){var x;if(!k)return O;if(typeof k=="string"){var j=k.toLowerCase();I[j]&&(x=j),v&&(I[j]=v,x=j);var C=k.split("-");if(!x&&C.length>1)return A(C[0])}else{var N=k.name;I[N]=k,x=N}return!w&&x&&(O=x),x||!w&&O},$=function(A,k){if(se(A))return A.clone();var v=typeof k=="object"?k:{};return v.date=A,v.args=arguments,new X(v)},L=R;L.l=te,L.i=se,L.w=function(A,k){return $(A,{locale:k.$L,utc:k.$u,x:k.$x,$offset:k.$offset})};var X=function(){function A(v){this.$L=te(v.locale,null,!0),this.parse(v),this.$x=this.$x||v.x||{},this[z]=!0}var k=A.prototype;return k.parse=function(v){this.$d=function(w){var x=w.date,j=w.utc;if(x===null)return new Date(NaN);if(L.u(x))return new Date;if(x instanceof Date)return new Date(x);if(typeof x=="string"&&!/Z$/i.test(x)){var C=x.match(p);if(C){var N=C[2]-1||0,T=(C[7]||"0").substring(0,3);return j?new Date(Date.UTC(C[1],N,C[3]||1,C[4]||0,C[5]||0,C[6]||0,T)):new Date(C[1],N,C[3]||1,C[4]||0,C[5]||0,C[6]||0,T)}}return new Date(x)}(v),this.init()},k.init=function(){var v=this.$d;this.$y=v.getFullYear(),this.$M=v.getMonth(),this.$D=v.getDate(),this.$W=v.getDay(),this.$H=v.getHours(),this.$m=v.getMinutes(),this.$s=v.getSeconds(),this.$ms=v.getMilliseconds()},k.$utils=function(){return L},k.isValid=function(){return this.$d.toString()!==y},k.isSame=function(v,w){var x=$(v);return this.startOf(w)<=x&&x<=this.endOf(w)},k.isAfter=function(v,w){return $(v)<this.startOf(w)},k.isBefore=function(v,w){return this.endOf(w)<$(v)},k.$g=function(v,w,x){return L.u(v)?this[w]:this.set(x,v)},k.unix=function(){return Math.floor(this.valueOf()/1e3)},k.valueOf=function(){return this.$d.getTime()},k.startOf=function(v,w){var x=this,j=!!L.u(w)||w,C=L.p(v),N=function(xe,ae){var me=L.w(x.$u?Date.UTC(x.$y,ae,xe):new Date(x.$y,ae,xe),x);return j?me:me.endOf(o)},T=function(xe,ae){return L.w(x.toDate()[xe].apply(x.toDate("s"),(j?[0,0,0,0]:[23,59,59,999]).slice(ae)),x)},q=this.$W,J=this.$M,ne=this.$D,Ne="set"+(this.$u?"UTC":"");switch(C){case g:return j?N(1,0):N(31,11);case c:return j?N(1,J):N(0,J+1);case l:var fe=this.$locale().weekStart||0,Me=(q<fe?q+7:q)-fe;return N(j?ne-Me:ne+(6-Me),J);case o:case m:return T(Ne+"Hours",0);case i:return T(Ne+"Minutes",1);case h:return T(Ne+"Seconds",2);case u:return T(Ne+"Milliseconds",3);default:return this.clone()}},k.endOf=function(v){return this.startOf(v,!1)},k.$set=function(v,w){var x,j=L.p(v),C="set"+(this.$u?"UTC":""),N=(x={},x[o]=C+"Date",x[m]=C+"Date",x[c]=C+"Month",x[g]=C+"FullYear",x[i]=C+"Hours",x[h]=C+"Minutes",x[u]=C+"Seconds",x[d]=C+"Milliseconds",x)[j],T=j===o?this.$D+(w-this.$W):w;if(j===c||j===g){var q=this.clone().set(m,1);q.$d[N](T),q.init(),this.$d=q.set(m,Math.min(this.$D,q.daysInMonth())).$d}else N&&this.$d[N](T);return this.init(),this},k.set=function(v,w){return this.clone().$set(v,w)},k.get=function(v){return this[L.p(v)]()},k.add=function(v,w){var x,j=this;v=Number(v);var C=L.p(w),N=function(J){var ne=$(j);return L.w(ne.date(ne.date()+Math.round(J*v)),j)};if(C===c)return this.set(c,this.$M+v);if(C===g)return this.set(g,this.$y+v);if(C===o)return N(1);if(C===l)return N(7);var T=(x={},x[h]=r,x[i]=a,x[u]=n,x)[C]||1,q=this.$d.getTime()+v*T;return L.w(q,this)},k.subtract=function(v,w){return this.add(-1*v,w)},k.format=function(v){var w=this,x=this.$locale();if(!this.isValid())return x.invalidDate||y;var j=v||"YYYY-MM-DDTHH:mm:ssZ",C=L.z(this),N=this.$H,T=this.$m,q=this.$M,J=x.weekdays,ne=x.months,Ne=x.meridiem,fe=function(ae,me,Ae,Ye){return ae&&(ae[me]||ae(w,j))||Ae[me].slice(0,Ye)},Me=function(ae){return L.s(N%12||12,ae,"0")},xe=Ne||function(ae,me,Ae){var Ye=ae<12?"AM":"PM";return Ae?Ye.toLowerCase():Ye};return j.replace(M,function(ae,me){return me||function(Ae){switch(Ae){case"YY":return String(w.$y).slice(-2);case"YYYY":return L.s(w.$y,4,"0");case"M":return q+1;case"MM":return L.s(q+1,2,"0");case"MMM":return fe(x.monthsShort,q,ne,3);case"MMMM":return fe(ne,q);case"D":return w.$D;case"DD":return L.s(w.$D,2,"0");case"d":return String(w.$W);case"dd":return fe(x.weekdaysMin,w.$W,J,2);case"ddd":return fe(x.weekdaysShort,w.$W,J,3);case"dddd":return J[w.$W];case"H":return String(N);case"HH":return L.s(N,2,"0");case"h":return Me(1);case"hh":return Me(2);case"a":return xe(N,T,!0);case"A":return xe(N,T,!1);case"m":return String(T);case"mm":return L.s(T,2,"0");case"s":return String(w.$s);case"ss":return L.s(w.$s,2,"0");case"SSS":return L.s(w.$ms,3,"0");case"Z":return C}return null}(ae)||C.replace(":","")})},k.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},k.diff=function(v,w,x){var j,C=this,N=L.p(w),T=$(v),q=(T.utcOffset()-this.utcOffset())*r,J=this-T,ne=function(){return L.m(C,T)};switch(N){case g:j=ne()/12;break;case c:j=ne();break;case f:j=ne()/3;break;case l:j=(J-q)/6048e5;break;case o:j=(J-q)/864e5;break;case i:j=J/a;break;case h:j=J/r;break;case u:j=J/n;break;default:j=J}return x?j:L.a(j)},k.daysInMonth=function(){return this.endOf(c).$D},k.$locale=function(){return I[this.$L]},k.locale=function(v,w){if(!v)return this.$L;var x=this.clone(),j=te(v,w,!0);return j&&(x.$L=j),x},k.clone=function(){return L.w(this.$d,this)},k.toDate=function(){return new Date(this.valueOf())},k.toJSON=function(){return this.isValid()?this.toISOString():null},k.toISOString=function(){return this.$d.toISOString()},k.toString=function(){return this.$d.toUTCString()},A}(),W=X.prototype;return $.prototype=W,[["$ms",d],["$s",u],["$m",h],["$H",i],["$W",o],["$M",c],["$y",g],["$D",m]].forEach(function(A){W[A[1]]=function(k){return this.$g(k,A[0],A[1])}}),$.extend=function(A,k){return A.$i||(A(k,X,$),A.$i=!0),$},$.locale=te,$.isDayjs=se,$.unix=function(A){return $(1e3*A)},$.en=I[O],$.Ls=I,$.p={},$})})(Wt);var Os=Wt.exports;const P=Ss(Os);function qt(t,s){return function(){return t.apply(s,arguments)}}const{toString:Ls}=Object.prototype,{getPrototypeOf:xt}=Object,{iterator:Ge,toStringTag:Vt}=Symbol,Ze=(t=>s=>{const n=Ls.call(s);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ce=t=>(t=t.toLowerCase(),s=>Ze(s)===t),et=t=>s=>typeof s===t,{isArray:Se}=Array,_e=et("undefined");function Be(t){return t!==null&&!_e(t)&&t.constructor!==null&&!_e(t.constructor)&&ie(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Jt=ce("ArrayBuffer");function Ps(t){let s;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Jt(t.buffer),s}const Ds=et("string"),ie=et("function"),Qt=et("number"),Ue=t=>t!==null&&typeof t=="object",Ts=t=>t===!0||t===!1,Ve=t=>{if(Ze(t)!=="object")return!1;const s=xt(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Vt in t)&&!(Ge in t)},Fs=t=>{if(!Ue(t)||Be(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch(s){return!1}},Is=ce("Date"),$s=ce("File"),Bs=ce("Blob"),Us=ce("FileList"),zs=t=>Ue(t)&&ie(t.pipe),Hs=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||ie(t.append)&&((s=Ze(t))==="formdata"||s==="object"&&ie(t.toString)&&t.toString()==="[object FormData]"))},Ys=ce("URLSearchParams"),[Ws,qs,Vs,Js]=["ReadableStream","Request","Response","Headers"].map(ce),Qs=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ze(t,s,{allOwnKeys:n=!1}={}){if(t===null||typeof t=="undefined")return;let r,a;if(typeof t!="object"&&(t=[t]),Se(t))for(r=0,a=t.length;r<a;r++)s.call(null,t[r],r,t);else{if(Be(t))return;const d=n?Object.getOwnPropertyNames(t):Object.keys(t),u=d.length;let h;for(r=0;r<u;r++)h=d[r],s.call(null,t[h],h,t)}}function Kt(t,s){if(Be(t))return null;s=s.toLowerCase();const n=Object.keys(t);let r=n.length,a;for(;r-- >0;)if(a=n[r],s===a.toLowerCase())return a;return null}const ge=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,Xt=t=>!_e(t)&&t!==ge;function ut(){const{caseless:t,skipUndefined:s}=Xt(this)&&this||{},n={},r=(a,d)=>{const u=t&&Kt(n,d)||d;Ve(n[u])&&Ve(a)?n[u]=ut(n[u],a):Ve(a)?n[u]=ut({},a):Se(a)?n[u]=a.slice():(!s||!_e(a))&&(n[u]=a)};for(let a=0,d=arguments.length;a<d;a++)arguments[a]&&ze(arguments[a],r);return n}const Ks=(t,s,n,{allOwnKeys:r}={})=>(ze(s,(a,d)=>{n&&ie(a)?t[d]=qt(a,n):t[d]=a},{allOwnKeys:r}),t),Xs=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Gs=(t,s,n,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),n&&Object.assign(t.prototype,n)},Zs=(t,s,n,r)=>{let a,d,u;const h={};if(s=s||{},t==null)return s;do{for(a=Object.getOwnPropertyNames(t),d=a.length;d-- >0;)u=a[d],(!r||r(u,t,s))&&!h[u]&&(s[u]=t[u],h[u]=!0);t=n!==!1&&xt(t)}while(t&&(!n||n(t,s))&&t!==Object.prototype);return s},er=(t,s,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=s.length;const r=t.indexOf(s,n);return r!==-1&&r===n},tr=t=>{if(!t)return null;if(Se(t))return t;let s=t.length;if(!Qt(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=t[s];return n},sr=(t=>s=>t&&s instanceof t)(typeof Uint8Array!="undefined"&&xt(Uint8Array)),rr=(t,s)=>{const r=(t&&t[Ge]).call(t);let a;for(;(a=r.next())&&!a.done;){const d=a.value;s.call(t,d[0],d[1])}},nr=(t,s)=>{let n;const r=[];for(;(n=t.exec(s))!==null;)r.push(n);return r},ar=ce("HTMLFormElement"),ir=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),_t=(({hasOwnProperty:t})=>(s,n)=>t.call(s,n))(Object.prototype),or=ce("RegExp"),Gt=(t,s)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ze(n,(a,d)=>{let u;(u=s(a,d,t))!==!1&&(r[d]=u||a)}),Object.defineProperties(t,r)},lr=t=>{Gt(t,(s,n)=>{if(ie(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ie(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},cr=(t,s)=>{const n={},r=a=>{a.forEach(d=>{n[d]=!0})};return Se(t)?r(t):r(String(t).split(s)),n},dr=()=>{},ur=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function mr(t){return!!(t&&ie(t.append)&&t[Vt]==="FormData"&&t[Ge])}const hr=t=>{const s=new Array(10),n=(r,a)=>{if(Ue(r)){if(s.indexOf(r)>=0)return;if(Be(r))return r;if(!("toJSON"in r)){s[a]=r;const d=Se(r)?[]:{};return ze(r,(u,h)=>{const i=n(u,a+1);!_e(i)&&(d[h]=i)}),s[a]=void 0,d}}return r};return n(t,0)},fr=ce("AsyncFunction"),xr=t=>t&&(Ue(t)||ie(t))&&ie(t.then)&&ie(t.catch),Zt=((t,s)=>t?setImmediate:s?((n,r)=>(ge.addEventListener("message",({source:a,data:d})=>{a===ge&&d===n&&r.length&&r.shift()()},!1),a=>{r.push(a),ge.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ie(ge.postMessage)),pr=typeof queueMicrotask!="undefined"?queueMicrotask.bind(ge):typeof process!="undefined"&&process.nextTick||Zt,br=t=>t!=null&&ie(t[Ge]),b={isArray:Se,isArrayBuffer:Jt,isBuffer:Be,isFormData:Hs,isArrayBufferView:Ps,isString:Ds,isNumber:Qt,isBoolean:Ts,isObject:Ue,isPlainObject:Ve,isEmptyObject:Fs,isReadableStream:Ws,isRequest:qs,isResponse:Vs,isHeaders:Js,isUndefined:_e,isDate:Is,isFile:$s,isBlob:Bs,isRegExp:or,isFunction:ie,isStream:zs,isURLSearchParams:Ys,isTypedArray:sr,isFileList:Us,forEach:ze,merge:ut,extend:Ks,trim:Qs,stripBOM:Xs,inherits:Gs,toFlatObject:Zs,kindOf:Ze,kindOfTest:ce,endsWith:er,toArray:tr,forEachEntry:rr,matchAll:nr,isHTMLForm:ar,hasOwnProperty:_t,hasOwnProp:_t,reduceDescriptors:Gt,freezeMethods:lr,toObjectSet:cr,toCamelCase:ir,noop:dr,toFiniteNumber:ur,findKey:Kt,global:ge,isContextDefined:Xt,isSpecCompliantForm:mr,toJSONObject:hr,isAsyncFn:fr,isThenable:xr,setImmediate:Zt,asap:pr,isIterable:br};function D(t,s,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}b.inherits(D,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:b.toJSONObject(this.config),code:this.code,status:this.status}}});const es=D.prototype,ts={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ts[t]={value:t}});Object.defineProperties(D,ts);Object.defineProperty(es,"isAxiosError",{value:!0});D.from=(t,s,n,r,a,d)=>{const u=Object.create(es);b.toFlatObject(t,u,function(l){return l!==Error.prototype},o=>o!=="isAxiosError");const h=t&&t.message?t.message:"Error",i=s==null&&t?t.code:s;return D.call(u,h,i,n,r,a),t&&u.cause==null&&Object.defineProperty(u,"cause",{value:t,configurable:!0}),u.name=t&&t.name||"Error",d&&Object.assign(u,d),u};const gr=null;function mt(t){return b.isPlainObject(t)||b.isArray(t)}function ss(t){return b.endsWith(t,"[]")?t.slice(0,-2):t}function kt(t,s,n){return t?t.concat(s).map(function(a,d){return a=ss(a),!n&&d?"["+a+"]":a}).join(n?".":""):s}function yr(t){return b.isArray(t)&&!t.some(mt)}const jr=b.toFlatObject(b,{},null,function(s){return/^is[A-Z]/.test(s)});function tt(t,s,n){if(!b.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,n=b.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,p){return!b.isUndefined(p[y])});const r=n.metaTokens,a=n.visitor||l,d=n.dots,u=n.indexes,i=(n.Blob||typeof Blob!="undefined"&&Blob)&&b.isSpecCompliantForm(s);if(!b.isFunction(a))throw new TypeError("visitor must be a function");function o(m){if(m===null)return"";if(b.isDate(m))return m.toISOString();if(b.isBoolean(m))return m.toString();if(!i&&b.isBlob(m))throw new D("Blob is not supported. Use a Buffer instead.");return b.isArrayBuffer(m)||b.isTypedArray(m)?i&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function l(m,y,p){let M=m;if(m&&!p&&typeof m=="object"){if(b.endsWith(y,"{}"))y=r?y:y.slice(0,-2),m=JSON.stringify(m);else if(b.isArray(m)&&yr(m)||(b.isFileList(m)||b.endsWith(y,"[]"))&&(M=b.toArray(m)))return y=ss(y),M.forEach(function(S,R){!(b.isUndefined(S)||S===null)&&s.append(u===!0?kt([y],R,d):u===null?y:y+"[]",o(S))}),!1}return mt(m)?!0:(s.append(kt(p,y,d),o(m)),!1)}const c=[],f=Object.assign(jr,{defaultVisitor:l,convertValue:o,isVisitable:mt});function g(m,y){if(!b.isUndefined(m)){if(c.indexOf(m)!==-1)throw Error("Circular reference detected in "+y.join("."));c.push(m),b.forEach(m,function(M,E){(!(b.isUndefined(M)||M===null)&&a.call(s,M,b.isString(E)?E.trim():E,y,f))===!0&&g(M,y?y.concat(E):[E])}),c.pop()}}if(!b.isObject(t))throw new TypeError("data must be an object");return g(t),s}function St(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function pt(t,s){this._pairs=[],t&&tt(t,this,s)}const rs=pt.prototype;rs.append=function(s,n){this._pairs.push([s,n])};rs.toString=function(s){const n=s?function(r){return s.call(this,r,St)}:St;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function vr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ns(t,s,n){if(!s)return t;const r=n&&n.encode||vr;b.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let d;if(a?d=a(s,n):d=b.isURLSearchParams(s)?s.toString():new pt(s,n).toString(r),d){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+d}return t}class Et{constructor(){this.handlers=[]}use(s,n,r){return this.handlers.push({fulfilled:s,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){b.forEach(this.handlers,function(r){r!==null&&s(r)})}}const as={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},wr=typeof URLSearchParams!="undefined"?URLSearchParams:pt,Nr=typeof FormData!="undefined"?FormData:null,Cr=typeof Blob!="undefined"?Blob:null,_r={isBrowser:!0,classes:{URLSearchParams:wr,FormData:Nr,Blob:Cr},protocols:["http","https","file","blob","url","data"]},bt=typeof window!="undefined"&&typeof document!="undefined",ht=typeof navigator=="object"&&navigator||void 0,kr=bt&&(!ht||["ReactNative","NativeScript","NS"].indexOf(ht.product)<0),Sr=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Er=bt&&window.location.href||"http://localhost",Mr=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bt,hasStandardBrowserEnv:kr,hasStandardBrowserWebWorkerEnv:Sr,navigator:ht,origin:Er},Symbol.toStringTag,{value:"Module"})),re=F(F({},Mr),_r);function Ar(t,s){return tt(t,new re.classes.URLSearchParams,F({visitor:function(n,r,a,d){return re.isNode&&b.isBuffer(n)?(this.append(r,n.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},s))}function Rr(t){return b.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function Or(t){const s={},n=Object.keys(t);let r;const a=n.length;let d;for(r=0;r<a;r++)d=n[r],s[d]=t[d];return s}function is(t){function s(n,r,a,d){let u=n[d++];if(u==="__proto__")return!0;const h=Number.isFinite(+u),i=d>=n.length;return u=!u&&b.isArray(a)?a.length:u,i?(b.hasOwnProp(a,u)?a[u]=[a[u],r]:a[u]=r,!h):((!a[u]||!b.isObject(a[u]))&&(a[u]=[]),s(n,r,a[u],d)&&b.isArray(a[u])&&(a[u]=Or(a[u])),!h)}if(b.isFormData(t)&&b.isFunction(t.entries)){const n={};return b.forEachEntry(t,(r,a)=>{s(Rr(r),a,n,0)}),n}return null}function Lr(t,s,n){if(b.isString(t))try{return(s||JSON.parse)(t),b.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const He={transitional:as,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,d=b.isObject(s);if(d&&b.isHTMLForm(s)&&(s=new FormData(s)),b.isFormData(s))return a?JSON.stringify(is(s)):s;if(b.isArrayBuffer(s)||b.isBuffer(s)||b.isStream(s)||b.isFile(s)||b.isBlob(s)||b.isReadableStream(s))return s;if(b.isArrayBufferView(s))return s.buffer;if(b.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let h;if(d){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Ar(s,this.formSerializer).toString();if((h=b.isFileList(s))||r.indexOf("multipart/form-data")>-1){const i=this.env&&this.env.FormData;return tt(h?{"files[]":s}:s,i&&new i,this.formSerializer)}}return d||a?(n.setContentType("application/json",!1),Lr(s)):s}],transformResponse:[function(s){const n=this.transitional||He.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(b.isResponse(s)||b.isReadableStream(s))return s;if(s&&b.isString(s)&&(r&&!this.responseType||a)){const u=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(s,this.parseReviver)}catch(h){if(u)throw h.name==="SyntaxError"?D.from(h,D.ERR_BAD_RESPONSE,this,null,this.response):h}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:re.classes.FormData,Blob:re.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};b.forEach(["delete","get","head","post","put","patch"],t=>{He.headers[t]={}});const Pr=b.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Dr=t=>{const s={};let n,r,a;return t&&t.split(`
`).forEach(function(u){a=u.indexOf(":"),n=u.substring(0,a).trim().toLowerCase(),r=u.substring(a+1).trim(),!(!n||s[n]&&Pr[n])&&(n==="set-cookie"?s[n]?s[n].push(r):s[n]=[r]:s[n]=s[n]?s[n]+", "+r:r)}),s},Mt=Symbol("internals");function Re(t){return t&&String(t).trim().toLowerCase()}function Je(t){return t===!1||t==null?t:b.isArray(t)?t.map(Je):String(t)}function Tr(t){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)s[r[1]]=r[2];return s}const Fr=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function it(t,s,n,r,a){if(b.isFunction(r))return r.call(this,s,n);if(a&&(s=n),!!b.isString(s)){if(b.isString(r))return s.indexOf(r)!==-1;if(b.isRegExp(r))return r.test(s)}}function Ir(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,r)=>n.toUpperCase()+r)}function $r(t,s){const n=b.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(a,d,u){return this[r].call(this,s,a,d,u)},configurable:!0})})}let oe=class{constructor(s){s&&this.set(s)}set(s,n,r){const a=this;function d(h,i,o){const l=Re(i);if(!l)throw new Error("header name must be a non-empty string");const c=b.findKey(a,l);(!c||a[c]===void 0||o===!0||o===void 0&&a[c]!==!1)&&(a[c||i]=Je(h))}const u=(h,i)=>b.forEach(h,(o,l)=>d(o,l,i));if(b.isPlainObject(s)||s instanceof this.constructor)u(s,n);else if(b.isString(s)&&(s=s.trim())&&!Fr(s))u(Dr(s),n);else if(b.isObject(s)&&b.isIterable(s)){let h={},i,o;for(const l of s){if(!b.isArray(l))throw TypeError("Object iterator must return a key-value pair");h[o=l[0]]=(i=h[o])?b.isArray(i)?[...i,l[1]]:[i,l[1]]:l[1]}u(h,n)}else s!=null&&d(n,s,r);return this}get(s,n){if(s=Re(s),s){const r=b.findKey(this,s);if(r){const a=this[r];if(!n)return a;if(n===!0)return Tr(a);if(b.isFunction(n))return n.call(this,a,r);if(b.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=Re(s),s){const r=b.findKey(this,s);return!!(r&&this[r]!==void 0&&(!n||it(this,this[r],r,n)))}return!1}delete(s,n){const r=this;let a=!1;function d(u){if(u=Re(u),u){const h=b.findKey(r,u);h&&(!n||it(r,r[h],h,n))&&(delete r[h],a=!0)}}return b.isArray(s)?s.forEach(d):d(s),a}clear(s){const n=Object.keys(this);let r=n.length,a=!1;for(;r--;){const d=n[r];(!s||it(this,this[d],d,s,!0))&&(delete this[d],a=!0)}return a}normalize(s){const n=this,r={};return b.forEach(this,(a,d)=>{const u=b.findKey(r,d);if(u){n[u]=Je(a),delete n[d];return}const h=s?Ir(d):String(d).trim();h!==d&&delete n[d],n[h]=Je(a),r[h]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return b.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=s&&b.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const r=new this(s);return n.forEach(a=>r.set(a)),r}static accessor(s){const r=(this[Mt]=this[Mt]={accessors:{}}).accessors,a=this.prototype;function d(u){const h=Re(u);r[h]||($r(a,u),r[h]=!0)}return b.isArray(s)?s.forEach(d):d(s),this}};oe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);b.reduceDescriptors(oe.prototype,({value:t},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[n]=r}}});b.freezeMethods(oe);function ot(t,s){const n=this||He,r=s||n,a=oe.from(r.headers);let d=r.data;return b.forEach(t,function(h){d=h.call(n,d,a.normalize(),s?s.status:void 0)}),a.normalize(),d}function os(t){return!!(t&&t.__CANCEL__)}function Ee(t,s,n){D.call(this,t==null?"canceled":t,D.ERR_CANCELED,s,n),this.name="CanceledError"}b.inherits(Ee,D,{__CANCEL__:!0});function ls(t,s,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):s(new D("Request failed with status code "+n.status,[D.ERR_BAD_REQUEST,D.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Br(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function Ur(t,s){t=t||10;const n=new Array(t),r=new Array(t);let a=0,d=0,u;return s=s!==void 0?s:1e3,function(i){const o=Date.now(),l=r[d];u||(u=o),n[a]=i,r[a]=o;let c=d,f=0;for(;c!==a;)f+=n[c++],c=c%t;if(a=(a+1)%t,a===d&&(d=(d+1)%t),o-u<s)return;const g=l&&o-l;return g?Math.round(f*1e3/g):void 0}}function zr(t,s){let n=0,r=1e3/s,a,d;const u=(o,l=Date.now())=>{n=l,a=null,d&&(clearTimeout(d),d=null),t(...o)};return[(...o)=>{const l=Date.now(),c=l-n;c>=r?u(o,l):(a=o,d||(d=setTimeout(()=>{d=null,u(a)},r-c)))},()=>a&&u(a)]}const Ke=(t,s,n=3)=>{let r=0;const a=Ur(50,250);return zr(d=>{const u=d.loaded,h=d.lengthComputable?d.total:void 0,i=u-r,o=a(i),l=u<=h;r=u;const c={loaded:u,total:h,progress:h?u/h:void 0,bytes:i,rate:o||void 0,estimated:o&&h&&l?(h-u)/o:void 0,event:d,lengthComputable:h!=null,[s?"download":"upload"]:!0};t(c)},n)},At=(t,s)=>{const n=t!=null;return[r=>s[0]({lengthComputable:n,total:t,loaded:r}),s[1]]},Rt=t=>(...s)=>b.asap(()=>t(...s)),Hr=re.hasStandardBrowserEnv?((t,s)=>n=>(n=new URL(n,re.origin),t.protocol===n.protocol&&t.host===n.host&&(s||t.port===n.port)))(new URL(re.origin),re.navigator&&/(msie|trident)/i.test(re.navigator.userAgent)):()=>!0,Yr=re.hasStandardBrowserEnv?{write(t,s,n,r,a,d,u){if(typeof document=="undefined")return;const h=[`${t}=${encodeURIComponent(s)}`];b.isNumber(n)&&h.push(`expires=${new Date(n).toUTCString()}`),b.isString(r)&&h.push(`path=${r}`),b.isString(a)&&h.push(`domain=${a}`),d===!0&&h.push("secure"),b.isString(u)&&h.push(`SameSite=${u}`),document.cookie=h.join("; ")},read(t){if(typeof document=="undefined")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Wr(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function qr(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function cs(t,s,n){let r=!Wr(s);return t&&(r||n==!1)?qr(t,s):s}const Ot=t=>t instanceof oe?F({},t):t;function je(t,s){s=s||{};const n={};function r(o,l,c,f){return b.isPlainObject(o)&&b.isPlainObject(l)?b.merge.call({caseless:f},o,l):b.isPlainObject(l)?b.merge({},l):b.isArray(l)?l.slice():l}function a(o,l,c,f){if(b.isUndefined(l)){if(!b.isUndefined(o))return r(void 0,o,c,f)}else return r(o,l,c,f)}function d(o,l){if(!b.isUndefined(l))return r(void 0,l)}function u(o,l){if(b.isUndefined(l)){if(!b.isUndefined(o))return r(void 0,o)}else return r(void 0,l)}function h(o,l,c){if(c in s)return r(o,l);if(c in t)return r(void 0,o)}const i={url:d,method:d,data:d,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:h,headers:(o,l,c)=>a(Ot(o),Ot(l),c,!0)};return b.forEach(Object.keys(F(F({},t),s)),function(l){const c=i[l]||a,f=c(t[l],s[l],l);b.isUndefined(f)&&c!==h||(n[l]=f)}),n}const ds=t=>{const s=je({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:d,headers:u,auth:h}=s;if(s.headers=u=oe.from(u),s.url=ns(cs(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&u.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),b.isFormData(n)){if(re.hasStandardBrowserEnv||re.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(b.isFunction(n.getHeaders)){const i=n.getHeaders(),o=["content-type","content-length"];Object.entries(i).forEach(([l,c])=>{o.includes(l.toLowerCase())&&u.set(l,c)})}}if(re.hasStandardBrowserEnv&&(r&&b.isFunction(r)&&(r=r(s)),r||r!==!1&&Hr(s.url))){const i=a&&d&&Yr.read(d);i&&u.set(a,i)}return s},Vr=typeof XMLHttpRequest!="undefined",Jr=Vr&&function(t){return new Promise(function(n,r){const a=ds(t);let d=a.data;const u=oe.from(a.headers).normalize();let{responseType:h,onUploadProgress:i,onDownloadProgress:o}=a,l,c,f,g,m;function y(){g&&g(),m&&m(),a.cancelToken&&a.cancelToken.unsubscribe(l),a.signal&&a.signal.removeEventListener("abort",l)}let p=new XMLHttpRequest;p.open(a.method.toUpperCase(),a.url,!0),p.timeout=a.timeout;function M(){if(!p)return;const S=oe.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),O={data:!h||h==="text"||h==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:S,config:t,request:p};ls(function(z){n(z),y()},function(z){r(z),y()},O),p=null}"onloadend"in p?p.onloadend=M:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(M)},p.onabort=function(){p&&(r(new D("Request aborted",D.ECONNABORTED,t,p)),p=null)},p.onerror=function(R){const O=R&&R.message?R.message:"Network Error",I=new D(O,D.ERR_NETWORK,t,p);I.event=R||null,r(I),p=null},p.ontimeout=function(){let R=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const O=a.transitional||as;a.timeoutErrorMessage&&(R=a.timeoutErrorMessage),r(new D(R,O.clarifyTimeoutError?D.ETIMEDOUT:D.ECONNABORTED,t,p)),p=null},d===void 0&&u.setContentType(null),"setRequestHeader"in p&&b.forEach(u.toJSON(),function(R,O){p.setRequestHeader(O,R)}),b.isUndefined(a.withCredentials)||(p.withCredentials=!!a.withCredentials),h&&h!=="json"&&(p.responseType=a.responseType),o&&([f,m]=Ke(o,!0),p.addEventListener("progress",f)),i&&p.upload&&([c,g]=Ke(i),p.upload.addEventListener("progress",c),p.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(l=S=>{p&&(r(!S||S.type?new Ee(null,t,p):S),p.abort(),p=null)},a.cancelToken&&a.cancelToken.subscribe(l),a.signal&&(a.signal.aborted?l():a.signal.addEventListener("abort",l)));const E=Br(a.url);if(E&&re.protocols.indexOf(E)===-1){r(new D("Unsupported protocol "+E+":",D.ERR_BAD_REQUEST,t));return}p.send(d||null)})},Qr=(t,s)=>{const{length:n}=t=t?t.filter(Boolean):[];if(s||n){let r=new AbortController,a;const d=function(o){if(!a){a=!0,h();const l=o instanceof Error?o:this.reason;r.abort(l instanceof D?l:new Ee(l instanceof Error?l.message:l))}};let u=s&&setTimeout(()=>{u=null,d(new D(`timeout ${s} of ms exceeded`,D.ETIMEDOUT))},s);const h=()=>{t&&(u&&clearTimeout(u),u=null,t.forEach(o=>{o.unsubscribe?o.unsubscribe(d):o.removeEventListener("abort",d)}),t=null)};t.forEach(o=>o.addEventListener("abort",d));const{signal:i}=r;return i.unsubscribe=()=>b.asap(h),i}},Kr=function*(t,s){let n=t.byteLength;if(n<s){yield t;return}let r=0,a;for(;r<n;)a=r+s,yield t.slice(r,a),r=a},Xr=function(t,s){return nt(this,null,function*(){try{for(var n=Nt(Gr(t)),r,a,d;r=!(a=yield new pe(n.next())).done;r=!1){const u=a.value;yield*at(Kr(u,s))}}catch(a){d=[a]}finally{try{r&&(a=n.return)&&(yield new pe(a.call(n)))}finally{if(d)throw d[0]}}})},Gr=function(t){return nt(this,null,function*(){if(t[Symbol.asyncIterator]){yield*at(t);return}const s=t.getReader();try{for(;;){const{done:n,value:r}=yield new pe(s.read());if(n)break;yield r}}finally{yield new pe(s.cancel())}})},Lt=(t,s,n,r)=>{const a=Xr(t,s);let d=0,u,h=o=>{u||(u=!0,r&&r(o))};return new ReadableStream({pull(o){return H(this,null,function*(){try{const{done:l,value:c}=yield a.next();if(l){h(),o.close();return}let f=c.byteLength;if(n){let g=d+=f;n(g)}o.enqueue(new Uint8Array(c))}catch(l){throw h(l),l}})},cancel(o){return h(o),a.return()}},{highWaterMark:2})},Pt=64*1024,{isFunction:qe}=b,Zr=(({Request:t,Response:s})=>({Request:t,Response:s}))(b.global),{ReadableStream:Dt,TextEncoder:Tt}=b.global,Ft=(t,...s)=>{try{return!!t(...s)}catch(n){return!1}},en=t=>{t=b.merge.call({skipUndefined:!0},Zr,t);const{fetch:s,Request:n,Response:r}=t,a=s?qe(s):typeof fetch=="function",d=qe(n),u=qe(r);if(!a)return!1;const h=a&&qe(Dt),i=a&&(typeof Tt=="function"?(m=>y=>m.encode(y))(new Tt):m=>H(he,null,function*(){return new Uint8Array(yield new n(m).arrayBuffer())})),o=d&&h&&Ft(()=>{let m=!1;const y=new n(re.origin,{body:new Dt,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!y}),l=u&&h&&Ft(()=>b.isReadableStream(new r("").body)),c={stream:l&&(m=>m.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!c[m]&&(c[m]=(y,p)=>{let M=y&&y[m];if(M)return M.call(y);throw new D(`Response type '${m}' is not supported`,D.ERR_NOT_SUPPORT,p)})});const f=m=>H(he,null,function*(){if(m==null)return 0;if(b.isBlob(m))return m.size;if(b.isSpecCompliantForm(m))return(yield new n(re.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(b.isArrayBufferView(m)||b.isArrayBuffer(m))return m.byteLength;if(b.isURLSearchParams(m)&&(m=m+""),b.isString(m))return(yield i(m)).byteLength}),g=(m,y)=>H(he,null,function*(){const p=b.toFiniteNumber(m.getContentLength());return p==null?f(y):p});return m=>H(he,null,function*(){let{url:y,method:p,data:M,signal:E,cancelToken:S,timeout:R,onDownloadProgress:O,onUploadProgress:I,responseType:z,headers:se,withCredentials:te="same-origin",fetchOptions:$}=ds(m),L=s||fetch;z=z?(z+"").toLowerCase():"text";let X=Qr([E,S&&S.toAbortSignal()],R),W=null;const A=X&&X.unsubscribe&&(()=>{X.unsubscribe()});let k;try{if(I&&o&&p!=="get"&&p!=="head"&&(k=yield g(se,M))!==0){let N=new n(y,{method:"POST",body:M,duplex:"half"}),T;if(b.isFormData(M)&&(T=N.headers.get("content-type"))&&se.setContentType(T),N.body){const[q,J]=At(k,Ke(Rt(I)));M=Lt(N.body,Pt,q,J)}}b.isString(te)||(te=te?"include":"omit");const v=d&&"credentials"in n.prototype,w=U(F({},$),{signal:X,method:p.toUpperCase(),headers:se.normalize().toJSON(),body:M,duplex:"half",credentials:v?te:void 0});W=d&&new n(y,w);let x=yield d?L(W,$):L(y,w);const j=l&&(z==="stream"||z==="response");if(l&&(O||j&&A)){const N={};["status","statusText","headers"].forEach(ne=>{N[ne]=x[ne]});const T=b.toFiniteNumber(x.headers.get("content-length")),[q,J]=O&&At(T,Ke(Rt(O),!0))||[];x=new r(Lt(x.body,Pt,q,()=>{J&&J(),A&&A()}),N)}z=z||"text";let C=yield c[b.findKey(c,z)||"text"](x,m);return!j&&A&&A(),yield new Promise((N,T)=>{ls(N,T,{data:C,headers:oe.from(x.headers),status:x.status,statusText:x.statusText,config:m,request:W})})}catch(v){throw A&&A(),v&&v.name==="TypeError"&&/Load failed|fetch/i.test(v.message)?Object.assign(new D("Network Error",D.ERR_NETWORK,m,W),{cause:v.cause||v}):D.from(v,v&&v.code,m,W)}})},tn=new Map,us=t=>{let s=t&&t.env||{};const{fetch:n,Request:r,Response:a}=s,d=[r,a,n];let u=d.length,h=u,i,o,l=tn;for(;h--;)i=d[h],o=l.get(i),o===void 0&&l.set(i,o=h?new Map:en(s)),l=o;return o};us();const gt={http:gr,xhr:Jr,fetch:{get:us}};b.forEach(gt,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch(n){}Object.defineProperty(t,"adapterName",{value:s})}});const It=t=>`- ${t}`,sn=t=>b.isFunction(t)||t===null||t===!1;function rn(t,s){t=b.isArray(t)?t:[t];const{length:n}=t;let r,a;const d={};for(let u=0;u<n;u++){r=t[u];let h;if(a=r,!sn(r)&&(a=gt[(h=String(r)).toLowerCase()],a===void 0))throw new D(`Unknown adapter '${h}'`);if(a&&(b.isFunction(a)||(a=a.get(s))))break;d[h||"#"+u]=a}if(!a){const u=Object.entries(d).map(([i,o])=>`adapter ${i} `+(o===!1?"is not supported by the environment":"is not available in the build"));let h=n?u.length>1?`since :
`+u.map(It).join(`
`):" "+It(u[0]):"as no adapter specified";throw new D("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return a}const ms={getAdapter:rn,adapters:gt};function lt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ee(null,t)}function $t(t){return lt(t),t.headers=oe.from(t.headers),t.data=ot.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ms.getAdapter(t.adapter||He.adapter,t)(t).then(function(r){return lt(t),r.data=ot.call(t,t.transformResponse,r),r.headers=oe.from(r.headers),r},function(r){return os(r)||(lt(t),r&&r.response&&(r.response.data=ot.call(t,t.transformResponse,r.response),r.response.headers=oe.from(r.response.headers))),Promise.reject(r)})}const hs="1.13.2",st={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{st[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const Bt={};st.transitional=function(s,n,r){function a(d,u){return"[Axios v"+hs+"] Transitional option '"+d+"'"+u+(r?". "+r:"")}return(d,u,h)=>{if(s===!1)throw new D(a(u," has been removed"+(n?" in "+n:"")),D.ERR_DEPRECATED);return n&&!Bt[u]&&(Bt[u]=!0,console.warn(a(u," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(d,u,h):!0}};st.spelling=function(s){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function nn(t,s,n){if(typeof t!="object")throw new D("options must be an object",D.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let a=r.length;for(;a-- >0;){const d=r[a],u=s[d];if(u){const h=t[d],i=h===void 0||u(h,d,t);if(i!==!0)throw new D("option "+d+" must be "+i,D.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new D("Unknown option "+d,D.ERR_BAD_OPTION)}}const Qe={assertOptions:nn,validators:st},de=Qe.validators;let ye=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Et,response:new Et}}request(s,n){return H(this,null,function*(){try{return yield this._request(s,n)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const d=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?d&&!String(r.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+d):r.stack=d}catch(u){}}throw r}})}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=je(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:d}=n;r!==void 0&&Qe.assertOptions(r,{silentJSONParsing:de.transitional(de.boolean),forcedJSONParsing:de.transitional(de.boolean),clarifyTimeoutError:de.transitional(de.boolean)},!1),a!=null&&(b.isFunction(a)?n.paramsSerializer={serialize:a}:Qe.assertOptions(a,{encode:de.function,serialize:de.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Qe.assertOptions(n,{baseUrl:de.spelling("baseURL"),withXsrfToken:de.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=d&&b.merge(d.common,d[n.method]);d&&b.forEach(["delete","get","head","post","put","patch","common"],m=>{delete d[m]}),n.headers=oe.concat(u,d);const h=[];let i=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(i=i&&y.synchronous,h.unshift(y.fulfilled,y.rejected))});const o=[];this.interceptors.response.forEach(function(y){o.push(y.fulfilled,y.rejected)});let l,c=0,f;if(!i){const m=[$t.bind(this),void 0];for(m.unshift(...h),m.push(...o),f=m.length,l=Promise.resolve(n);c<f;)l=l.then(m[c++],m[c++]);return l}f=h.length;let g=n;for(;c<f;){const m=h[c++],y=h[c++];try{g=m(g)}catch(p){y.call(this,p);break}}try{l=$t.call(this,g)}catch(m){return Promise.reject(m)}for(c=0,f=o.length;c<f;)l=l.then(o[c++],o[c++]);return l}getUri(s){s=je(this.defaults,s);const n=cs(s.baseURL,s.url,s.allowAbsoluteUrls);return ns(n,s.params,s.paramsSerializer)}};b.forEach(["delete","get","head","options"],function(s){ye.prototype[s]=function(n,r){return this.request(je(r||{},{method:s,url:n,data:(r||{}).data}))}});b.forEach(["post","put","patch"],function(s){function n(r){return function(d,u,h){return this.request(je(h||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:d,data:u}))}}ye.prototype[s]=n(),ye.prototype[s+"Form"]=n(!0)});let an=class fs{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(d){n=d});const r=this;this.promise.then(a=>{if(!r._listeners)return;let d=r._listeners.length;for(;d-- >0;)r._listeners[d](a);r._listeners=null}),this.promise.then=a=>{let d;const u=new Promise(h=>{r.subscribe(h),d=h}).then(a);return u.cancel=function(){r.unsubscribe(d)},u},s(function(d,u,h){r.reason||(r.reason=new Ee(d,u,h),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=r=>{s.abort(r)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new fs(function(a){s=a}),cancel:s}}};function on(t){return function(n){return t.apply(null,n)}}function ln(t){return b.isObject(t)&&t.isAxiosError===!0}const ft={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ft).forEach(([t,s])=>{ft[s]=t});function xs(t){const s=new ye(t),n=qt(ye.prototype.request,s);return b.extend(n,ye.prototype,s,{allOwnKeys:!0}),b.extend(n,s,null,{allOwnKeys:!0}),n.create=function(a){return xs(je(t,a))},n}const K=xs(He);K.Axios=ye;K.CanceledError=Ee;K.CancelToken=an;K.isCancel=os;K.VERSION=hs;K.toFormData=tt;K.AxiosError=D;K.Cancel=K.CanceledError;K.all=function(s){return Promise.all(s)};K.spread=on;K.isAxiosError=ln;K.mergeConfig=je;K.AxiosHeaders=oe;K.formToJSON=t=>is(b.isHTMLForm(t)?new FormData(t):t);K.getAdapter=ms.getAdapter;K.HttpStatusCode=ft;K.default=K;const{Axios:Wn,AxiosError:qn,CanceledError:Vn,isCancel:Jn,CancelToken:Qn,VERSION:Kn,all:Xn,Cancel:Gn,isAxiosError:Zn,spread:ea,toFormData:ta,AxiosHeaders:sa,HttpStatusCode:ra,formToJSON:na,getAdapter:aa,mergeConfig:ia}=K,cn="/api",dn=cn,B=K.create({baseURL:dn});B.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers=U(F({},t.headers),{Authorization:`Bearer ${s}`})),t});B.interceptors.response.use(t=>t,t=>{var n;return((n=t==null?void 0:t.response)==null?void 0:n.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("name"),localStorage.removeItem("userId"),typeof window!="undefined"&&window.location.pathname!=="/"&&window.location.assign("/")),Promise.reject(t)});const ps=_.createContext(void 0),un=({children:t})=>{const[s,n]=_.useState({token:null,role:null,name:null,userId:null,user:null,mustChangePassword:!1,ready:!1});_.useEffect(()=>{H(he,null,function*(){const h=localStorage.getItem("token"),i=localStorage.getItem("role"),o=localStorage.getItem("name"),l=localStorage.getItem("userId");if(h)try{const c=yield B.get("/auth/me",{headers:{Authorization:`Bearer ${h}`}}),f=c.data.role;localStorage.setItem("role",f),localStorage.setItem("name",c.data.full_name),localStorage.setItem("userId",c.data.id),n({token:h,role:f,name:c.data.full_name,userId:c.data.id,user:c.data,mustChangePassword:!!c.data.must_change_password,ready:!0});return}catch(c){localStorage.clear(),n({token:null,role:null,name:null,userId:null,user:null,mustChangePassword:!1,ready:!0});return}(i||o||l)&&localStorage.clear(),n({token:null,role:null,name:null,userId:null,user:null,mustChangePassword:!1,ready:!0})})},[]);const r=()=>H(he,null,function*(){const u=localStorage.getItem("token");if(!u)return;const h=yield B.get("/auth/me",{headers:{Authorization:`Bearer ${u}`}}),i=h.data.role;localStorage.setItem("role",i),localStorage.setItem("name",h.data.full_name),localStorage.setItem("userId",h.data.id),n({token:u,role:i,name:h.data.full_name,userId:h.data.id,mustChangePassword:!!h.data.must_change_password,ready:!0})}),a=(u,h,i,o)=>H(he,null,function*(){const l=yield B.post("/auth/token",{email:u,password:h,mfa_code:i,recovery_code:o}),c=l.data.access_token;localStorage.setItem("token",c);const f=yield B.get("/auth/me",{headers:{Authorization:`Bearer ${c}`}}),g=f.data.role;return localStorage.setItem("role",g),localStorage.setItem("name",f.data.full_name),localStorage.setItem("userId",f.data.id),n({token:c,role:g,name:f.data.full_name,userId:f.data.id,user:f.data,mustChangePassword:!!f.data.must_change_password,ready:!0}),l.data}),d=()=>{localStorage.clear(),n({token:null,role:null,name:null,userId:null,user:null,mustChangePassword:!1,ready:!0})};return e.jsx(ps.Provider,{value:U(F({},s),{login:a,logout:d,refreshMe:r}),children:t})},we=()=>{const t=_.useContext(ps);if(!t)throw new Error("useAuth must be used within AuthProvider");return t};function be({to:t,icon:s,label:n,badge:r}){const d=Yt().pathname===t;return e.jsxs(Es,{to:t,className:`flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition ${d?"bg-app text-text-primary":"text-text-secondary hover:bg-app hover:text-text-primary"}`,children:[e.jsx("span",{className:"h-5 w-5",children:s}),e.jsx("span",{className:"flex-1",children:n}),r!==void 0&&r>0&&e.jsx("span",{className:"ml-auto inline-flex h-5 min-w-5 items-center justify-center rounded-full bg-app px-1 text-[11px] font-semibold text-text-secondary border border-border",children:r})]})}function mn(){var n,r,a;const{user:t,logout:s}=we();return e.jsxs("div",{className:"fixed inset-y-0 left-0 w-64 bg-surface border-r border-border px-6 py-6 flex flex-col gap-6 overflow-y-auto scrollbar-thin",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-brand flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"C"})}),e.jsx("span",{className:"text-lg font-semibold text-text-primary",children:"Compass"})]}),e.jsxs("nav",{className:"flex flex-col gap-1",children:[e.jsx(be,{to:"/",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),label:"Dashboard"}),e.jsx(be,{to:"/tasks",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),label:"My Tasks"}),e.jsx(be,{to:"/complaints",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),label:"Complaints"}),e.jsx(be,{to:"/create",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),label:"New Complaint"}),(t==null?void 0:t.role)!=="read_only"&&e.jsx(be,{to:"/reference",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),label:"Reference Data"}),((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="complaints_manager")&&e.jsx(be,{to:"/users",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),label:"Users"}),e.jsx(be,{to:"/settings",icon:e.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),label:"Settings"})]}),e.jsxs("div",{className:"mt-auto pt-6 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3 px-2",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-brand flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:((r=(n=t==null?void 0:t.full_name)==null?void 0:n.charAt(0))==null?void 0:r.toUpperCase())||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary truncate",children:(t==null?void 0:t.full_name)||"User"}),e.jsx("div",{className:"text-xs text-text-secondary truncate capitalize",children:((a=t==null?void 0:t.role)==null?void 0:a.replace(/_/g," "))||"User"})]})]}),e.jsxs("button",{onClick:s,className:"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium text-text-secondary hover:bg-app hover:text-text-primary transition",children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{children:"Sign out"})]})]})]})}function hn({children:t}){return e.jsxs("div",{className:"min-h-screen bg-app text-text-primary",children:[e.jsx(mn,{}),e.jsx("div",{className:"ml-64 min-h-screen flex flex-col",children:t})]})}function Y(d){var u=d,{variant:t="primary",size:s="md",className:n="",children:r}=u,a=rt(u,["variant","size","className","children"]);const h="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-offset-2 focus-visible:ring-offset-app disabled:opacity-40 disabled:pointer-events-none",i={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm"},o={primary:"bg-brand text-white hover:opacity-90 active:translate-y-px",secondary:"bg-surface text-text-primary border border-border hover:bg-app active:translate-y-px",ghost:"bg-transparent text-text-primary hover:bg-app active:translate-y-px",icon:"h-10 w-10 p-0 rounded-full hover:bg-app active:translate-y-px"};return e.jsx("button",U(F({className:`${h} ${i[s]} ${o[t]} ${n}`},a),{children:r}))}function V(a){var d=a,{error:t,leadingIcon:s,className:n=""}=d,r=rt(d,["error","leadingIcon","className"]);const u="w-full h-10 rounded-lg border bg-surface px-3 text-sm text-text-primary placeholder:text-text-muted outline-none transition",h=t?"border-semantic-error focus:border-semantic-error focus:ring-2 focus:ring-semantic-error/15":"border-border focus:border-brand focus:ring-2 focus:ring-brand/15",i=s?"pl-10":"px-3";return e.jsxs("div",{className:"relative",children:[s&&e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-text-muted",children:s}),e.jsx("input",F({className:`${u} ${h} ${i} ${n}`},r))]})}function Q({children:t,className:s="",onClick:n,selected:r,inverse:a}){const d="rounded-card border shadow-card p-4",u=a?"bg-brand text-white border-transparent":"bg-surface text-text-primary border-border",h=r?"ring-2 ring-brand/15":"",i=n?"cursor-pointer hover:shadow-sm active:translate-y-px transition":"";return e.jsx("div",{className:`${d} ${u} ${h} ${i} ${s}`,onClick:n,children:t})}function Z({children:t,className:s=""}){return e.jsx("div",{className:`flex items-start justify-between gap-3 ${s}`,children:t})}function ee({children:t,className:s="",inverse:n}){const r=n?"text-white":"text-text-primary";return e.jsx("h3",{className:`text-sm font-semibold ${r} ${s}`,children:t})}function G({children:t,className:s="",inverse:n}){const r=n?"text-white/80":"text-text-secondary";return e.jsx("div",{className:`mt-2 text-xs leading-relaxed ${r} ${s}`,children:t})}function Te({open:t,onClose:s,children:n}){return _.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:s}),e.jsx("div",{className:"fixed left-1/2 top-1/2 w-[min(560px,calc(100%-2rem))] -translate-x-1/2 -translate-y-1/2 rounded-modal border border-border bg-surface p-6 shadow-xl z-50",children:n})]}):null}function Fe({children:t,onClose:s}){return e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:t}),s&&e.jsx("button",{onClick:s,className:"inline-flex h-8 w-8 items-center justify-center rounded-full text-text-muted hover:bg-app hover:text-text-primary transition",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function Ie({children:t}){return e.jsx("div",{className:"text-sm text-text-secondary",children:t})}function $e({children:t}){return e.jsx("div",{className:"mt-6 flex justify-end gap-3",children:t})}function fn({children:t,className:s=""}){return e.jsx("div",{className:`overflow-hidden rounded-card border border-border bg-surface ${s}`,children:e.jsx("table",{className:"w-full table-auto",children:t})})}function xn({children:t}){return e.jsx("thead",{className:"bg-app",children:t})}function pn({children:t}){return e.jsx("tbody",{children:t})}function Ut({children:t,onClick:s,className:n=""}){const r=s?"cursor-pointer hover:bg-app/60":"hover:bg-app/60";return e.jsx("tr",{className:`border-t border-border ${r} ${n}`,onClick:s,children:t})}function Oe({children:t,className:s=""}){return e.jsx("th",{className:`h-10 px-4 text-left text-xs font-semibold text-text-secondary ${s}`,children:t})}function Le({children:t,className:s=""}){return e.jsx("td",{className:`h-12 px-4 text-sm text-text-primary ${s}`,children:t})}function ct({value:t,onChange:s,options:n,placeholder:r,className:a=""}){const[d,u]=_.useState(!1),[h,i]=_.useState(t),[o,l]=_.useState(0),c=_.useRef(null),f=_.useRef(null);_.useEffect(()=>{i(t)},[t]);const g=n.filter(E=>E.toLowerCase().includes(h.toLowerCase()));_.useEffect(()=>{const E=S=>{f.current&&!f.current.contains(S.target)&&c.current&&!c.current.contains(S.target)&&(u(!1),s(h))};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[h,s]);const m=E=>{const S=E.target.value;i(S),u(!0),l(0)},y=E=>{var S;i(E),s(E),u(!1),(S=c.current)==null||S.blur()},p=E=>{var S;if(!d&&(E.key==="ArrowDown"||E.key==="ArrowUp")){u(!0);return}if(d)switch(E.key){case"ArrowDown":E.preventDefault(),l(R=>R<g.length-1?R+1:R);break;case"ArrowUp":E.preventDefault(),l(R=>R>0?R-1:0);break;case"Enter":E.preventDefault(),g[o]&&y(g[o]);break;case"Escape":E.preventDefault(),u(!1),(S=c.current)==null||S.blur();break}},M=()=>{setTimeout(()=>{var E;(E=f.current)!=null&&E.contains(document.activeElement)||(u(!1),s(h))},200)};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:c,type:"text",value:h,onChange:m,onFocus:()=>u(!0),onBlur:M,onKeyDown:p,placeholder:r,className:`w-full h-10 rounded-lg border border-border bg-surface pl-3 pr-10 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15 ${a}`}),e.jsx("button",{type:"button",onClick:()=>{var E;u(!d),(E=c.current)==null||E.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition",children:e.jsx("svg",{className:`h-4 w-4 transition-transform ${d?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})})]}),d&&g.length>0&&e.jsx("div",{ref:f,className:"absolute z-50 mt-1 w-full rounded-lg border border-border bg-surface shadow-lg max-h-60 overflow-auto scrollbar-thin",children:g.map((E,S)=>e.jsx("button",{type:"button",onClick:()=>y(E),onMouseEnter:()=>l(S),className:`w-full text-left px-3 py-2 text-sm transition ${S===o?"bg-app text-text-primary":"text-text-secondary hover:bg-app hover:text-text-primary"}`,children:E},E))}),d&&h&&g.length===0&&e.jsx("div",{ref:f,className:"absolute z-50 mt-1 w-full rounded-lg border border-border bg-surface shadow-lg p-3",children:e.jsxs("p",{className:"text-sm text-text-secondary",children:['No matches found. Type to create "',h,'"']})})]})}function le({title:t,actions:s}){return e.jsxs("div",{className:"h-16 px-10 flex items-center justify-between gap-6 bg-app border-b border-border",children:[t?e.jsx("h1",{className:"text-2xl font-semibold text-text-primary",children:t}):e.jsx("div",{className:"w-full max-w-md",children:e.jsx(V,{type:"search",placeholder:"Search complaints...",leadingIcon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),e.jsx("div",{className:"flex items-center gap-3",children:s})]})}function bn(){const t=ke(),{userId:s,token:n}=we(),[r,a]=_.useState(null),[d,u]=_.useState([]),[h,i]=_.useState("mine"),[o,l]=_.useState(!1);_.useEffect(()=>{n&&B.get("/complaints/metrics",{params:{_:Date.now()}}).then(f=>a(f.data)).catch(f=>{var g;((g=f==null?void 0:f.response)==null?void 0:g.status)!==401&&console.error("Failed to load dashboard metrics",f)})},[n]),_.useEffect(()=>{if(!s||!n)return;H(this,null,function*(){var g;l(!0);try{let m=[];h==="mine"?m=((yield B.get("/complaints",{params:{handler_id:s,page:1,page_size:50,_:Date.now()}})).data||[]).filter(p=>p.status!=="Closed"):h==="unassigned"?m=((yield B.get("/complaints",{params:{page:1,page_size:100,_:Date.now()}})).data||[]).filter(p=>p.status!=="Closed").filter(p=>!p.assigned_handler_id):h==="breached"?m=((yield B.get("/complaints",{params:{overdue:!0,page:1,page_size:100,_:Date.now()}})).data||[]).filter(p=>p.status!=="Closed"):h==="oldest"&&(m=((yield B.get("/complaints",{params:{page:1,page_size:100,_:Date.now()}})).data||[]).filter(p=>p.status!=="Closed"),m.sort((p,M)=>P(p.received_at).valueOf()-P(M.received_at).valueOf()),m=m.slice(0,20)),u(m)}catch(m){if(((g=m==null?void 0:m.response)==null?void 0:g.status)===401)return;console.error("Failed to load queue",m)}finally{l(!1)}})},[s,n,h]);const c=f=>f===null?"N/A":`${Math.round(f)}%`;return e.jsxs(e.Fragment,{children:[e.jsx(le,{actions:e.jsxs(Y,{variant:"primary",onClick:()=>t("/create"),children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"New Complaint"]})}),e.jsxs("div",{className:"px-10 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"Open Cases"}),e.jsx("div",{className:"mt-3 text-3xl font-semibold text-text-primary",children:(r==null?void 0:r.kpis.open)||0}),e.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"Total open complaints"})]}),e.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"My Open"}),e.jsx("div",{className:"mt-3 text-3xl font-semibold text-text-primary",children:(r==null?void 0:r.kpis.my_open)||0}),e.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"Assigned to me"})]}),e.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"SLA Breaches"}),e.jsx("div",{className:"mt-3 text-3xl font-semibold text-semantic-error",children:(r==null?void 0:r.kpis.open_sla_breaches)||0}),e.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"Open breaches"})]}),e.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"Stale (21d+)"}),e.jsx("div",{className:"mt-3 text-3xl font-semibold text-semantic-warning",children:(r==null?void 0:r.kpis.open_stale_21d)||0}),e.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"No activity"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Acknowledgement SLA (30d)"})}),e.jsx(G,{children:e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-text-secondary",children:"On-time rate"}),e.jsx("span",{className:"text-sm font-semibold text-text-primary",children:c((r==null?void 0:r.sla_30d.ack.on_time_pct)||null)})]}),e.jsx("div",{className:"w-full h-2 bg-app rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-semantic-success",style:{width:`${(r==null?void 0:r.sla_30d.ack.on_time_pct)||0}%`}})}),e.jsxs("div",{className:"mt-2 text-xs text-text-muted",children:[(r==null?void 0:r.sla_30d.ack.on_time)||0," / ",(r==null?void 0:r.sla_30d.ack.total)||0," on time"]})]})})]}),e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Final Response SLA (30d)"})}),e.jsx(G,{children:e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-text-secondary",children:"On-time rate"}),e.jsx("span",{className:"text-sm font-semibold text-text-primary",children:c((r==null?void 0:r.sla_30d.final.on_time_pct)||null)})]}),e.jsx("div",{className:"w-full h-2 bg-app rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-semantic-success",style:{width:`${(r==null?void 0:r.sla_30d.final.on_time_pct)||0}%`}})}),e.jsxs("div",{className:"mt-2 text-xs text-text-muted",children:[(r==null?void 0:r.sla_30d.final.on_time)||0," / ",(r==null?void 0:r.sla_30d.final.total)||0," on time"]})]})})]})]}),e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"My Queue"})}),e.jsx("div",{className:"mt-4 border-b border-border",children:e.jsx("div",{className:"flex gap-1 px-4",children:["mine","unassigned","breached","oldest"].map(f=>e.jsx("button",{onClick:()=>i(f),className:`px-4 py-2 text-sm font-medium capitalize transition border-b-2 ${h===f?"border-brand text-text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:f},f))})}),e.jsx("div",{className:"p-4",children:o?e.jsx("div",{className:"text-center py-8 text-text-muted",children:"Loading..."}):d.length===0?e.jsx("div",{className:"text-center py-8 text-text-muted",children:"No complaints in this queue"}):e.jsx("div",{className:"space-y-2",children:d.map(f=>e.jsxs("div",{onClick:()=>t(`/complaints/${f.id}`),className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-app cursor-pointer transition",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary truncate",children:f.reference}),e.jsx("div",{className:"text-xs text-text-secondary truncate mt-1",children:f.description||"No description"})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-4",children:[e.jsx("span",{className:"text-xs text-text-muted whitespace-nowrap",children:P(f.received_at).format("MMM D")}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium ${f.status==="New"?"bg-semantic-info/10 text-semantic-info":f.status==="Acknowledged"?"bg-semantic-success/10 text-semantic-success":"bg-app text-text-secondary"}`,children:f.status})]})]},f.id))})})]})]})]})}function yt({status:t,className:s=""}){const n=r=>{switch(r){case"New":return"bg-semantic-info/10 text-semantic-info border-semantic-info/20";case"Acknowledged":return"bg-semantic-success/10 text-semantic-success border-semantic-success/20";case"In Investigation":return"bg-blue-50 text-blue-700 border-blue-200";case"Response Drafted":return"bg-purple-50 text-purple-700 border-purple-200";case"Awaiting Customer":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"Escalated":return"bg-semantic-warning/10 text-semantic-warning border-semantic-warning/20";case"Closed":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-app text-text-secondary border-border"}};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium border ${n(t)} ${s}`,children:t})}function gn(){const t=ke(),[s,n]=_.useState([]),[r,a]=_.useState(!0),[d,u]=_.useState("");_.useEffect(()=>{B.get("/complaints",{params:{page:1,page_size:100}}).then(i=>{n(i.data||[]),a(!1)}).catch(i=>{console.error("Failed to load complaints",i),a(!1)})},[]);const h=s.filter(i=>{var o;return i.reference.toLowerCase().includes(d.toLowerCase())||((o=i.description)==null?void 0:o.toLowerCase().includes(d.toLowerCase()))});return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Complaints"}),e.jsxs("div",{className:"px-10 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-full max-w-md",children:e.jsx(V,{type:"search",placeholder:"Search complaints...",value:d,onChange:i=>u(i.target.value),leadingIcon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),e.jsxs(Y,{variant:"primary",onClick:()=>t("/create"),children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"New Complaint"]})]}),r?e.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading complaints..."}):e.jsxs(fn,{children:[e.jsx(xn,{children:e.jsxs(Ut,{children:[e.jsx(Oe,{children:"Reference"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Description"}),e.jsx(Oe,{children:"Received"}),e.jsx(Oe,{children:"Handler"})]})}),e.jsx(pn,{children:h.map(i=>e.jsxs(Ut,{onClick:()=>t(`/complaints/${i.id}`),children:[e.jsx(Le,{children:e.jsx("span",{className:"font-semibold",children:i.reference})}),e.jsx(Le,{children:e.jsx(yt,{status:i.status})}),e.jsx(Le,{children:e.jsx("span",{className:"truncate max-w-md block",children:i.description||"No description"})}),e.jsx(Le,{children:e.jsx("span",{className:"text-text-muted",children:P(i.received_at).format("MMM D, YYYY")})}),e.jsx(Le,{children:e.jsx("span",{className:"text-text-muted",children:i.assigned_handler_name||"Unassigned"})})]},i.id))})]}),!r&&h.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-sm font-semibold text-text-primary",children:"No complaints found"}),e.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:"Try adjusting your search"})]})]})]})}function yn(){const{id:t}=Ms(),s=ke(),{user:n}=we(),[r,a]=_.useState(null),[d,u]=_.useState(!0),[h,i]=_.useState("overview"),[o,l]=_.useState([]),[c,f]=_.useState(!1),[g,m]=_.useState(""),[y,p]=_.useState(!1),[M,E]=_.useState(null),[S,R]=_.useState(!1),[O,I]=_.useState({channel:"Email",direction:"Inbound",summary:"",occurred_at:P().format("YYYY-MM-DDTHH:mm"),is_final_response:!1}),[z,se]=_.useState(null),[te,$]=_.useState(!1),[L,X]=_.useState(null);_.useEffect(()=>{t&&(W(),A())},[t]);const W=()=>{u(!0),B.get(`/complaints/${t}`).then(x=>{a(x.data),u(!1)}).catch(x=>{console.error("Failed to load complaint",x),u(!1)})},A=()=>{B.get("/users").then(x=>{const j=x.data.filter(C=>C.is_active&&["admin","complaints_handler","complaints_manager","reviewer"].includes(C.role));l(j)}).catch(x=>{console.error("Failed to load users",x)})},k=()=>H(this,null,function*(){var x,j;if(!(!t||!n)){p(!0),E(null);try{yield B.post(`/complaints/${t}/assign`,null,{params:{handler_id:n.id}}),W()}catch(C){E(((j=(x=C==null?void 0:C.response)==null?void 0:x.data)==null?void 0:j.detail)||"Failed to assign complaint")}finally{p(!1)}}}),v=()=>H(this,null,function*(){var x,j;if(!(!t||!g)){p(!0),E(null);try{yield B.post(`/complaints/${t}/assign`,null,{params:{handler_id:g}}),f(!1),m(""),W()}catch(C){E(((j=(x=C==null?void 0:C.response)==null?void 0:x.data)==null?void 0:j.detail)||"Failed to assign complaint")}finally{p(!1)}}}),w=()=>H(this,null,function*(){var x,j;if(!(!t||!O.summary)){$(!0),X(null);try{const C=new FormData;C.append("channel",O.channel),C.append("direction",O.direction),C.append("summary",O.summary),C.append("occurred_at",P(O.occurred_at).toISOString()),C.append("is_final_response",O.is_final_response.toString()),z&&Array.from(z).forEach(N=>{C.append("files",N)}),yield B.post(`/complaints/${t}/communications`,C,{headers:{"Content-Type":"multipart/form-data"}}),R(!1),I({channel:"Email",direction:"Inbound",summary:"",occurred_at:P().format("YYYY-MM-DDTHH:mm"),is_final_response:!1}),se(null),W()}catch(C){X(((j=(x=C==null?void 0:C.response)==null?void 0:x.data)==null?void 0:j.detail)||"Failed to add communication")}finally{$(!1)}}});return d?e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Loading..."}),e.jsx("div",{className:"px-10 py-6",children:e.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading complaint details..."})})]}):r?e.jsxs(e.Fragment,{children:[e.jsx(le,{title:r.reference,actions:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yt,{status:r.status}),e.jsx(Y,{variant:"secondary",onClick:()=>s("/complaints"),children:"Back"})]})}),e.jsxs("div",{className:"px-10 py-6",children:[e.jsx("div",{className:"border-b border-border mb-6",children:e.jsx("div",{className:"flex gap-1",children:["overview","communications","outcome","history"].map(x=>e.jsx("button",{onClick:()=>i(x),className:`px-4 py-3 text-sm font-medium capitalize transition border-b-2 ${h===x?"border-brand text-text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:x},x))})}),h==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Complaint Details"})}),e.jsx(G,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.description||"No description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Category"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.category||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Reason"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.reason||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Product"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.product||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Scheme"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.scheme||"N/A"})]})]})]})})]}),r.complainant&&e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Complainant"})}),e.jsx(G,{children:e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx("p",{className:"text-sm text-text-primary font-medium",children:r.complainant.full_name}),r.complainant.email&&e.jsx("p",{className:"text-sm text-text-secondary",children:r.complainant.email}),r.complainant.phone&&e.jsx("p",{className:"text-sm text-text-secondary",children:r.complainant.phone})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Timeline"})}),e.jsx(G,{children:e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Received"}),e.jsx("p",{className:"text-sm text-text-primary",children:P(r.received_at).format("MMM D, YYYY h:mm A")})]}),r.acknowledged_at&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Acknowledged"}),e.jsx("p",{className:"text-sm text-text-primary",children:P(r.acknowledged_at).format("MMM D, YYYY h:mm A")})]}),r.closed_at&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Closed"}),e.jsx("p",{className:"text-sm text-text-primary",children:P(r.closed_at).format("MMM D, YYYY h:mm A")})]})]})})]}),e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Assignment"})}),e.jsx(G,{children:e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Current Handler"}),e.jsx("p",{className:"text-sm text-text-primary font-semibold",children:r.assigned_handler_name||"Unassigned"})]}),(n==null?void 0:n.role)!=="read_only"&&e.jsxs("div",{className:"space-y-2 pt-2 border-t border-border",children:[(!r.assigned_handler_id||r.assigned_handler_id!==(n==null?void 0:n.id))&&e.jsxs(Y,{variant:"secondary",size:"sm",onClick:k,disabled:y,className:"w-full",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Assign to Me"]}),((n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="complaints_manager"||(n==null?void 0:n.role)==="reviewer")&&e.jsxs(Y,{variant:"secondary",size:"sm",onClick:()=>f(!0),disabled:y,className:"w-full",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Assign to User"]})]})]})})]})]})]}),h==="communications"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Communications"}),e.jsxs(Y,{variant:"primary",onClick:()=>R(!0),children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Add Communication"]})]}),r.communications&&r.communications.length>0?e.jsx("div",{className:"space-y-4",children:r.communications.sort((x,j)=>P(j.occurred_at).valueOf()-P(x.occurred_at).valueOf()).map(x=>e.jsx(Q,{children:e.jsxs(G,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-app text-text-primary border border-border",children:x.channel}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium ${x.direction==="Inbound"?"bg-semantic-info/10 text-semantic-info":"bg-semantic-success/10 text-semantic-success"}`,children:x.direction}),x.is_final_response&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-semantic-warning/10 text-semantic-warning border border-semantic-warning/20",children:"Final Response"})]}),e.jsx("span",{className:"text-xs text-text-muted",children:P(x.occurred_at).format("MMM D, YYYY h:mm A")})]}),e.jsx("p",{className:"text-sm text-text-primary mt-2",children:x.summary}),x.attachments&&x.attachments.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:x.attachments.map(j=>e.jsxs("a",{href:j.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1 rounded-lg bg-app text-text-primary hover:bg-border text-xs transition",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),j.file_name]},j.id))})]})},x.id))}):e.jsxs("div",{className:"text-center py-12 rounded-lg border border-border bg-surface",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),e.jsx("p",{className:"mt-4 text-sm font-semibold text-text-primary",children:"No communications yet"}),e.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:'Click "Add Communication" to log your first interaction'})]})]}),h==="outcome"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Outcome"})}),e.jsx(G,{children:r.outcome?e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Outcome Type"}),e.jsx("p",{className:"text-sm text-text-primary capitalize",children:r.outcome.outcome.replace(/_/g," ")})]}),r.outcome.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm text-text-secondary",children:r.outcome.notes})]})]}):e.jsx("p",{className:"text-sm text-text-secondary mt-4",children:"No outcome recorded yet"})})]}),e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Redress Payments"})}),e.jsx(G,{children:r.redress_payments&&r.redress_payments.length>0?e.jsx("div",{className:"space-y-4 mt-4",children:r.redress_payments.map(x=>e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-surface",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-text-primary capitalize",children:x.payment_type.replace(/_/g," ")}),x.amount&&e.jsxs("p",{className:"text-lg font-bold text-text-primary mt-1",children:["",x.amount.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium ${x.status==="paid"?"bg-semantic-success/10 text-semantic-success":x.status==="authorised"?"bg-semantic-warning/10 text-semantic-warning":"bg-app text-text-primary border border-border"}`,children:x.status.charAt(0).toUpperCase()+x.status.slice(1)}),x.approved&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-semantic-success/10 text-semantic-success border border-semantic-success/20",children:[e.jsx("svg",{className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Approved"]})]})]}),x.rationale&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Rationale"}),e.jsx("p",{className:"text-sm text-text-secondary",children:x.rationale})]}),x.action_description&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Action"}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("p",{className:"text-sm text-text-secondary flex-1",children:x.action_description}),x.action_status&&e.jsx("span",{className:`ml-3 inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium capitalize ${x.action_status==="completed"?"bg-semantic-success/10 text-semantic-success":x.action_status==="in_progress"?"bg-semantic-info/10 text-semantic-info":"bg-app text-text-muted border border-border"}`,children:x.action_status.replace(/_/g," ")})]})]}),x.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm text-text-secondary",children:x.notes})]})]},x.id))}):e.jsxs("div",{className:"text-center py-12 mt-4",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"mt-4 text-sm font-semibold text-text-primary",children:"No redress payments"}),e.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:"No redress payments have been recorded for this complaint"})]})})]})]}),h==="history"&&e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Activity History"})}),e.jsx(G,{children:r.events&&r.events.length>0?e.jsx("div",{className:"space-y-0 mt-4",children:r.events.sort((x,j)=>P(j.created_at).valueOf()-P(x.created_at).valueOf()).map(x=>{const j=N=>N==="created"?"":N==="accessed"?"":N==="updated"?"":N==="acknowledged"?"":N==="investigation_started"?"":N==="response_drafted"?"":N==="outcome_recorded"?"":N==="final_response_issued"?"":N==="closed"?"":N==="closed_non_reportable"?"":N==="reopened"?"":N==="escalated"?"":N==="assigned"?"":N==="referred_to_fos"?"":N==="communication_added"?"":N==="redress_added"||N==="redress_updated"?"":"",C=N=>N.split("_").map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" ");return e.jsxs("div",{className:"flex gap-4 py-3 border-b border-border last:border-0 hover:bg-surface/50 transition px-3 -mx-3 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 text-lg pt-0.5",children:j(x.event_type)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-text-primary",children:C(x.event_type)}),x.description&&e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:x.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[x.created_by_name&&e.jsxs("span",{className:"text-xs text-text-muted",children:["by ",x.created_by_name]}),e.jsx("span",{className:"text-xs text-text-muted",children:P(x.created_at).format("MMM D, YYYY [at] h:mm A")})]})]})})})]},x.id)})}):e.jsxs("div",{className:"text-center py-12 mt-4",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"mt-4 text-sm font-semibold text-text-primary",children:"No history events recorded"})]})})]})]}),e.jsxs(Te,{open:c,onClose:()=>f(!1),children:[e.jsx(Fe,{onClose:()=>f(!1),children:"Assign Complaint"}),e.jsxs(Ie,{children:[M&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:M}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Select Handler *"}),e.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:g,onChange:x=>m(x.target.value),children:[e.jsx("option",{value:"",children:"-- Select a user --"}),o.map(x=>e.jsxs("option",{value:x.id,children:[x.full_name," (",x.role.replace(/_/g," "),")"]},x.id))]})]})})]}),e.jsxs($e,{children:[e.jsx(Y,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),e.jsx(Y,{variant:"primary",onClick:v,disabled:!g||y,children:y?"Assigning...":"Assign"})]})]}),e.jsxs(Te,{open:S,onClose:()=>R(!1),children:[e.jsx(Fe,{onClose:()=>R(!1),children:"Add Communication"}),e.jsxs(Ie,{children:[L&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:L}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Channel *"}),e.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:O.channel,onChange:x=>I(U(F({},O),{channel:x.target.value})),children:[e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"Letter",children:"Letter"}),e.jsx("option",{value:"In Person",children:"In Person"}),e.jsx("option",{value:"Web Form",children:"Web Form"}),e.jsx("option",{value:"Social Media",children:"Social Media"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Direction *"}),e.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:O.direction,onChange:x=>I(U(F({},O),{direction:x.target.value})),children:[e.jsx("option",{value:"Inbound",children:"Inbound"}),e.jsx("option",{value:"Outbound",children:"Outbound"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Date & Time *"}),e.jsx(V,{type:"datetime-local",value:O.occurred_at,onChange:x=>I(U(F({},O),{occurred_at:x.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Summary *"}),e.jsx("textarea",{className:"w-full min-h-[100px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:O.summary,onChange:x=>I(U(F({},O),{summary:x.target.value})),placeholder:"Describe the communication..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Attachments"}),e.jsx("input",{type:"file",multiple:!0,onChange:x=>se(x.target.files),className:"w-full text-sm text-text-primary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-brand file:text-white hover:file:opacity-90 cursor-pointer"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:O.is_final_response,onChange:()=>I(U(F({},O),{is_final_response:!O.is_final_response})),className:"h-4 w-4 rounded border-border text-brand focus:ring-2 focus:ring-brand/15"}),e.jsx("span",{className:"text-sm font-medium text-text-primary",children:"Mark as Final Response"})]})]})]}),e.jsxs($e,{children:[e.jsx(Y,{variant:"secondary",onClick:()=>R(!1),children:"Cancel"}),e.jsx(Y,{variant:"primary",onClick:w,disabled:!O.summary||te,children:te?"Adding...":"Add Communication"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Not Found"}),e.jsx("div",{className:"px-10 py-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-sm font-semibold text-text-primary",children:"Complaint not found"}),e.jsx(Y,{variant:"secondary",onClick:()=>s("/complaints"),className:"mt-4",children:"Back to Complaints"})]})})]})}function jn(){const t=ke(),[s,n]=_.useState(!1),[r,a]=_.useState(null),[d,u]=_.useState([]),[h,i]=_.useState([]),[o,l]=_.useState([]);_.useEffect(()=>{Promise.all([B.get("/reference/products"),B.get("/reference/insurers"),B.get("/reference/brokers")]).then(([m,y,p])=>{u(m.data.map(M=>M.name)),i(y.data.map(M=>M.name)),l(p.data.map(M=>M.name))}).catch(m=>{console.error("Failed to load reference data",m)})},[]);const[c,f]=_.useState({source:"Email",received_at:P().format("YYYY-MM-DDTHH:mm"),description:"",category:"",reason:"",vulnerability_flag:!1,vulnerability_notes:"",policy_number:"",insurer:"",broker:"",product:"",scheme:"",complainant_name:"",complainant_email:"",complainant_phone:"",complainant_address:"",complainant_dob:""}),g=m=>H(this,null,function*(){var y,p;m.preventDefault(),a(null),n(!0);try{const M=yield B.post("/complaints",{source:c.source,received_at:P(c.received_at).toISOString(),description:c.description,category:c.category,reason:c.reason||null,fca_complaint:!0,fca_rationale:null,vulnerability_flag:c.vulnerability_flag,vulnerability_notes:c.vulnerability_notes||null,policy_number:c.policy_number||null,insurer:c.insurer||null,broker:c.broker||null,product:c.product||null,scheme:c.scheme||null,complainant:{full_name:c.complainant_name,email:c.complainant_email||null,phone:c.complainant_phone||null,address:c.complainant_address||null,date_of_birth:c.complainant_dob||null},policy:{policy_number:c.policy_number||null,insurer:c.insurer||null,broker:c.broker||null,product:c.product||null,scheme:c.scheme||null}});t(`/complaints/${M.data.id}`)}catch(M){a(((p=(y=M==null?void 0:M.response)==null?void 0:y.data)==null?void 0:p.detail)||"Failed to create complaint"),n(!1)}});return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Create New Complaint"}),e.jsxs("div",{className:"px-10 py-6 max-w-4xl",children:[r&&e.jsx("div",{className:"mb-6 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:r}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Receipt Information"})}),e.jsx(G,{children:e.jsx("div",{className:"space-y-4 mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Source *"}),e.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:c.source,onChange:m=>f(U(F({},c),{source:m.target.value})),required:!0,children:[e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"Letter",children:"Letter"}),e.jsx("option",{value:"Web Form",children:"Web Form"}),e.jsx("option",{value:"In Person",children:"In Person"}),e.jsx("option",{value:"Social Media",children:"Social Media"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Date Received *"}),e.jsx(V,{type:"datetime-local",value:c.received_at,onChange:m=>f(U(F({},c),{received_at:m.target.value})),required:!0})]})]})})})]}),e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Complainant Details"})}),e.jsx(G,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Full Name *"}),e.jsx(V,{value:c.complainant_name,onChange:m=>f(U(F({},c),{complainant_name:m.target.value})),placeholder:"John Doe",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Email"}),e.jsx(V,{type:"email",value:c.complainant_email,onChange:m=>f(U(F({},c),{complainant_email:m.target.value})),placeholder:"john@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Phone"}),e.jsx(V,{value:c.complainant_phone,onChange:m=>f(U(F({},c),{complainant_phone:m.target.value})),placeholder:"+44 20 1234 5678"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Date of Birth"}),e.jsx(V,{type:"date",value:c.complainant_dob,onChange:m=>f(U(F({},c),{complainant_dob:m.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Address"}),e.jsx(V,{value:c.complainant_address,onChange:m=>f(U(F({},c),{complainant_address:m.target.value})),placeholder:"Full address..."})]})]}),e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.vulnerability_flag,onChange:()=>f(U(F({},c),{vulnerability_flag:!c.vulnerability_flag})),className:"h-4 w-4 rounded border-border text-brand focus:ring-2 focus:ring-brand/15"}),e.jsx("span",{className:"text-sm font-medium text-text-primary",children:"Vulnerable Customer"})]}),c.vulnerability_flag&&e.jsxs("div",{className:"pl-7 space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Vulnerability Notes"}),e.jsx("textarea",{className:"w-full min-h-[80px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:c.vulnerability_notes,onChange:m=>f(U(F({},c),{vulnerability_notes:m.target.value})),placeholder:"Details about vulnerability..."})]})]})})]})})]}),e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Complaint Details"})}),e.jsx(G,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Description *"}),e.jsx("textarea",{className:"w-full min-h-[120px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:c.description,onChange:m=>f(U(F({},c),{description:m.target.value})),placeholder:"Detailed description of the complaint...",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Category *"}),e.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:c.category,onChange:m=>f(U(F({},c),{category:m.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select category..."}),e.jsx("option",{value:"Claims",children:"Claims"}),e.jsx("option",{value:"Policy",children:"Policy"}),e.jsx("option",{value:"Service",children:"Service"}),e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Communication",children:"Communication"}),e.jsx("option",{value:"Sales",children:"Sales"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Reason"}),e.jsx(V,{value:c.reason,onChange:m=>f(U(F({},c),{reason:m.target.value})),placeholder:"Specific reason..."})]})]})]})})]}),e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Policy Information"})}),e.jsx(G,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Policy Number"}),e.jsx(V,{value:c.policy_number,onChange:m=>f(U(F({},c),{policy_number:m.target.value})),placeholder:"POL-12345"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Product"}),e.jsx(ct,{value:c.product,onChange:m=>f(U(F({},c),{product:m})),options:d,placeholder:"Select or type product..."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Insurer"}),e.jsx(ct,{value:c.insurer,onChange:m=>f(U(F({},c),{insurer:m})),options:h,placeholder:"Select or type insurer..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Broker"}),e.jsx(ct,{value:c.broker,onChange:m=>f(U(F({},c),{broker:m})),options:o,placeholder:"Select or type broker..."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Scheme"}),e.jsx(V,{value:c.scheme,onChange:m=>f(U(F({},c),{scheme:m.target.value})),placeholder:"Scheme name..."})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 sticky bottom-6 bg-app/95 backdrop-blur-sm p-4 rounded-lg border border-border",children:[e.jsx(Y,{variant:"secondary",onClick:()=>t("/complaints"),type:"button",children:"Cancel"}),e.jsx(Y,{variant:"primary",type:"submit",disabled:s,children:s?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Complaint"})]})]})]})]})}function vn(){const t=ke(),{user:s}=we(),[n,r]=_.useState(!0),[a,d]=_.useState([]);_.useEffect(()=>{u()},[]);const u=()=>H(this,null,function*(){r(!0);try{const o=(yield B.get("/complaints")).data.filter(p=>p.assigned_handler_id===(s==null?void 0:s.id)&&p.status!=="Closed"),l=o.filter(p=>(p.status==="New"||p.status==="Reopened")&&!p.acknowledged_at&&P(p.ack_due_at).isAfter(P())),c=o.filter(p=>(p.status==="New"||p.status==="Reopened")&&!p.acknowledged_at&&P(p.ack_due_at).isBefore(P())),f=o.filter(p=>p.status==="In Investigation"||p.status==="Acknowledged"),g=o.filter(p=>p.status==="Response Drafted"&&!p.final_response_at&&P(p.final_due_at).isAfter(P())),m=o.filter(p=>(p.status==="Response Drafted"||p.status==="In Investigation"||p.status==="Acknowledged")&&!p.final_response_at&&P(p.final_due_at).isBefore(P())),y=[];c.length>0&&y.push({title:"Acknowledgements Overdue",description:"These complaints need acknowledgement urgently",icon:"",color:"semantic-error",complaints:c.sort((p,M)=>P(p.ack_due_at).valueOf()-P(M.ack_due_at).valueOf())}),l.length>0&&y.push({title:"Acknowledgements Due",description:"These complaints need acknowledgement soon",icon:"",color:"semantic-warning",complaints:l.sort((p,M)=>P(p.ack_due_at).valueOf()-P(M.ack_due_at).valueOf())}),m.length>0&&y.push({title:"Final Responses Overdue",description:"These complaints need final response urgently",icon:"",color:"semantic-error",complaints:m.sort((p,M)=>P(p.final_due_at).valueOf()-P(M.final_due_at).valueOf())}),g.length>0&&y.push({title:"Final Responses Due",description:"These complaints are ready for final response",icon:"",color:"semantic-info",complaints:g.sort((p,M)=>P(p.final_due_at).valueOf()-P(M.final_due_at).valueOf())}),f.length>0&&y.push({title:"In Investigation",description:"These complaints are actively being worked on",icon:"",color:"brand",complaints:f.sort((p,M)=>P(p.received_at).valueOf()-P(M.received_at).valueOf())}),d(y)}catch(i){console.error("Failed to load tasks",i)}finally{r(!1)}}),h=()=>a.reduce((i,o)=>i+o.complaints.length,0);return n?e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"My Tasks"}),e.jsx("div",{className:"px-10 py-6",children:e.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading your tasks..."})})]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"My Tasks"}),e.jsxs("div",{className:"px-10 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Your Work List"}),e.jsxs("p",{className:"text-sm text-text-secondary mt-1",children:["You have ",h()," ",h()===1?"task":"tasks"," requiring attention"]})]}),a.length===0?e.jsx(Q,{children:e.jsx(G,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"mt-4 text-lg font-semibold text-text-primary",children:"All caught up!"}),e.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"You don't have any tasks requiring immediate attention."})]})})}):e.jsx("div",{className:"space-y-6",children:a.map((i,o)=>e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:i.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{children:i.title}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:i.description})]}),e.jsx("span",{className:`inline-flex items-center justify-center h-8 min-w-8 rounded-full bg-${i.color}/10 text-${i.color} px-2 text-sm font-bold`,children:i.complaints.length})]})}),e.jsx(G,{children:e.jsx("div",{className:"space-y-3 mt-4",children:i.complaints.map(l=>{var c;return e.jsxs("div",{className:"flex items-center justify-between gap-4 p-4 rounded-lg border border-border hover:bg-surface transition",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-sm font-bold text-text-primary",children:l.reference}),e.jsx(yt,{status:l.status})]}),e.jsx("p",{className:"text-sm text-text-secondary truncate mb-2",children:l.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-text-muted",children:[((c=l.complainant)==null?void 0:c.full_name)&&e.jsxs("span",{children:[" ",l.complainant.full_name]}),e.jsxs("span",{children:[" Received ",P(l.received_at).format("MMM D, YYYY")]}),i.title.includes("Acknowledgement")&&e.jsxs("span",{className:P(l.ack_due_at).isBefore(P())?"text-semantic-error font-semibold":"",children:[" Ack due ",P(l.ack_due_at).format("MMM D, YYYY")]}),i.title.includes("Final Response")&&e.jsxs("span",{className:P(l.final_due_at).isBefore(P())?"text-semantic-error font-semibold":"",children:[" Final due ",P(l.final_due_at).format("MMM D, YYYY")]})]})]}),e.jsx(Y,{variant:"primary",size:"sm",onClick:()=>t(`/complaints/${l.id}`),children:"Go to Claim"})]},l.id)})})})]},o))})]})]})}function wn(){return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"User Management"}),e.jsx("div",{className:"px-10 py-6",children:e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Users"})}),e.jsx(G,{children:e.jsx("p",{className:"text-sm text-text-secondary mt-4",children:"User management interface - to be implemented"})})]})})]})}function Nn(){const{user:t}=we(),s=(t==null?void 0:t.role)==="admin",[n,r]=_.useState("products"),[a,d]=_.useState([]),[u,h]=_.useState(!0),[i,o]=_.useState(""),[l,c]=_.useState(!1),[f,g]=_.useState(""),[m,y]=_.useState(!1),[p,M]=_.useState(null),[E,S]=_.useState(!1),[R,O]=_.useState(null),[I,z]=_.useState(!1),[se,te]=_.useState(null),[$,L]=_.useState(null);_.useEffect(()=>{X()},[n]);const X=()=>H(this,null,function*(){h(!0);try{const w=yield B.get(`/reference/${n}`);d(w.data||[])}catch(w){console.error("Failed to load reference items",w)}finally{h(!1)}}),W=()=>H(this,null,function*(){var w,x;if(f.trim()){y(!0),M(null);try{yield B.post(`/reference/${n}`,{name:f.trim()}),g(""),c(!1),X()}catch(j){M(((x=(w=j==null?void 0:j.response)==null?void 0:w.data)==null?void 0:x.detail)||"Failed to create item")}finally{y(!1)}}}),A=()=>H(this,null,function*(){var w,x;if(R){z(!0),te(null),L(null);try{const j=new FormData;j.append("file",R);const C=yield B.post(`/reference/${n}/import`,j,{headers:{"Content-Type":"multipart/form-data"}});L(`Successfully imported ${C.data.added} items`),O(null),X(),setTimeout(()=>S(!1),2e3)}catch(j){te(((x=(w=j==null?void 0:j.response)==null?void 0:w.data)==null?void 0:x.detail)||"Failed to import file")}finally{z(!1)}}}),k=a.filter(w=>w.name.toLowerCase().includes(i.toLowerCase())),v=w=>{switch(w){case"products":return"Products";case"brokers":return"Brokers";case"insurers":return"Insurers"}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Reference Data Management"}),e.jsx("div",{className:"px-10 py-6",children:e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(ee,{children:"Reference Lists"}),s&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Y,{variant:"secondary",size:"sm",onClick:()=>S(!0),children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Import CSV"]}),e.jsxs(Y,{variant:"primary",size:"sm",onClick:()=>c(!0),children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Add New"]})]})]})}),e.jsx("div",{className:"border-b border-border",children:e.jsx("div",{className:"flex gap-1 px-4",children:["products","brokers","insurers"].map(w=>e.jsxs("button",{onClick:()=>r(w),className:`px-4 py-3 text-sm font-medium capitalize transition border-b-2 ${n===w?"border-brand text-text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[v(w),e.jsx("span",{className:"ml-2 inline-flex items-center justify-center h-5 min-w-5 px-1 rounded-full bg-app text-[11px] font-semibold text-text-secondary border border-border",children:w===n?k.length:a.length})]},w))})}),e.jsxs(G,{children:[e.jsx("div",{className:"mt-4 mb-6",children:e.jsx(V,{type:"search",placeholder:`Search ${v(n).toLowerCase()}...`,value:i,onChange:w=>o(w.target.value),leadingIcon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),u?e.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading..."}):k.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"mt-4 text-sm font-semibold text-text-primary",children:i?"No items match your search":`No ${v(n).toLowerCase()} yet`}),!i&&s&&e.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:'Click "Add New" to create your first entry'})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:k.map(w=>e.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border bg-surface hover:bg-app transition",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary truncate",children:w.name}),e.jsxs("div",{className:"text-xs text-text-muted",children:["ID: ",w.id.substring(0,8),"..."]})]})},w.id))})]})]})}),e.jsxs(Te,{open:l,onClose:()=>c(!1),children:[e.jsxs(Fe,{onClose:()=>c(!1),children:["Add New ",v(n).slice(0,-1)]}),e.jsxs(Ie,{children:[p&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:p}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Name *"}),e.jsx(V,{value:f,onChange:w=>g(w.target.value),placeholder:`Enter ${v(n).slice(0,-1).toLowerCase()} name...`,autoFocus:!0,onKeyDown:w=>{w.key==="Enter"&&f.trim()&&W()}})]})]}),e.jsxs($e,{children:[e.jsx(Y,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),e.jsx(Y,{variant:"primary",onClick:W,disabled:!f.trim()||m,children:m?"Creating...":"Create"})]})]}),e.jsxs(Te,{open:E,onClose:()=>S(!1),children:[e.jsxs(Fe,{onClose:()=>S(!1),children:["Import ",v(n)," from CSV"]}),e.jsxs(Ie,{children:[se&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:se}),$&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-success/30 bg-semantic-success/5 p-3 text-sm text-semantic-success",children:$}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary mb-3",children:'Upload a CSV file with a "name" column. Duplicate names will be skipped.'}),e.jsxs("div",{className:"rounded-lg border-2 border-dashed border-border p-6 text-center",children:[e.jsx("input",{type:"file",accept:".csv",onChange:w=>{var x;return O(((x=w.target.files)==null?void 0:x[0])||null)},className:"hidden",id:"csv-upload"}),e.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("p",{className:"mt-2 text-sm font-medium text-text-primary",children:"Click to select CSV file"}),e.jsx("p",{className:"mt-1 text-xs text-text-muted",children:"or drag and drop"})]})]}),R&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-text-primary",children:[e.jsx("svg",{className:"h-5 w-5 text-semantic-success",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),R.name]})]}),e.jsxs("div",{className:"rounded-lg bg-app p-3 text-xs text-text-secondary",children:[e.jsx("p",{className:"font-semibold text-text-primary mb-1",children:"CSV Format Example:"}),e.jsxs("code",{className:"block bg-surface p-2 rounded border border-border font-mono",children:["name",e.jsx("br",{}),"Product A",e.jsx("br",{}),"Product B",e.jsx("br",{}),"Product C"]})]})]})]}),e.jsxs($e,{children:[e.jsx(Y,{variant:"secondary",onClick:()=>S(!1),children:"Cancel"}),e.jsx(Y,{variant:"primary",onClick:A,disabled:!R||I,children:I?"Importing...":"Import"})]})]})]})}function zt(){var f;const{user:t}=we(),[s,n]=_.useState(""),[r,a]=_.useState(""),[d,u]=_.useState(""),[h,i]=_.useState(null),[o,l]=_.useState(!1),c=g=>H(this,null,function*(){var m,y;if(g.preventDefault(),i(null),r!==d){i({type:"error",text:"New passwords do not match"});return}if(r.length<8){i({type:"error",text:"Password must be at least 8 characters"});return}l(!0);try{yield B.post("/auth/change-password",{current_password:s,new_password:r}),i({type:"success",text:"Password changed successfully"}),n(""),a(""),u("")}catch(p){i({type:"error",text:((y=(m=p==null?void 0:p.response)==null?void 0:m.data)==null?void 0:y.detail)||"Failed to change password"})}finally{l(!1)}});return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Profile & Settings"}),e.jsxs("div",{className:"px-10 py-6 max-w-2xl",children:[e.jsxs(Q,{className:"mb-6",children:[e.jsx(Z,{children:e.jsx(ee,{children:"User Information"})}),e.jsx(G,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Name"}),e.jsx("div",{className:"text-sm text-text-primary",children:t==null?void 0:t.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Email"}),e.jsx("div",{className:"text-sm text-text-primary",children:t==null?void 0:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Role"}),e.jsx("div",{className:"text-sm text-text-primary capitalize",children:(f=t==null?void 0:t.role)==null?void 0:f.replace("_"," ")})]})]})})]}),e.jsxs(Q,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Change Password"})}),e.jsxs(G,{children:[h&&e.jsx("div",{className:`mt-4 rounded-lg border p-3 text-sm ${h.type==="success"?"border-semantic-success/30 bg-semantic-success/5 text-semantic-success":"border-semantic-error/30 bg-semantic-error/5 text-semantic-error"}`,children:h.text}),e.jsxs("form",{onSubmit:c,className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Current Password"}),e.jsx(V,{type:"password",value:s,onChange:g=>n(g.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"New Password"}),e.jsx(V,{type:"password",value:r,onChange:g=>a(g.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Confirm New Password"}),e.jsx(V,{type:"password",value:d,onChange:g=>u(g.target.value),required:!0})]}),e.jsx(Y,{type:"submit",variant:"primary",disabled:o,children:o?"Changing...":"Change Password"})]})]})]})]})]})}var Cn=Object.defineProperty,Xe=Object.getOwnPropertySymbols,bs=Object.prototype.hasOwnProperty,gs=Object.prototype.propertyIsEnumerable,Ht=(t,s,n)=>s in t?Cn(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,_n=(t,s)=>{for(var n in s||(s={}))bs.call(s,n)&&Ht(t,n,s[n]);if(Xe)for(var n of Xe(s))gs.call(s,n)&&Ht(t,n,s[n]);return t},kn=(t,s)=>{var n={};for(var r in t)bs.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Xe)for(var r of Xe(t))s.indexOf(r)<0&&gs.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ve;(t=>{const s=class{constructor(i,o,l,c){if(this.version=i,this.errorCorrectionLevel=o,this.modules=[],this.isFunction=[],i<s.MIN_VERSION||i>s.MAX_VERSION)throw new RangeError("Version value out of range");if(c<-1||c>7)throw new RangeError("Mask value out of range");this.size=i*4+17;let f=[];for(let m=0;m<this.size;m++)f.push(!1);for(let m=0;m<this.size;m++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const g=this.addEccAndInterleave(l);if(this.drawCodewords(g),c==-1){let m=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const p=this.getPenaltyScore();p<m&&(c=y,m=p),this.applyMask(y)}}d(0<=c&&c<=7),this.mask=c,this.applyMask(c),this.drawFormatBits(c),this.isFunction=[]}static encodeText(i,o){const l=t.QrSegment.makeSegments(i);return s.encodeSegments(l,o)}static encodeBinary(i,o){const l=t.QrSegment.makeBytes(i);return s.encodeSegments([l],o)}static encodeSegments(i,o,l=1,c=40,f=-1,g=!0){if(!(s.MIN_VERSION<=l&&l<=c&&c<=s.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let m,y;for(m=l;;m++){const S=s.getNumDataCodewords(m,o)*8,R=h.getTotalBits(i,m);if(R<=S){y=R;break}if(m>=c)throw new RangeError("Data too long")}for(const S of[s.Ecc.MEDIUM,s.Ecc.QUARTILE,s.Ecc.HIGH])g&&y<=s.getNumDataCodewords(m,S)*8&&(o=S);let p=[];for(const S of i){r(S.mode.modeBits,4,p),r(S.numChars,S.mode.numCharCountBits(m),p);for(const R of S.getData())p.push(R)}d(p.length==y);const M=s.getNumDataCodewords(m,o)*8;d(p.length<=M),r(0,Math.min(4,M-p.length),p),r(0,(8-p.length%8)%8,p),d(p.length%8==0);for(let S=236;p.length<M;S^=253)r(S,8,p);let E=[];for(;E.length*8<p.length;)E.push(0);return p.forEach((S,R)=>E[R>>>3]|=S<<7-(R&7)),new s(m,o,E,f)}getModule(i,o){return 0<=i&&i<this.size&&0<=o&&o<this.size&&this.modules[o][i]}getModules(){return this.modules}drawFunctionPatterns(){for(let l=0;l<this.size;l++)this.setFunctionModule(6,l,l%2==0),this.setFunctionModule(l,6,l%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const i=this.getAlignmentPatternPositions(),o=i.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l==0&&c==0||l==0&&c==o-1||l==o-1&&c==0||this.drawAlignmentPattern(i[l],i[c]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(i){const o=this.errorCorrectionLevel.formatBits<<3|i;let l=o;for(let f=0;f<10;f++)l=l<<1^(l>>>9)*1335;const c=(o<<10|l)^21522;d(c>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,a(c,f));this.setFunctionModule(8,7,a(c,6)),this.setFunctionModule(8,8,a(c,7)),this.setFunctionModule(7,8,a(c,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,a(c,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,a(c,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,a(c,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let i=this.version;for(let l=0;l<12;l++)i=i<<1^(i>>>11)*7973;const o=this.version<<12|i;d(o>>>18==0);for(let l=0;l<18;l++){const c=a(o,l),f=this.size-11+l%3,g=Math.floor(l/3);this.setFunctionModule(f,g,c),this.setFunctionModule(g,f,c)}}drawFinderPattern(i,o){for(let l=-4;l<=4;l++)for(let c=-4;c<=4;c++){const f=Math.max(Math.abs(c),Math.abs(l)),g=i+c,m=o+l;0<=g&&g<this.size&&0<=m&&m<this.size&&this.setFunctionModule(g,m,f!=2&&f!=4)}}drawAlignmentPattern(i,o){for(let l=-2;l<=2;l++)for(let c=-2;c<=2;c++)this.setFunctionModule(i+c,o+l,Math.max(Math.abs(c),Math.abs(l))!=1)}setFunctionModule(i,o,l){this.modules[o][i]=l,this.isFunction[o][i]=!0}addEccAndInterleave(i){const o=this.version,l=this.errorCorrectionLevel;if(i.length!=s.getNumDataCodewords(o,l))throw new RangeError("Invalid argument");const c=s.NUM_ERROR_CORRECTION_BLOCKS[l.ordinal][o],f=s.ECC_CODEWORDS_PER_BLOCK[l.ordinal][o],g=Math.floor(s.getNumRawDataModules(o)/8),m=c-g%c,y=Math.floor(g/c);let p=[];const M=s.reedSolomonComputeDivisor(f);for(let S=0,R=0;S<c;S++){let O=i.slice(R,R+y-f+(S<m?0:1));R+=O.length;const I=s.reedSolomonComputeRemainder(O,M);S<m&&O.push(0),p.push(O.concat(I))}let E=[];for(let S=0;S<p[0].length;S++)p.forEach((R,O)=>{(S!=y-f||O>=m)&&E.push(R[S])});return d(E.length==g),E}drawCodewords(i){if(i.length!=Math.floor(s.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let o=0;for(let l=this.size-1;l>=1;l-=2){l==6&&(l=5);for(let c=0;c<this.size;c++)for(let f=0;f<2;f++){const g=l-f,y=(l+1&2)==0?this.size-1-c:c;!this.isFunction[y][g]&&o<i.length*8&&(this.modules[y][g]=a(i[o>>>3],7-(o&7)),o++)}}d(o==i.length*8)}applyMask(i){if(i<0||i>7)throw new RangeError("Mask value out of range");for(let o=0;o<this.size;o++)for(let l=0;l<this.size;l++){let c;switch(i){case 0:c=(l+o)%2==0;break;case 1:c=o%2==0;break;case 2:c=l%3==0;break;case 3:c=(l+o)%3==0;break;case 4:c=(Math.floor(l/3)+Math.floor(o/2))%2==0;break;case 5:c=l*o%2+l*o%3==0;break;case 6:c=(l*o%2+l*o%3)%2==0;break;case 7:c=((l+o)%2+l*o%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[o][l]&&c&&(this.modules[o][l]=!this.modules[o][l])}}getPenaltyScore(){let i=0;for(let f=0;f<this.size;f++){let g=!1,m=0,y=[0,0,0,0,0,0,0];for(let p=0;p<this.size;p++)this.modules[f][p]==g?(m++,m==5?i+=s.PENALTY_N1:m>5&&i++):(this.finderPenaltyAddHistory(m,y),g||(i+=this.finderPenaltyCountPatterns(y)*s.PENALTY_N3),g=this.modules[f][p],m=1);i+=this.finderPenaltyTerminateAndCount(g,m,y)*s.PENALTY_N3}for(let f=0;f<this.size;f++){let g=!1,m=0,y=[0,0,0,0,0,0,0];for(let p=0;p<this.size;p++)this.modules[p][f]==g?(m++,m==5?i+=s.PENALTY_N1:m>5&&i++):(this.finderPenaltyAddHistory(m,y),g||(i+=this.finderPenaltyCountPatterns(y)*s.PENALTY_N3),g=this.modules[p][f],m=1);i+=this.finderPenaltyTerminateAndCount(g,m,y)*s.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let g=0;g<this.size-1;g++){const m=this.modules[f][g];m==this.modules[f][g+1]&&m==this.modules[f+1][g]&&m==this.modules[f+1][g+1]&&(i+=s.PENALTY_N2)}let o=0;for(const f of this.modules)o=f.reduce((g,m)=>g+(m?1:0),o);const l=this.size*this.size,c=Math.ceil(Math.abs(o*20-l*10)/l)-1;return d(0<=c&&c<=9),i+=c*s.PENALTY_N4,d(0<=i&&i<=2568888),i}getAlignmentPatternPositions(){if(this.version==1)return[];{const i=Math.floor(this.version/7)+2,o=this.version==32?26:Math.ceil((this.version*4+4)/(i*2-2))*2;let l=[6];for(let c=this.size-7;l.length<i;c-=o)l.splice(1,0,c);return l}}static getNumRawDataModules(i){if(i<s.MIN_VERSION||i>s.MAX_VERSION)throw new RangeError("Version number out of range");let o=(16*i+128)*i+64;if(i>=2){const l=Math.floor(i/7)+2;o-=(25*l-10)*l-55,i>=7&&(o-=36)}return d(208<=o&&o<=29648),o}static getNumDataCodewords(i,o){return Math.floor(s.getNumRawDataModules(i)/8)-s.ECC_CODEWORDS_PER_BLOCK[o.ordinal][i]*s.NUM_ERROR_CORRECTION_BLOCKS[o.ordinal][i]}static reedSolomonComputeDivisor(i){if(i<1||i>255)throw new RangeError("Degree out of range");let o=[];for(let c=0;c<i-1;c++)o.push(0);o.push(1);let l=1;for(let c=0;c<i;c++){for(let f=0;f<o.length;f++)o[f]=s.reedSolomonMultiply(o[f],l),f+1<o.length&&(o[f]^=o[f+1]);l=s.reedSolomonMultiply(l,2)}return o}static reedSolomonComputeRemainder(i,o){let l=o.map(c=>0);for(const c of i){const f=c^l.shift();l.push(0),o.forEach((g,m)=>l[m]^=s.reedSolomonMultiply(g,f))}return l}static reedSolomonMultiply(i,o){if(i>>>8||o>>>8)throw new RangeError("Byte out of range");let l=0;for(let c=7;c>=0;c--)l=l<<1^(l>>>7)*285,l^=(o>>>c&1)*i;return d(l>>>8==0),l}finderPenaltyCountPatterns(i){const o=i[1];d(o<=this.size*3);const l=o>0&&i[2]==o&&i[3]==o*3&&i[4]==o&&i[5]==o;return(l&&i[0]>=o*4&&i[6]>=o?1:0)+(l&&i[6]>=o*4&&i[0]>=o?1:0)}finderPenaltyTerminateAndCount(i,o,l){return i&&(this.finderPenaltyAddHistory(o,l),o=0),o+=this.size,this.finderPenaltyAddHistory(o,l),this.finderPenaltyCountPatterns(l)}finderPenaltyAddHistory(i,o){o[0]==0&&(i+=this.size),o.pop(),o.unshift(i)}};let n=s;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(i,o,l){if(o<0||o>31||i>>>o)throw new RangeError("Value out of range");for(let c=o-1;c>=0;c--)l.push(i>>>c&1)}function a(i,o){return(i>>>o&1)!=0}function d(i){if(!i)throw new Error("Assertion error")}const u=class{constructor(i,o,l){if(this.mode=i,this.numChars=o,this.bitData=l,o<0)throw new RangeError("Invalid argument");this.bitData=l.slice()}static makeBytes(i){let o=[];for(const l of i)r(l,8,o);return new u(u.Mode.BYTE,i.length,o)}static makeNumeric(i){if(!u.isNumeric(i))throw new RangeError("String contains non-numeric characters");let o=[];for(let l=0;l<i.length;){const c=Math.min(i.length-l,3);r(parseInt(i.substr(l,c),10),c*3+1,o),l+=c}return new u(u.Mode.NUMERIC,i.length,o)}static makeAlphanumeric(i){if(!u.isAlphanumeric(i))throw new RangeError("String contains unencodable characters in alphanumeric mode");let o=[],l;for(l=0;l+2<=i.length;l+=2){let c=u.ALPHANUMERIC_CHARSET.indexOf(i.charAt(l))*45;c+=u.ALPHANUMERIC_CHARSET.indexOf(i.charAt(l+1)),r(c,11,o)}return l<i.length&&r(u.ALPHANUMERIC_CHARSET.indexOf(i.charAt(l)),6,o),new u(u.Mode.ALPHANUMERIC,i.length,o)}static makeSegments(i){return i==""?[]:u.isNumeric(i)?[u.makeNumeric(i)]:u.isAlphanumeric(i)?[u.makeAlphanumeric(i)]:[u.makeBytes(u.toUtf8ByteArray(i))]}static makeEci(i){let o=[];if(i<0)throw new RangeError("ECI assignment value out of range");if(i<128)r(i,8,o);else if(i<16384)r(2,2,o),r(i,14,o);else if(i<1e6)r(6,3,o),r(i,21,o);else throw new RangeError("ECI assignment value out of range");return new u(u.Mode.ECI,0,o)}static isNumeric(i){return u.NUMERIC_REGEX.test(i)}static isAlphanumeric(i){return u.ALPHANUMERIC_REGEX.test(i)}getData(){return this.bitData.slice()}static getTotalBits(i,o){let l=0;for(const c of i){const f=c.mode.numCharCountBits(o);if(c.numChars>=1<<f)return 1/0;l+=4+f+c.bitData.length}return l}static toUtf8ByteArray(i){i=encodeURI(i);let o=[];for(let l=0;l<i.length;l++)i.charAt(l)!="%"?o.push(i.charCodeAt(l)):(o.push(parseInt(i.substr(l+1,2),16)),l+=2);return o}};let h=u;h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=h})(ve||(ve={}));(t=>{(s=>{const n=class{constructor(a,d){this.ordinal=a,this.formatBits=d}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),s.Ecc=r})(t.QrCode||(t.QrCode={}))})(ve||(ve={}));(t=>{(s=>{const n=class{constructor(a,d){this.modeBits=a,this.numBitsCharCount=d}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),s.Mode=r})(t.QrSegment||(t.QrSegment={}))})(ve||(ve={}));var De=ve;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Sn={L:De.QrCode.Ecc.LOW,M:De.QrCode.Ecc.MEDIUM,Q:De.QrCode.Ecc.QUARTILE,H:De.QrCode.Ecc.HIGH},En=128,Mn="L",An="#FFFFFF",Rn="#000000",On=!1,ys=4,Ln=.1;function Pn(t,s=0){const n=[];return t.forEach(function(r,a){let d=null;r.forEach(function(u,h){if(!u&&d!==null){n.push(`M${d+s} ${a+s}h${h-d}v1H${d+s}z`),d=null;return}if(h===r.length-1){if(!u)return;d===null?n.push(`M${h+s},${a+s} h1v1H${h+s}z`):n.push(`M${d+s},${a+s} h${h+1-d}v1H${d+s}z`);return}u&&d===null&&(d=h)})}),n.join("")}function Dn(t,s){return t.slice().map((n,r)=>r<s.y||r>=s.y+s.h?n:n.map((a,d)=>d<s.x||d>=s.x+s.w?a:!1))}function Tn(t,s,n,r){if(r==null)return null;const a=n?ys:0,d=t.length+a*2,u=Math.floor(s*Ln),h=d/s,i=(r.width||u)*h,o=(r.height||u)*h,l=r.x==null?t.length/2-i/2:r.x*h,c=r.y==null?t.length/2-o/2:r.y*h;let f=null;if(r.excavate){let g=Math.floor(l),m=Math.floor(c),y=Math.ceil(i+l-g),p=Math.ceil(o+c-m);f={x:g,y:m,w:y,h:p}}return{x:l,y:c,h:o,w:i,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch(t){return!1}return!0})();function Fn(t){const s=t,{value:n,size:r=En,level:a=Mn,bgColor:d=An,fgColor:u=Rn,includeMargin:h=On,imageSettings:i}=s,o=kn(s,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let l=De.QrCode.encodeText(n,Sn[a]).getModules();const c=h?ys:0,f=l.length+c*2,g=Tn(l,r,h,i);let m=null;i!=null&&g!=null&&(g.excavation!=null&&(l=Dn(l,g.excavation)),m=Pe.createElement("image",{xlinkHref:i.src,height:g.h,width:g.w,x:g.x+c,y:g.y+c,preserveAspectRatio:"none"}));const y=Pn(l,c);return Pe.createElement("svg",_n({height:r,width:r,viewBox:`0 0 ${f} ${f}`},o),Pe.createElement("path",{fill:d,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Pe.createElement("path",{fill:u,d:y,shapeRendering:"crispEdges"}),m)}function In(){const{token:t,role:s,name:n,login:r,logout:a,mustChangePassword:d,ready:u}=we(),[h,i]=_.useState(""),[o,l]=_.useState(""),[c,f]=_.useState(!1),[g,m]=_.useState(""),[y,p]=_.useState(""),[M,E]=_.useState(null),[S,R]=_.useState(!1),[O,I]=_.useState(!1),[z,se]=_.useState(null),[te,$]=_.useState(null),[L,X]=_.useState(0),W=ke(),A=Yt();_.useEffect(()=>{u&&(t||A.pathname!=="/"&&W("/",{replace:!0}))},[u,t,A.pathname,W]),_.useEffect(()=>{t&&d&&A.pathname!=="/profile"&&W("/profile",{replace:!0,state:{forced:!0}})},[t,d,A.pathname,W]);const k=()=>H(this,null,function*(){var j,C;E(null);try{const N=yield r(h,o,S?g:void 0,S?y:void 0);R(!1),m(""),p(""),N!=null&&N.mfa_enrollment_required?(X(N.mfa_remaining_skips||0),yield v()):W("/")}catch(N){const T=(C=(j=N==null?void 0:N.response)==null?void 0:j.data)==null?void 0:C.detail;T==="MFA code required"||(T==null?void 0:T.code)==="mfa_required"?(R(!0),E("Enter your 6-digit MFA code or a recovery code.")):E(T==="Invalid recovery code"||T==="Invalid MFA code"||T==="Invalid code"?"Invalid code. Please try again.":"Login failed. Check your credentials.")}}),v=()=>H(this,null,function*(){var j,C;try{const N=yield B.post("/auth/mfa/enroll");se(N.data),$(null),I(!0)}catch(N){E(((C=(j=N==null?void 0:N.response)==null?void 0:j.data)==null?void 0:C.detail)||"Could not start MFA enrollment")}}),w=()=>H(this,null,function*(){var j,C;try{const N=yield B.post("/auth/mfa/verify",{code:g});$(N.data.recovery_codes),I(!1),m(""),X(0),W("/")}catch(N){E(((C=(j=N==null?void 0:N.response)==null?void 0:j.data)==null?void 0:C.detail)||"Invalid code")}}),x=()=>H(this,null,function*(){var j,C;try{const N=yield B.post("/auth/mfa/skip");X(N.data.remaining_skips),I(!1),se(null)}catch(N){E(((C=(j=N==null?void 0:N.response)==null?void 0:j.data)==null?void 0:C.detail)||"Cannot skip MFA")}});return t?e.jsx(hn,{children:e.jsxs(As,{children:[e.jsx(ue,{path:"/",element:e.jsx(bn,{})}),e.jsx(ue,{path:"/tasks",element:e.jsx(vn,{})}),e.jsx(ue,{path:"/complaints",element:e.jsx(gn,{})}),e.jsx(ue,{path:"/create",element:e.jsx(jn,{})}),e.jsx(ue,{path:"/complaints/:id",element:e.jsx(yn,{})}),e.jsx(ue,{path:"/profile",element:e.jsx(zt,{})}),e.jsx(ue,{path:"/users",element:e.jsx(wn,{})}),e.jsx(ue,{path:"/reference",element:e.jsx(Nn,{})}),e.jsx(ue,{path:"/settings",element:e.jsx(zt,{})})]})}):e.jsxs("div",{className:"min-h-screen bg-app flex items-center justify-center p-4",children:[e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"rounded-card border border-border bg-surface shadow-card p-8",children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-text-primary mb-2",children:"Sign in to Compass"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Use your credentials to access the complaints workspace"})]}),M&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:M}),e.jsxs("form",{onSubmit:j=>{j.preventDefault(),k()},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Email"}),e.jsx(V,{type:"email",value:h,onChange:j=>i(j.target.value),placeholder:"you@example.com",autoComplete:"email",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{type:c?"text":"password",value:o,onChange:j=>l(j.target.value),placeholder:"",autoComplete:"current-password",required:!0}),e.jsx("button",{type:"button",onClick:()=>f(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition",children:c?e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),S&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"MFA Code (6 digits)"}),e.jsx(V,{type:"text",value:g,onChange:j=>m(j.target.value),placeholder:"123456",maxLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Recovery Code (optional)"}),e.jsx(V,{type:"text",value:y,onChange:j=>p(j.target.value),placeholder:"recovery-code"})]})]}),e.jsx(Y,{type:"submit",variant:"primary",className:"w-full mt-6",children:"Sign in"})]})]})}),e.jsxs(Te,{open:O,onClose:L>0?()=>I(!1):()=>{},children:[e.jsx(Fe,{onClose:L>0?()=>I(!1):void 0,children:"Set up Multi-Factor Authentication"}),e.jsx(Ie,{children:e.jsxs("div",{className:"space-y-4",children:[L<=0?e.jsx("div",{className:"rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:"You must enable MFA to continue."}):e.jsxs("p",{className:"text-sm text-text-secondary",children:["We recommend enabling MFA for enhanced security. You can skip up to ",L," more time(s)."]}),z?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-text-primary mb-2",children:"Scan with your authenticator app"}),e.jsx("div",{className:"flex justify-center p-4 bg-app rounded-lg",children:e.jsx(Fn,{value:z.otpauth_url,size:180})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-text-primary mb-1",children:"Manual entry secret"}),e.jsx("code",{className:"block text-xs bg-app p-2 rounded border border-border font-mono",children:z.secret})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Enter 6-digit code"}),e.jsx(V,{type:"text",value:g,onChange:j=>m(j.target.value),placeholder:"123456",maxLength:6})]}),te&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-text-primary mb-2",children:"Recovery codes (store securely)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:te.map(j=>e.jsx("code",{className:"text-xs bg-app p-2 rounded border border-border font-mono",children:j},j))})]})]}):e.jsx("p",{className:"text-sm text-text-muted",children:"Preparing enrollment..."})]})}),e.jsxs($e,{children:[e.jsx(Y,{variant:"secondary",onClick:x,disabled:L<=0,children:"Skip for now"}),e.jsx(Y,{variant:"primary",onClick:w,disabled:!g||g.length<6,children:"Verify & Enable"})]})]})]})}dt.createRoot(document.getElementById("root")).render(e.jsx(Pe.StrictMode,{children:e.jsx(Rs,{children:e.jsx(un,{children:e.jsx(In,{})})})}))});export default $n();
