var Ys=Object.defineProperty,qs=Object.defineProperties;var Ws=Object.getOwnPropertyDescriptors;var Ze=Object.getOwnPropertySymbols;var Ft=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable;var Te=(t,s)=>(s=Symbol[t])?s:Symbol.for("Symbol."+t),Vs=t=>{throw TypeError(t)};var Lt=(t,s,n)=>s in t?Ys(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,P=(t,s)=>{for(var n in s||(s={}))Ft.call(s,n)&&Lt(t,n,s[n]);if(Ze)for(var n of Ze(s))Pt.call(s,n)&&Lt(t,n,s[n]);return t},B=(t,s)=>qs(t,Ws(s));var ut=(t,s)=>{var n={};for(var r in t)Ft.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ze)for(var r of Ze(t))s.indexOf(r)<0&&Pt.call(t,r)&&(n[r]=t[r]);return n};var Js=(t,s)=>()=>(s||t((s={exports:{}}).exports,s),s.exports);var G=(t,s,n)=>new Promise((r,a)=>{var d=o=>{try{m(n.next(o))}catch(i){a(i)}},u=o=>{try{m(n.throw(o))}catch(i){a(i)}},m=o=>o.done?r(o.value):Promise.resolve(o.value).then(d,u);m((n=n.apply(t,s)).next())}),Re=function(t,s){this[0]=t,this[1]=s},mt=(t,s,n)=>{var r=(u,m,o,i)=>{try{var c=n[u](m),l=(m=c.value)instanceof Re,h=c.done;Promise.resolve(l?m[0]:m).then(b=>l?r(u==="return"?u:"next",m[1]?{done:b.done,value:b.value}:b,o,i):o({value:b,done:h})).catch(b=>r("throw",b,o,i))}catch(b){i(b)}},a=u=>d[u]=m=>new Promise((o,i)=>r(u,m,o,i)),d={};return n=n.apply(t,s),d[Te("asyncIterator")]=()=>d,a("next"),a("throw"),a("return"),d},xt=t=>{var s=t[Te("asyncIterator")],n=!1,r,a={};return s==null?(s=t[Te("iterator")](),r=d=>a[d]=u=>s[d](u)):(s=s.call(t),r=d=>a[d]=u=>{if(n){if(n=!1,d==="throw")throw u;return u}return n=!0,{done:!1,value:new Re(new Promise(m=>{var o=s[d](u);o instanceof Object||Vs("Object expected"),m(o)}),1)}}),a[Te("iterator")]=()=>a,r("next"),"throw"in s?r("throw"):a.throw=d=>{throw d},"return"in s&&r("return"),a},Dt=(t,s,n)=>(s=t[Te("asyncIterator")])?s.call(t):(t=t[Te("iterator")](),s={},n=(r,a)=>(a=t[r])&&(s[r]=d=>new Promise((u,m,o)=>(d=a.call(t,d),o=d.done,Promise.resolve(d.value).then(i=>u({value:i,done:o}),m)))),n("next"),n("return"),s);import{j as e}from"./mui-BpRHmZTB.js";import{a as Qs,c as Ks,g as Xs,r as y,u as rs,L as Gs,b as Ie,d as Zs,R as qe,e as er,f as ke,B as tr}from"./vendor-BaIKwp6E.js";var la=Js(Ee=>{(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(a){if(a.ep)return;a.ep=!0;const d=n(a);fetch(a.href,d)}})();var gt={},Tt=Qs;gt.createRoot=Tt.createRoot,gt.hydrateRoot=Tt.hydrateRoot;var ns={exports:{}};(function(t,s){(function(n,r){t.exports=r()})(Ks,function(){var n=1e3,r=6e4,a=36e5,d="millisecond",u="second",m="minute",o="hour",i="day",c="week",l="month",h="quarter",b="year",x="date",j="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var E=["th","st","nd","rd"],C=O%100;return"["+O+(E[(C-20)%10]||E[C]||E[0])+"]"}},v=function(O,E,C){var N=String(O);return!N||N.length>=E?O:""+Array(E+1-N.length).join(C)+O},M={s:v,z:function(O){var E=-O.utcOffset(),C=Math.abs(E),N=Math.floor(C/60),_=C%60;return(E<=0?"+":"-")+v(N,2,"0")+":"+v(_,2,"0")},m:function O(E,C){if(E.date()<C.date())return-O(C,E);var N=12*(C.year()-E.year())+(C.month()-E.month()),_=E.clone().add(N,l),A=C-_<0,T=E.clone().add(N+(A?-1:1),l);return+(-(N+(C-_)/(A?_-T:T-_))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:l,y:b,w:c,d:i,D:x,h:o,m,s:u,ms:d,Q:h}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},F="en",Q={};Q[F]=S;var z="$isDayjsObject",L=function(O){return O instanceof ie||!(!O||!O[z])},Z=function O(E,C,N){var _;if(!E)return F;if(typeof E=="string"){var A=E.toLowerCase();Q[A]&&(_=A),C&&(Q[A]=C,_=A);var T=E.split("-");if(!_&&T.length>1)return O(T[0])}else{var w=E.name;Q[w]=E,_=w}return!N&&_&&(F=_),_||!N&&F},X=function(O,E){if(L(O))return O.clone();var C=typeof E=="object"?E:{};return C.date=O,C.args=arguments,new ie(C)},Y=M;Y.l=Z,Y.i=L,Y.w=function(O,E){return X(O,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var ie=function(){function O(C){this.$L=Z(C.locale,null,!0),this.parse(C),this.$x=this.$x||C.x||{},this[z]=!0}var E=O.prototype;return E.parse=function(C){this.$d=function(N){var _=N.date,A=N.utc;if(_===null)return new Date(NaN);if(Y.u(_))return new Date;if(_ instanceof Date)return new Date(_);if(typeof _=="string"&&!/Z$/i.test(_)){var T=_.match(f);if(T){var w=T[2]-1||0,I=(T[7]||"0").substring(0,3);return A?new Date(Date.UTC(T[1],w,T[3]||1,T[4]||0,T[5]||0,T[6]||0,I)):new Date(T[1],w,T[3]||1,T[4]||0,T[5]||0,T[6]||0,I)}}return new Date(_)}(C),this.init()},E.init=function(){var C=this.$d;this.$y=C.getFullYear(),this.$M=C.getMonth(),this.$D=C.getDate(),this.$W=C.getDay(),this.$H=C.getHours(),this.$m=C.getMinutes(),this.$s=C.getSeconds(),this.$ms=C.getMilliseconds()},E.$utils=function(){return Y},E.isValid=function(){return this.$d.toString()!==j},E.isSame=function(C,N){var _=X(C);return this.startOf(N)<=_&&_<=this.endOf(N)},E.isAfter=function(C,N){return X(C)<this.startOf(N)},E.isBefore=function(C,N){return this.endOf(N)<X(C)},E.$g=function(C,N,_){return Y.u(C)?this[N]:this.set(_,C)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(C,N){var _=this,A=!!Y.u(N)||N,T=Y.p(C),w=function(Ne,de){var we=Y.w(_.$u?Date.UTC(_.$y,de,Ne):new Date(_.$y,de,Ne),_);return A?we:we.endOf(i)},I=function(Ne,de){return Y.w(_.toDate()[Ne].apply(_.toDate("s"),(A?[0,0,0,0]:[23,59,59,999]).slice(de)),_)},H=this.$W,R=this.$M,D=this.$D,q="set"+(this.$u?"UTC":"");switch(T){case b:return A?w(1,0):w(31,11);case l:return A?w(1,R):w(0,R+1);case c:var ce=this.$locale().weekStart||0,Se=(H<ce?H+7:H)-ce;return w(A?D-Se:D+(6-Se),R);case i:case x:return I(q+"Hours",0);case o:return I(q+"Minutes",1);case m:return I(q+"Seconds",2);case u:return I(q+"Milliseconds",3);default:return this.clone()}},E.endOf=function(C){return this.startOf(C,!1)},E.$set=function(C,N){var _,A=Y.p(C),T="set"+(this.$u?"UTC":""),w=(_={},_[i]=T+"Date",_[x]=T+"Date",_[l]=T+"Month",_[b]=T+"FullYear",_[o]=T+"Hours",_[m]=T+"Minutes",_[u]=T+"Seconds",_[d]=T+"Milliseconds",_)[A],I=A===i?this.$D+(N-this.$W):N;if(A===l||A===b){var H=this.clone().set(x,1);H.$d[w](I),H.init(),this.$d=H.set(x,Math.min(this.$D,H.daysInMonth())).$d}else w&&this.$d[w](I);return this.init(),this},E.set=function(C,N){return this.clone().$set(C,N)},E.get=function(C){return this[Y.p(C)]()},E.add=function(C,N){var _,A=this;C=Number(C);var T=Y.p(N),w=function(R){var D=X(A);return Y.w(D.date(D.date()+Math.round(R*C)),A)};if(T===l)return this.set(l,this.$M+C);if(T===b)return this.set(b,this.$y+C);if(T===i)return w(1);if(T===c)return w(7);var I=(_={},_[m]=r,_[o]=a,_[u]=n,_)[T]||1,H=this.$d.getTime()+C*I;return Y.w(H,this)},E.subtract=function(C,N){return this.add(-1*C,N)},E.format=function(C){var N=this,_=this.$locale();if(!this.isValid())return _.invalidDate||j;var A=C||"YYYY-MM-DDTHH:mm:ssZ",T=Y.z(this),w=this.$H,I=this.$m,H=this.$M,R=_.weekdays,D=_.months,q=_.meridiem,ce=function(de,we,je,Me){return de&&(de[we]||de(N,A))||je[we].slice(0,Me)},Se=function(de){return Y.s(w%12||12,de,"0")},Ne=q||function(de,we,je){var Me=de<12?"AM":"PM";return je?Me.toLowerCase():Me};return A.replace(k,function(de,we){return we||function(je){switch(je){case"YY":return String(N.$y).slice(-2);case"YYYY":return Y.s(N.$y,4,"0");case"M":return H+1;case"MM":return Y.s(H+1,2,"0");case"MMM":return ce(_.monthsShort,H,D,3);case"MMMM":return ce(D,H);case"D":return N.$D;case"DD":return Y.s(N.$D,2,"0");case"d":return String(N.$W);case"dd":return ce(_.weekdaysMin,N.$W,R,2);case"ddd":return ce(_.weekdaysShort,N.$W,R,3);case"dddd":return R[N.$W];case"H":return String(w);case"HH":return Y.s(w,2,"0");case"h":return Se(1);case"hh":return Se(2);case"a":return Ne(w,I,!0);case"A":return Ne(w,I,!1);case"m":return String(I);case"mm":return Y.s(I,2,"0");case"s":return String(N.$s);case"ss":return Y.s(N.$s,2,"0");case"SSS":return Y.s(N.$ms,3,"0");case"Z":return T}return null}(de)||T.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(C,N,_){var A,T=this,w=Y.p(N),I=X(C),H=(I.utcOffset()-this.utcOffset())*r,R=this-I,D=function(){return Y.m(T,I)};switch(w){case b:A=D()/12;break;case l:A=D();break;case h:A=D()/3;break;case c:A=(R-H)/6048e5;break;case i:A=(R-H)/864e5;break;case o:A=R/a;break;case m:A=R/r;break;case u:A=R/n;break;default:A=R}return _?A:Y.a(A)},E.daysInMonth=function(){return this.endOf(l).$D},E.$locale=function(){return Q[this.$L]},E.locale=function(C,N){if(!C)return this.$L;var _=this.clone(),A=Z(C,N,!0);return A&&(_.$L=A),_},E.clone=function(){return Y.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},O}(),oe=ie.prototype;return X.prototype=oe,[["$ms",d],["$s",u],["$m",m],["$H",o],["$W",i],["$M",l],["$y",b],["$D",x]].forEach(function(O){oe[O[1]]=function(E){return this.$g(E,O[0],O[1])}}),X.extend=function(O,E){return O.$i||(O(E,ie,X),O.$i=!0),X},X.locale=Z,X.isDayjs=L,X.unix=function(O){return X(1e3*O)},X.en=Q[F],X.Ls=Q,X.p={},X})})(ns);var sr=ns.exports;const U=Xs(sr);function as(t,s){return function(){return t.apply(s,arguments)}}const{toString:rr}=Object.prototype,{getPrototypeOf:wt}=Object,{iterator:ot,toStringTag:os}=Symbol,it=(t=>s=>{const n=rr.call(s);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ve=t=>(t=t.toLowerCase(),s=>it(s)===t),lt=t=>s=>typeof s===t,{isArray:Be}=Array,$e=lt("undefined");function Ve(t){return t!==null&&!$e(t)&&t.constructor!==null&&!$e(t.constructor)&&me(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const is=ve("ArrayBuffer");function nr(t){let s;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&is(t.buffer),s}const ar=lt("string"),me=lt("function"),ls=lt("number"),Je=t=>t!==null&&typeof t=="object",or=t=>t===!0||t===!1,tt=t=>{if(it(t)!=="object")return!1;const s=wt(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(os in t)&&!(ot in t)},ir=t=>{if(!Je(t)||Ve(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch(s){return!1}},lr=ve("Date"),cr=ve("File"),dr=ve("Blob"),ur=ve("FileList"),mr=t=>Je(t)&&me(t.pipe),xr=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||me(t.append)&&((s=it(t))==="formdata"||s==="object"&&me(t.toString)&&t.toString()==="[object FormData]"))},hr=ve("URLSearchParams"),[fr,pr,br,gr]=["ReadableStream","Request","Response","Headers"].map(ve),jr=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qe(t,s,{allOwnKeys:n=!1}={}){if(t===null||typeof t=="undefined")return;let r,a;if(typeof t!="object"&&(t=[t]),Be(t))for(r=0,a=t.length;r<a;r++)s.call(null,t[r],r,t);else{if(Ve(t))return;const d=n?Object.getOwnPropertyNames(t):Object.keys(t),u=d.length;let m;for(r=0;r<u;r++)m=d[r],s.call(null,t[m],m,t)}}function cs(t,s){if(Ve(t))return null;s=s.toLowerCase();const n=Object.keys(t);let r=n.length,a;for(;r-- >0;)if(a=n[r],s===a.toLowerCase())return a;return null}const Oe=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,ds=t=>!$e(t)&&t!==Oe;function jt(){const{caseless:t,skipUndefined:s}=ds(this)&&this||{},n={},r=(a,d)=>{const u=t&&cs(n,d)||d;tt(n[u])&&tt(a)?n[u]=jt(n[u],a):tt(a)?n[u]=jt({},a):Be(a)?n[u]=a.slice():(!s||!$e(a))&&(n[u]=a)};for(let a=0,d=arguments.length;a<d;a++)arguments[a]&&Qe(arguments[a],r);return n}const yr=(t,s,n,{allOwnKeys:r}={})=>(Qe(s,(a,d)=>{n&&me(a)?t[d]=as(a,n):t[d]=a},{allOwnKeys:r}),t),vr=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Nr=(t,s,n,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),n&&Object.assign(t.prototype,n)},wr=(t,s,n,r)=>{let a,d,u;const m={};if(s=s||{},t==null)return s;do{for(a=Object.getOwnPropertyNames(t),d=a.length;d-- >0;)u=a[d],(!r||r(u,t,s))&&!m[u]&&(s[u]=t[u],m[u]=!0);t=n!==!1&&wt(t)}while(t&&(!n||n(t,s))&&t!==Object.prototype);return s},Cr=(t,s,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=s.length;const r=t.indexOf(s,n);return r!==-1&&r===n},_r=t=>{if(!t)return null;if(Be(t))return t;let s=t.length;if(!ls(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=t[s];return n},kr=(t=>s=>t&&s instanceof t)(typeof Uint8Array!="undefined"&&wt(Uint8Array)),Sr=(t,s)=>{const r=(t&&t[ot]).call(t);let a;for(;(a=r.next())&&!a.done;){const d=a.value;s.call(t,d[0],d[1])}},Er=(t,s)=>{let n;const r=[];for(;(n=t.exec(s))!==null;)r.push(n);return r},Mr=ve("HTMLFormElement"),Rr=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),$t=(({hasOwnProperty:t})=>(s,n)=>t.call(s,n))(Object.prototype),Ar=ve("RegExp"),us=(t,s)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Qe(n,(a,d)=>{let u;(u=s(a,d,t))!==!1&&(r[d]=u||a)}),Object.defineProperties(t,r)},Or=t=>{us(t,(s,n)=>{if(me(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(me(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Lr=(t,s)=>{const n={},r=a=>{a.forEach(d=>{n[d]=!0})};return Be(t)?r(t):r(String(t).split(s)),n},Fr=()=>{},Pr=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function Dr(t){return!!(t&&me(t.append)&&t[os]==="FormData"&&t[ot])}const Tr=t=>{const s=new Array(10),n=(r,a)=>{if(Je(r)){if(s.indexOf(r)>=0)return;if(Ve(r))return r;if(!("toJSON"in r)){s[a]=r;const d=Be(r)?[]:{};return Qe(r,(u,m)=>{const o=n(u,a+1);!$e(o)&&(d[m]=o)}),s[a]=void 0,d}}return r};return n(t,0)},$r=ve("AsyncFunction"),Ir=t=>t&&(Je(t)||me(t))&&me(t.then)&&me(t.catch),ms=((t,s)=>t?setImmediate:s?((n,r)=>(Oe.addEventListener("message",({source:a,data:d})=>{a===Oe&&d===n&&r.length&&r.shift()()},!1),a=>{r.push(a),Oe.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",me(Oe.postMessage)),Br=typeof queueMicrotask!="undefined"?queueMicrotask.bind(Oe):typeof process!="undefined"&&process.nextTick||ms,Ur=t=>t!=null&&me(t[ot]),p={isArray:Be,isArrayBuffer:is,isBuffer:Ve,isFormData:xr,isArrayBufferView:nr,isString:ar,isNumber:ls,isBoolean:or,isObject:Je,isPlainObject:tt,isEmptyObject:ir,isReadableStream:fr,isRequest:pr,isResponse:br,isHeaders:gr,isUndefined:$e,isDate:lr,isFile:cr,isBlob:dr,isRegExp:Ar,isFunction:me,isStream:mr,isURLSearchParams:hr,isTypedArray:kr,isFileList:ur,forEach:Qe,merge:jt,extend:yr,trim:jr,stripBOM:vr,inherits:Nr,toFlatObject:wr,kindOf:it,kindOfTest:ve,endsWith:Cr,toArray:_r,forEachEntry:Sr,matchAll:Er,isHTMLForm:Mr,hasOwnProperty:$t,hasOwnProp:$t,reduceDescriptors:us,freezeMethods:Or,toObjectSet:Lr,toCamelCase:Rr,noop:Fr,toFiniteNumber:Pr,findKey:cs,global:Oe,isContextDefined:ds,isSpecCompliantForm:Dr,toJSONObject:Tr,isAsyncFn:$r,isThenable:Ir,setImmediate:ms,asap:Br,isIterable:Ur};function W(t,s,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}p.inherits(W,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:p.toJSONObject(this.config),code:this.code,status:this.status}}});const xs=W.prototype,hs={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{hs[t]={value:t}});Object.defineProperties(W,hs);Object.defineProperty(xs,"isAxiosError",{value:!0});W.from=(t,s,n,r,a,d)=>{const u=Object.create(xs);p.toFlatObject(t,u,function(c){return c!==Error.prototype},i=>i!=="isAxiosError");const m=t&&t.message?t.message:"Error",o=s==null&&t?t.code:s;return W.call(u,m,o,n,r,a),t&&u.cause==null&&Object.defineProperty(u,"cause",{value:t,configurable:!0}),u.name=t&&t.name||"Error",d&&Object.assign(u,d),u};const zr=null;function yt(t){return p.isPlainObject(t)||p.isArray(t)}function fs(t){return p.endsWith(t,"[]")?t.slice(0,-2):t}function It(t,s,n){return t?t.concat(s).map(function(a,d){return a=fs(a),!n&&d?"["+a+"]":a}).join(n?".":""):s}function Hr(t){return p.isArray(t)&&!t.some(yt)}const Yr=p.toFlatObject(p,{},null,function(s){return/^is[A-Z]/.test(s)});function ct(t,s,n){if(!p.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,n=p.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,f){return!p.isUndefined(f[j])});const r=n.metaTokens,a=n.visitor||c,d=n.dots,u=n.indexes,o=(n.Blob||typeof Blob!="undefined"&&Blob)&&p.isSpecCompliantForm(s);if(!p.isFunction(a))throw new TypeError("visitor must be a function");function i(x){if(x===null)return"";if(p.isDate(x))return x.toISOString();if(p.isBoolean(x))return x.toString();if(!o&&p.isBlob(x))throw new W("Blob is not supported. Use a Buffer instead.");return p.isArrayBuffer(x)||p.isTypedArray(x)?o&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function c(x,j,f){let k=x;if(x&&!f&&typeof x=="object"){if(p.endsWith(j,"{}"))j=r?j:j.slice(0,-2),x=JSON.stringify(x);else if(p.isArray(x)&&Hr(x)||(p.isFileList(x)||p.endsWith(j,"[]"))&&(k=p.toArray(x)))return j=fs(j),k.forEach(function(v,M){!(p.isUndefined(v)||v===null)&&s.append(u===!0?It([j],M,d):u===null?j:j+"[]",i(v))}),!1}return yt(x)?!0:(s.append(It(f,j,d),i(x)),!1)}const l=[],h=Object.assign(Yr,{defaultVisitor:c,convertValue:i,isVisitable:yt});function b(x,j){if(!p.isUndefined(x)){if(l.indexOf(x)!==-1)throw Error("Circular reference detected in "+j.join("."));l.push(x),p.forEach(x,function(k,S){(!(p.isUndefined(k)||k===null)&&a.call(s,k,p.isString(S)?S.trim():S,j,h))===!0&&b(k,j?j.concat(S):[S])}),l.pop()}}if(!p.isObject(t))throw new TypeError("data must be an object");return b(t),s}function Bt(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function Ct(t,s){this._pairs=[],t&&ct(t,this,s)}const ps=Ct.prototype;ps.append=function(s,n){this._pairs.push([s,n])};ps.toString=function(s){const n=s?function(r){return s.call(this,r,Bt)}:Bt;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function qr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function bs(t,s,n){if(!s)return t;const r=n&&n.encode||qr;p.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let d;if(a?d=a(s,n):d=p.isURLSearchParams(s)?s.toString():new Ct(s,n).toString(r),d){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+d}return t}class Ut{constructor(){this.handlers=[]}use(s,n,r){return this.handlers.push({fulfilled:s,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){p.forEach(this.handlers,function(r){r!==null&&s(r)})}}const gs={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wr=typeof URLSearchParams!="undefined"?URLSearchParams:Ct,Vr=typeof FormData!="undefined"?FormData:null,Jr=typeof Blob!="undefined"?Blob:null,Qr={isBrowser:!0,classes:{URLSearchParams:Wr,FormData:Vr,Blob:Jr},protocols:["http","https","file","blob","url","data"]},_t=typeof window!="undefined"&&typeof document!="undefined",vt=typeof navigator=="object"&&navigator||void 0,Kr=_t&&(!vt||["ReactNative","NativeScript","NS"].indexOf(vt.product)<0),Xr=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Gr=_t&&window.location.href||"http://localhost",Zr=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_t,hasStandardBrowserEnv:Kr,hasStandardBrowserWebWorkerEnv:Xr,navigator:vt,origin:Gr},Symbol.toStringTag,{value:"Module"})),ue=P(P({},Zr),Qr);function en(t,s){return ct(t,new ue.classes.URLSearchParams,P({visitor:function(n,r,a,d){return ue.isNode&&p.isBuffer(n)?(this.append(r,n.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},s))}function tn(t){return p.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function sn(t){const s={},n=Object.keys(t);let r;const a=n.length;let d;for(r=0;r<a;r++)d=n[r],s[d]=t[d];return s}function js(t){function s(n,r,a,d){let u=n[d++];if(u==="__proto__")return!0;const m=Number.isFinite(+u),o=d>=n.length;return u=!u&&p.isArray(a)?a.length:u,o?(p.hasOwnProp(a,u)?a[u]=[a[u],r]:a[u]=r,!m):((!a[u]||!p.isObject(a[u]))&&(a[u]=[]),s(n,r,a[u],d)&&p.isArray(a[u])&&(a[u]=sn(a[u])),!m)}if(p.isFormData(t)&&p.isFunction(t.entries)){const n={};return p.forEachEntry(t,(r,a)=>{s(tn(r),a,n,0)}),n}return null}function rn(t,s,n){if(p.isString(t))try{return(s||JSON.parse)(t),p.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ke={transitional:gs,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,d=p.isObject(s);if(d&&p.isHTMLForm(s)&&(s=new FormData(s)),p.isFormData(s))return a?JSON.stringify(js(s)):s;if(p.isArrayBuffer(s)||p.isBuffer(s)||p.isStream(s)||p.isFile(s)||p.isBlob(s)||p.isReadableStream(s))return s;if(p.isArrayBufferView(s))return s.buffer;if(p.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let m;if(d){if(r.indexOf("application/x-www-form-urlencoded")>-1)return en(s,this.formSerializer).toString();if((m=p.isFileList(s))||r.indexOf("multipart/form-data")>-1){const o=this.env&&this.env.FormData;return ct(m?{"files[]":s}:s,o&&new o,this.formSerializer)}}return d||a?(n.setContentType("application/json",!1),rn(s)):s}],transformResponse:[function(s){const n=this.transitional||Ke.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(p.isResponse(s)||p.isReadableStream(s))return s;if(s&&p.isString(s)&&(r&&!this.responseType||a)){const u=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(s,this.parseReviver)}catch(m){if(u)throw m.name==="SyntaxError"?W.from(m,W.ERR_BAD_RESPONSE,this,null,this.response):m}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ue.classes.FormData,Blob:ue.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};p.forEach(["delete","get","head","post","put","patch"],t=>{Ke.headers[t]={}});const nn=p.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),an=t=>{const s={};let n,r,a;return t&&t.split(`
`).forEach(function(u){a=u.indexOf(":"),n=u.substring(0,a).trim().toLowerCase(),r=u.substring(a+1).trim(),!(!n||s[n]&&nn[n])&&(n==="set-cookie"?s[n]?s[n].push(r):s[n]=[r]:s[n]=s[n]?s[n]+", "+r:r)}),s},zt=Symbol("internals");function ze(t){return t&&String(t).trim().toLowerCase()}function st(t){return t===!1||t==null?t:p.isArray(t)?t.map(st):String(t)}function on(t){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)s[r[1]]=r[2];return s}const ln=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ht(t,s,n,r,a){if(p.isFunction(r))return r.call(this,s,n);if(a&&(s=n),!!p.isString(s)){if(p.isString(r))return s.indexOf(r)!==-1;if(p.isRegExp(r))return r.test(s)}}function cn(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,r)=>n.toUpperCase()+r)}function dn(t,s){const n=p.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(a,d,u){return this[r].call(this,s,a,d,u)},configurable:!0})})}let xe=class{constructor(s){s&&this.set(s)}set(s,n,r){const a=this;function d(m,o,i){const c=ze(o);if(!c)throw new Error("header name must be a non-empty string");const l=p.findKey(a,c);(!l||a[l]===void 0||i===!0||i===void 0&&a[l]!==!1)&&(a[l||o]=st(m))}const u=(m,o)=>p.forEach(m,(i,c)=>d(i,c,o));if(p.isPlainObject(s)||s instanceof this.constructor)u(s,n);else if(p.isString(s)&&(s=s.trim())&&!ln(s))u(an(s),n);else if(p.isObject(s)&&p.isIterable(s)){let m={},o,i;for(const c of s){if(!p.isArray(c))throw TypeError("Object iterator must return a key-value pair");m[i=c[0]]=(o=m[i])?p.isArray(o)?[...o,c[1]]:[o,c[1]]:c[1]}u(m,n)}else s!=null&&d(n,s,r);return this}get(s,n){if(s=ze(s),s){const r=p.findKey(this,s);if(r){const a=this[r];if(!n)return a;if(n===!0)return on(a);if(p.isFunction(n))return n.call(this,a,r);if(p.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=ze(s),s){const r=p.findKey(this,s);return!!(r&&this[r]!==void 0&&(!n||ht(this,this[r],r,n)))}return!1}delete(s,n){const r=this;let a=!1;function d(u){if(u=ze(u),u){const m=p.findKey(r,u);m&&(!n||ht(r,r[m],m,n))&&(delete r[m],a=!0)}}return p.isArray(s)?s.forEach(d):d(s),a}clear(s){const n=Object.keys(this);let r=n.length,a=!1;for(;r--;){const d=n[r];(!s||ht(this,this[d],d,s,!0))&&(delete this[d],a=!0)}return a}normalize(s){const n=this,r={};return p.forEach(this,(a,d)=>{const u=p.findKey(r,d);if(u){n[u]=st(a),delete n[d];return}const m=s?cn(d):String(d).trim();m!==d&&delete n[d],n[m]=st(a),r[m]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return p.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=s&&p.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const r=new this(s);return n.forEach(a=>r.set(a)),r}static accessor(s){const r=(this[zt]=this[zt]={accessors:{}}).accessors,a=this.prototype;function d(u){const m=ze(u);r[m]||(dn(a,u),r[m]=!0)}return p.isArray(s)?s.forEach(d):d(s),this}};xe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);p.reduceDescriptors(xe.prototype,({value:t},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[n]=r}}});p.freezeMethods(xe);function ft(t,s){const n=this||Ke,r=s||n,a=xe.from(r.headers);let d=r.data;return p.forEach(t,function(m){d=m.call(n,d,a.normalize(),s?s.status:void 0)}),a.normalize(),d}function ys(t){return!!(t&&t.__CANCEL__)}function Ue(t,s,n){W.call(this,t==null?"canceled":t,W.ERR_CANCELED,s,n),this.name="CanceledError"}p.inherits(Ue,W,{__CANCEL__:!0});function vs(t,s,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):s(new W("Request failed with status code "+n.status,[W.ERR_BAD_REQUEST,W.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function un(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function mn(t,s){t=t||10;const n=new Array(t),r=new Array(t);let a=0,d=0,u;return s=s!==void 0?s:1e3,function(o){const i=Date.now(),c=r[d];u||(u=i),n[a]=o,r[a]=i;let l=d,h=0;for(;l!==a;)h+=n[l++],l=l%t;if(a=(a+1)%t,a===d&&(d=(d+1)%t),i-u<s)return;const b=c&&i-c;return b?Math.round(h*1e3/b):void 0}}function xn(t,s){let n=0,r=1e3/s,a,d;const u=(i,c=Date.now())=>{n=c,a=null,d&&(clearTimeout(d),d=null),t(...i)};return[(...i)=>{const c=Date.now(),l=c-n;l>=r?u(i,c):(a=i,d||(d=setTimeout(()=>{d=null,u(a)},r-l)))},()=>a&&u(a)]}const nt=(t,s,n=3)=>{let r=0;const a=mn(50,250);return xn(d=>{const u=d.loaded,m=d.lengthComputable?d.total:void 0,o=u-r,i=a(o),c=u<=m;r=u;const l={loaded:u,total:m,progress:m?u/m:void 0,bytes:o,rate:i||void 0,estimated:i&&m&&c?(m-u)/i:void 0,event:d,lengthComputable:m!=null,[s?"download":"upload"]:!0};t(l)},n)},Ht=(t,s)=>{const n=t!=null;return[r=>s[0]({lengthComputable:n,total:t,loaded:r}),s[1]]},Yt=t=>(...s)=>p.asap(()=>t(...s)),hn=ue.hasStandardBrowserEnv?((t,s)=>n=>(n=new URL(n,ue.origin),t.protocol===n.protocol&&t.host===n.host&&(s||t.port===n.port)))(new URL(ue.origin),ue.navigator&&/(msie|trident)/i.test(ue.navigator.userAgent)):()=>!0,fn=ue.hasStandardBrowserEnv?{write(t,s,n,r,a,d,u){if(typeof document=="undefined")return;const m=[`${t}=${encodeURIComponent(s)}`];p.isNumber(n)&&m.push(`expires=${new Date(n).toUTCString()}`),p.isString(r)&&m.push(`path=${r}`),p.isString(a)&&m.push(`domain=${a}`),d===!0&&m.push("secure"),p.isString(u)&&m.push(`SameSite=${u}`),document.cookie=m.join("; ")},read(t){if(typeof document=="undefined")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function pn(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function bn(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function Ns(t,s,n){let r=!pn(s);return t&&(r||n==!1)?bn(t,s):s}const qt=t=>t instanceof xe?P({},t):t;function Fe(t,s){s=s||{};const n={};function r(i,c,l,h){return p.isPlainObject(i)&&p.isPlainObject(c)?p.merge.call({caseless:h},i,c):p.isPlainObject(c)?p.merge({},c):p.isArray(c)?c.slice():c}function a(i,c,l,h){if(p.isUndefined(c)){if(!p.isUndefined(i))return r(void 0,i,l,h)}else return r(i,c,l,h)}function d(i,c){if(!p.isUndefined(c))return r(void 0,c)}function u(i,c){if(p.isUndefined(c)){if(!p.isUndefined(i))return r(void 0,i)}else return r(void 0,c)}function m(i,c,l){if(l in s)return r(i,c);if(l in t)return r(void 0,i)}const o={url:d,method:d,data:d,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:m,headers:(i,c,l)=>a(qt(i),qt(c),l,!0)};return p.forEach(Object.keys(P(P({},t),s)),function(c){const l=o[c]||a,h=l(t[c],s[c],c);p.isUndefined(h)&&l!==m||(n[c]=h)}),n}const ws=t=>{const s=Fe({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:d,headers:u,auth:m}=s;if(s.headers=u=xe.from(u),s.url=bs(Ns(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),m&&u.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),p.isFormData(n)){if(ue.hasStandardBrowserEnv||ue.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(p.isFunction(n.getHeaders)){const o=n.getHeaders(),i=["content-type","content-length"];Object.entries(o).forEach(([c,l])=>{i.includes(c.toLowerCase())&&u.set(c,l)})}}if(ue.hasStandardBrowserEnv&&(r&&p.isFunction(r)&&(r=r(s)),r||r!==!1&&hn(s.url))){const o=a&&d&&fn.read(d);o&&u.set(a,o)}return s},gn=typeof XMLHttpRequest!="undefined",jn=gn&&function(t){return new Promise(function(n,r){const a=ws(t);let d=a.data;const u=xe.from(a.headers).normalize();let{responseType:m,onUploadProgress:o,onDownloadProgress:i}=a,c,l,h,b,x;function j(){b&&b(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(c),a.signal&&a.signal.removeEventListener("abort",c)}let f=new XMLHttpRequest;f.open(a.method.toUpperCase(),a.url,!0),f.timeout=a.timeout;function k(){if(!f)return;const v=xe.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),F={data:!m||m==="text"||m==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:v,config:t,request:f};vs(function(z){n(z),j()},function(z){r(z),j()},F),f=null}"onloadend"in f?f.onloadend=k:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(k)},f.onabort=function(){f&&(r(new W("Request aborted",W.ECONNABORTED,t,f)),f=null)},f.onerror=function(M){const F=M&&M.message?M.message:"Network Error",Q=new W(F,W.ERR_NETWORK,t,f);Q.event=M||null,r(Q),f=null},f.ontimeout=function(){let M=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const F=a.transitional||gs;a.timeoutErrorMessage&&(M=a.timeoutErrorMessage),r(new W(M,F.clarifyTimeoutError?W.ETIMEDOUT:W.ECONNABORTED,t,f)),f=null},d===void 0&&u.setContentType(null),"setRequestHeader"in f&&p.forEach(u.toJSON(),function(M,F){f.setRequestHeader(F,M)}),p.isUndefined(a.withCredentials)||(f.withCredentials=!!a.withCredentials),m&&m!=="json"&&(f.responseType=a.responseType),i&&([h,x]=nt(i,!0),f.addEventListener("progress",h)),o&&f.upload&&([l,b]=nt(o),f.upload.addEventListener("progress",l),f.upload.addEventListener("loadend",b)),(a.cancelToken||a.signal)&&(c=v=>{f&&(r(!v||v.type?new Ue(null,t,f):v),f.abort(),f=null)},a.cancelToken&&a.cancelToken.subscribe(c),a.signal&&(a.signal.aborted?c():a.signal.addEventListener("abort",c)));const S=un(a.url);if(S&&ue.protocols.indexOf(S)===-1){r(new W("Unsupported protocol "+S+":",W.ERR_BAD_REQUEST,t));return}f.send(d||null)})},yn=(t,s)=>{const{length:n}=t=t?t.filter(Boolean):[];if(s||n){let r=new AbortController,a;const d=function(i){if(!a){a=!0,m();const c=i instanceof Error?i:this.reason;r.abort(c instanceof W?c:new Ue(c instanceof Error?c.message:c))}};let u=s&&setTimeout(()=>{u=null,d(new W(`timeout ${s} of ms exceeded`,W.ETIMEDOUT))},s);const m=()=>{t&&(u&&clearTimeout(u),u=null,t.forEach(i=>{i.unsubscribe?i.unsubscribe(d):i.removeEventListener("abort",d)}),t=null)};t.forEach(i=>i.addEventListener("abort",d));const{signal:o}=r;return o.unsubscribe=()=>p.asap(m),o}},vn=function*(t,s){let n=t.byteLength;if(n<s){yield t;return}let r=0,a;for(;r<n;)a=r+s,yield t.slice(r,a),r=a},Nn=function(t,s){return mt(this,null,function*(){try{for(var n=Dt(wn(t)),r,a,d;r=!(a=yield new Re(n.next())).done;r=!1){const u=a.value;yield*xt(vn(u,s))}}catch(a){d=[a]}finally{try{r&&(a=n.return)&&(yield new Re(a.call(n)))}finally{if(d)throw d[0]}}})},wn=function(t){return mt(this,null,function*(){if(t[Symbol.asyncIterator]){yield*xt(t);return}const s=t.getReader();try{for(;;){const{done:n,value:r}=yield new Re(s.read());if(n)break;yield r}}finally{yield new Re(s.cancel())}})},Wt=(t,s,n,r)=>{const a=Nn(t,s);let d=0,u,m=i=>{u||(u=!0,r&&r(i))};return new ReadableStream({pull(i){return G(this,null,function*(){try{const{done:c,value:l}=yield a.next();if(c){m(),i.close();return}let h=l.byteLength;if(n){let b=d+=h;n(b)}i.enqueue(new Uint8Array(l))}catch(c){throw m(c),c}})},cancel(i){return m(i),a.return()}},{highWaterMark:2})},Vt=64*1024,{isFunction:et}=p,Cn=(({Request:t,Response:s})=>({Request:t,Response:s}))(p.global),{ReadableStream:Jt,TextEncoder:Qt}=p.global,Kt=(t,...s)=>{try{return!!t(...s)}catch(n){return!1}},_n=t=>{t=p.merge.call({skipUndefined:!0},Cn,t);const{fetch:s,Request:n,Response:r}=t,a=s?et(s):typeof fetch=="function",d=et(n),u=et(r);if(!a)return!1;const m=a&&et(Jt),o=a&&(typeof Qt=="function"?(x=>j=>x.encode(j))(new Qt):x=>G(Ee,null,function*(){return new Uint8Array(yield new n(x).arrayBuffer())})),i=d&&m&&Kt(()=>{let x=!1;const j=new n(ue.origin,{body:new Jt,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!j}),c=u&&m&&Kt(()=>p.isReadableStream(new r("").body)),l={stream:c&&(x=>x.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!l[x]&&(l[x]=(j,f)=>{let k=j&&j[x];if(k)return k.call(j);throw new W(`Response type '${x}' is not supported`,W.ERR_NOT_SUPPORT,f)})});const h=x=>G(Ee,null,function*(){if(x==null)return 0;if(p.isBlob(x))return x.size;if(p.isSpecCompliantForm(x))return(yield new n(ue.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(p.isArrayBufferView(x)||p.isArrayBuffer(x))return x.byteLength;if(p.isURLSearchParams(x)&&(x=x+""),p.isString(x))return(yield o(x)).byteLength}),b=(x,j)=>G(Ee,null,function*(){const f=p.toFiniteNumber(x.getContentLength());return f==null?h(j):f});return x=>G(Ee,null,function*(){let{url:j,method:f,data:k,signal:S,cancelToken:v,timeout:M,onDownloadProgress:F,onUploadProgress:Q,responseType:z,headers:L,withCredentials:Z="same-origin",fetchOptions:X}=ws(x),Y=s||fetch;z=z?(z+"").toLowerCase():"text";let ie=yn([S,v&&v.toAbortSignal()],M),oe=null;const O=ie&&ie.unsubscribe&&(()=>{ie.unsubscribe()});let E;try{if(Q&&i&&f!=="get"&&f!=="head"&&(E=yield b(L,k))!==0){let w=new n(j,{method:"POST",body:k,duplex:"half"}),I;if(p.isFormData(k)&&(I=w.headers.get("content-type"))&&L.setContentType(I),w.body){const[H,R]=Ht(E,nt(Yt(Q)));k=Wt(w.body,Vt,H,R)}}p.isString(Z)||(Z=Z?"include":"omit");const C=d&&"credentials"in n.prototype,N=B(P({},X),{signal:ie,method:f.toUpperCase(),headers:L.normalize().toJSON(),body:k,duplex:"half",credentials:C?Z:void 0});oe=d&&new n(j,N);let _=yield d?Y(oe,X):Y(j,N);const A=c&&(z==="stream"||z==="response");if(c&&(F||A&&O)){const w={};["status","statusText","headers"].forEach(D=>{w[D]=_[D]});const I=p.toFiniteNumber(_.headers.get("content-length")),[H,R]=F&&Ht(I,nt(Yt(F),!0))||[];_=new r(Wt(_.body,Vt,H,()=>{R&&R(),O&&O()}),w)}z=z||"text";let T=yield l[p.findKey(l,z)||"text"](_,x);return!A&&O&&O(),yield new Promise((w,I)=>{vs(w,I,{data:T,headers:xe.from(_.headers),status:_.status,statusText:_.statusText,config:x,request:oe})})}catch(C){throw O&&O(),C&&C.name==="TypeError"&&/Load failed|fetch/i.test(C.message)?Object.assign(new W("Network Error",W.ERR_NETWORK,x,oe),{cause:C.cause||C}):W.from(C,C&&C.code,x,oe)}})},kn=new Map,Cs=t=>{let s=t&&t.env||{};const{fetch:n,Request:r,Response:a}=s,d=[r,a,n];let u=d.length,m=u,o,i,c=kn;for(;m--;)o=d[m],i=c.get(o),i===void 0&&c.set(o,i=m?new Map:_n(s)),c=i;return i};Cs();const kt={http:zr,xhr:jn,fetch:{get:Cs}};p.forEach(kt,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch(n){}Object.defineProperty(t,"adapterName",{value:s})}});const Xt=t=>`- ${t}`,Sn=t=>p.isFunction(t)||t===null||t===!1;function En(t,s){t=p.isArray(t)?t:[t];const{length:n}=t;let r,a;const d={};for(let u=0;u<n;u++){r=t[u];let m;if(a=r,!Sn(r)&&(a=kt[(m=String(r)).toLowerCase()],a===void 0))throw new W(`Unknown adapter '${m}'`);if(a&&(p.isFunction(a)||(a=a.get(s))))break;d[m||"#"+u]=a}if(!a){const u=Object.entries(d).map(([o,i])=>`adapter ${o} `+(i===!1?"is not supported by the environment":"is not available in the build"));let m=n?u.length>1?`since :
`+u.map(Xt).join(`
`):" "+Xt(u[0]):"as no adapter specified";throw new W("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return a}const _s={getAdapter:En,adapters:kt};function pt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ue(null,t)}function Gt(t){return pt(t),t.headers=xe.from(t.headers),t.data=ft.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),_s.getAdapter(t.adapter||Ke.adapter,t)(t).then(function(r){return pt(t),r.data=ft.call(t,t.transformResponse,r),r.headers=xe.from(r.headers),r},function(r){return ys(r)||(pt(t),r&&r.response&&(r.response.data=ft.call(t,t.transformResponse,r.response),r.response.headers=xe.from(r.response.headers))),Promise.reject(r)})}const ks="1.13.2",dt={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{dt[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const Zt={};dt.transitional=function(s,n,r){function a(d,u){return"[Axios v"+ks+"] Transitional option '"+d+"'"+u+(r?". "+r:"")}return(d,u,m)=>{if(s===!1)throw new W(a(u," has been removed"+(n?" in "+n:"")),W.ERR_DEPRECATED);return n&&!Zt[u]&&(Zt[u]=!0,console.warn(a(u," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(d,u,m):!0}};dt.spelling=function(s){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function Mn(t,s,n){if(typeof t!="object")throw new W("options must be an object",W.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let a=r.length;for(;a-- >0;){const d=r[a],u=s[d];if(u){const m=t[d],o=m===void 0||u(m,d,t);if(o!==!0)throw new W("option "+d+" must be "+o,W.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new W("Unknown option "+d,W.ERR_BAD_OPTION)}}const rt={assertOptions:Mn,validators:dt},Ce=rt.validators;let Le=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Ut,response:new Ut}}request(s,n){return G(this,null,function*(){try{return yield this._request(s,n)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const d=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?d&&!String(r.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+d):r.stack=d}catch(u){}}throw r}})}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=Fe(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:d}=n;r!==void 0&&rt.assertOptions(r,{silentJSONParsing:Ce.transitional(Ce.boolean),forcedJSONParsing:Ce.transitional(Ce.boolean),clarifyTimeoutError:Ce.transitional(Ce.boolean)},!1),a!=null&&(p.isFunction(a)?n.paramsSerializer={serialize:a}:rt.assertOptions(a,{encode:Ce.function,serialize:Ce.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),rt.assertOptions(n,{baseUrl:Ce.spelling("baseURL"),withXsrfToken:Ce.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=d&&p.merge(d.common,d[n.method]);d&&p.forEach(["delete","get","head","post","put","patch","common"],x=>{delete d[x]}),n.headers=xe.concat(u,d);const m=[];let o=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(n)===!1||(o=o&&j.synchronous,m.unshift(j.fulfilled,j.rejected))});const i=[];this.interceptors.response.forEach(function(j){i.push(j.fulfilled,j.rejected)});let c,l=0,h;if(!o){const x=[Gt.bind(this),void 0];for(x.unshift(...m),x.push(...i),h=x.length,c=Promise.resolve(n);l<h;)c=c.then(x[l++],x[l++]);return c}h=m.length;let b=n;for(;l<h;){const x=m[l++],j=m[l++];try{b=x(b)}catch(f){j.call(this,f);break}}try{c=Gt.call(this,b)}catch(x){return Promise.reject(x)}for(l=0,h=i.length;l<h;)c=c.then(i[l++],i[l++]);return c}getUri(s){s=Fe(this.defaults,s);const n=Ns(s.baseURL,s.url,s.allowAbsoluteUrls);return bs(n,s.params,s.paramsSerializer)}};p.forEach(["delete","get","head","options"],function(s){Le.prototype[s]=function(n,r){return this.request(Fe(r||{},{method:s,url:n,data:(r||{}).data}))}});p.forEach(["post","put","patch"],function(s){function n(r){return function(d,u,m){return this.request(Fe(m||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:d,data:u}))}}Le.prototype[s]=n(),Le.prototype[s+"Form"]=n(!0)});let Rn=class Ss{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(d){n=d});const r=this;this.promise.then(a=>{if(!r._listeners)return;let d=r._listeners.length;for(;d-- >0;)r._listeners[d](a);r._listeners=null}),this.promise.then=a=>{let d;const u=new Promise(m=>{r.subscribe(m),d=m}).then(a);return u.cancel=function(){r.unsubscribe(d)},u},s(function(d,u,m){r.reason||(r.reason=new Ue(d,u,m),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=r=>{s.abort(r)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new Ss(function(a){s=a}),cancel:s}}};function An(t){return function(n){return t.apply(null,n)}}function On(t){return p.isObject(t)&&t.isAxiosError===!0}const Nt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Nt).forEach(([t,s])=>{Nt[s]=t});function Es(t){const s=new Le(t),n=as(Le.prototype.request,s);return p.extend(n,Le.prototype,s,{allOwnKeys:!0}),p.extend(n,s,null,{allOwnKeys:!0}),n.create=function(a){return Es(Fe(t,a))},n}const le=Es(Ke);le.Axios=Le;le.CanceledError=Ue;le.CancelToken=Rn;le.isCancel=ys;le.VERSION=ks;le.toFormData=ct;le.AxiosError=W;le.Cancel=le.CanceledError;le.all=function(s){return Promise.all(s)};le.spread=An;le.isAxiosError=On;le.mergeConfig=Fe;le.AxiosHeaders=xe;le.formToJSON=t=>js(p.isHTMLForm(t)?new FormData(t):t);le.getAdapter=_s.getAdapter;le.HttpStatusCode=Nt;le.default=le;const{Axios:ha,AxiosError:fa,CanceledError:pa,isCancel:ba,CancelToken:ga,VERSION:ja,all:ya,Cancel:va,isAxiosError:Na,spread:wa,toFormData:Ca,AxiosHeaders:_a,HttpStatusCode:ka,formToJSON:Sa,getAdapter:Ea,mergeConfig:Ma}=le,Ln="/api",Fn=Ln,V=le.create({baseURL:Fn});V.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers=B(P({},t.headers),{Authorization:`Bearer ${s}`})),t});V.interceptors.response.use(t=>t,t=>{var n;return((n=t==null?void 0:t.response)==null?void 0:n.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("name"),localStorage.removeItem("userId"),typeof window!="undefined"&&window.location.pathname!=="/"&&window.location.assign("/")),Promise.reject(t)});const Ms=y.createContext(void 0),Pn=({children:t})=>{const[s,n]=y.useState({token:null,role:null,name:null,userId:null,user:null,mustChangePassword:!1,ready:!1});y.useEffect(()=>{G(Ee,null,function*(){const m=localStorage.getItem("token"),o=localStorage.getItem("role"),i=localStorage.getItem("name"),c=localStorage.getItem("userId");if(m)try{const l=yield V.get("/auth/me",{headers:{Authorization:`Bearer ${m}`}}),h=l.data.role;localStorage.setItem("role",h),localStorage.setItem("name",l.data.full_name),localStorage.setItem("userId",l.data.id),n({token:m,role:h,name:l.data.full_name,userId:l.data.id,user:l.data,mustChangePassword:!!l.data.must_change_password,ready:!0});return}catch(l){localStorage.clear(),n({token:null,role:null,name:null,userId:null,user:null,mustChangePassword:!1,ready:!0});return}(o||i||c)&&localStorage.clear(),n({token:null,role:null,name:null,userId:null,user:null,mustChangePassword:!1,ready:!0})})},[]);const r=()=>G(Ee,null,function*(){const u=localStorage.getItem("token");if(!u)return;const m=yield V.get("/auth/me",{headers:{Authorization:`Bearer ${u}`}}),o=m.data.role;localStorage.setItem("role",o),localStorage.setItem("name",m.data.full_name),localStorage.setItem("userId",m.data.id),n({token:u,role:o,name:m.data.full_name,userId:m.data.id,mustChangePassword:!!m.data.must_change_password,ready:!0})}),a=(u,m,o,i)=>G(Ee,null,function*(){const c=yield V.post("/auth/token",{email:u,password:m,mfa_code:o,recovery_code:i}),l=c.data.access_token;localStorage.setItem("token",l);const h=yield V.get("/auth/me",{headers:{Authorization:`Bearer ${l}`}}),b=h.data.role;return localStorage.setItem("role",b),localStorage.setItem("name",h.data.full_name),localStorage.setItem("userId",h.data.id),n({token:l,role:b,name:h.data.full_name,userId:h.data.id,user:h.data,mustChangePassword:!!h.data.must_change_password,ready:!0}),c.data}),d=()=>{localStorage.clear(),n({token:null,role:null,name:null,userId:null,user:null,mustChangePassword:!1,ready:!0})};return e.jsx(Ms.Provider,{value:B(P({},s),{login:a,logout:d,refreshMe:r}),children:t})},De=()=>{const t=y.useContext(Ms);if(!t)throw new Error("useAuth must be used within AuthProvider");return t};function Ae({to:t,icon:s,label:n,badge:r}){const d=rs().pathname===t;return e.jsxs(Gs,{to:t,className:`flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition ${d?"bg-app text-text-primary":"text-text-secondary hover:bg-app hover:text-text-primary"}`,children:[e.jsx("span",{className:"h-5 w-5",children:s}),e.jsx("span",{className:"flex-1",children:n}),r!==void 0&&r>0&&e.jsx("span",{className:"ml-auto inline-flex h-5 min-w-5 items-center justify-center rounded-full bg-app px-1 text-[11px] font-semibold text-text-secondary border border-border",children:r})]})}function Dn(){var n,r,a;const{user:t,logout:s}=De();return e.jsxs("div",{className:"fixed inset-y-0 left-0 w-64 bg-surface border-r border-border px-6 py-6 flex flex-col gap-6 overflow-y-auto scrollbar-thin",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-brand flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"C"})}),e.jsx("span",{className:"text-lg font-semibold text-text-primary",children:"Compass"})]}),e.jsxs("nav",{className:"flex flex-col gap-1",children:[e.jsx(Ae,{to:"/",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),label:"Dashboard"}),e.jsx(Ae,{to:"/tasks",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),label:"My Tasks"}),e.jsx(Ae,{to:"/complaints",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),label:"Complaints"}),e.jsx(Ae,{to:"/create",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),label:"New Complaint"}),(t==null?void 0:t.role)!=="read_only"&&e.jsx(Ae,{to:"/reference",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),label:"Reference Data"}),((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="complaints_manager")&&e.jsx(Ae,{to:"/users",icon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),label:"Users"}),e.jsx(Ae,{to:"/settings",icon:e.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),label:"Settings"})]}),e.jsxs("div",{className:"mt-auto pt-6 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3 px-2",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-brand flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:((r=(n=t==null?void 0:t.full_name)==null?void 0:n.charAt(0))==null?void 0:r.toUpperCase())||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary truncate",children:(t==null?void 0:t.full_name)||"User"}),e.jsx("div",{className:"text-xs text-text-secondary truncate capitalize",children:((a=t==null?void 0:t.role)==null?void 0:a.replace(/_/g," "))||"User"})]})]}),e.jsxs("button",{onClick:s,className:"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium text-text-secondary hover:bg-app hover:text-text-primary transition",children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{children:"Sign out"})]})]})]})}function Tn({children:t}){return e.jsxs("div",{className:"min-h-screen bg-app text-text-primary",children:[e.jsx(Dn,{}),e.jsx("div",{className:"ml-64 min-h-screen flex flex-col",children:t})]})}function $(d){var u=d,{variant:t="primary",size:s="md",className:n="",children:r}=u,a=ut(u,["variant","size","className","children"]);const m="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-offset-2 focus-visible:ring-offset-app disabled:opacity-40 disabled:pointer-events-none",o={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm"},i={primary:"bg-brand text-white hover:opacity-90 active:translate-y-px",secondary:"bg-surface text-text-primary border border-border hover:bg-app active:translate-y-px",ghost:"bg-transparent text-text-primary hover:bg-app active:translate-y-px",icon:"h-10 w-10 p-0 rounded-full hover:bg-app active:translate-y-px"};return e.jsx("button",B(P({className:`${m} ${o[s]} ${i[t]} ${n}`},a),{children:r}))}function se(a){var d=a,{error:t,leadingIcon:s,className:n=""}=d,r=ut(d,["error","leadingIcon","className"]);const u="w-full h-10 rounded-lg border bg-surface px-3 text-sm text-text-primary placeholder:text-text-muted outline-none transition",m=t?"border-semantic-error focus:border-semantic-error focus:ring-2 focus:ring-semantic-error/15":"border-border focus:border-brand focus:ring-2 focus:ring-brand/15",o=s?"pl-10":"px-3";return e.jsxs("div",{className:"relative",children:[s&&e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-text-muted",children:s}),e.jsx("input",P({className:`${u} ${m} ${o} ${n}`},r))]})}function te({children:t,className:s="",onClick:n,selected:r,inverse:a}){const d="rounded-card border shadow-card p-4",u=a?"bg-brand text-white border-transparent":"bg-surface text-text-primary border-border",m=r?"ring-2 ring-brand/15":"",o=n?"cursor-pointer hover:shadow-sm active:translate-y-px transition":"";return e.jsx("div",{className:`${d} ${u} ${m} ${o} ${s}`,onClick:n,children:t})}function ne({children:t,className:s=""}){return e.jsx("div",{className:`flex items-start justify-between gap-3 ${s}`,children:t})}function ae({children:t,className:s="",inverse:n}){const r=n?"text-white":"text-text-primary";return e.jsx("h3",{className:`text-sm font-semibold ${r} ${s}`,children:t})}function re({children:t,className:s="",inverse:n}){const r=n?"text-white/80":"text-text-secondary";return e.jsx("div",{className:`mt-2 text-xs leading-relaxed ${r} ${s}`,children:t})}function he({open:t,onClose:s,children:n}){return y.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:s}),e.jsx("div",{className:"fixed left-1/2 top-1/2 w-[min(560px,calc(100%-2rem))] -translate-x-1/2 -translate-y-1/2 rounded-modal border border-border bg-surface p-6 shadow-xl z-50",children:n})]}):null}function fe({children:t,onClose:s}){return e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:t}),s&&e.jsx("button",{onClick:s,className:"inline-flex h-8 w-8 items-center justify-center rounded-full text-text-muted hover:bg-app hover:text-text-primary transition",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function pe({children:t}){return e.jsx("div",{className:"text-sm text-text-secondary",children:t})}function be({children:t}){return e.jsx("div",{className:"mt-6 flex justify-end gap-3",children:t})}function Rs({children:t,className:s=""}){return e.jsx("div",{className:`overflow-hidden rounded-card border border-border bg-surface ${s}`,children:e.jsx("table",{className:"w-full table-auto",children:t})})}function $n({children:t}){return e.jsx("thead",{className:"bg-app",children:t})}function In({children:t}){return e.jsx("tbody",{children:t})}function es({children:t,onClick:s,className:n=""}){const r=s?"cursor-pointer hover:bg-app/60":"hover:bg-app/60";return e.jsx("tr",{className:`border-t border-border ${r} ${n}`,onClick:s,children:t})}function He({children:t,className:s=""}){return e.jsx("th",{className:`h-10 px-4 text-left text-xs font-semibold text-text-secondary ${s}`,children:t})}function Ye({children:t,className:s=""}){return e.jsx("td",{className:`h-12 px-4 text-sm text-text-primary ${s}`,children:t})}function bt({value:t,onChange:s,options:n,placeholder:r,className:a=""}){const[d,u]=y.useState(!1),[m,o]=y.useState(t),[i,c]=y.useState(0),l=y.useRef(null),h=y.useRef(null);y.useEffect(()=>{o(t)},[t]);const b=n.filter(S=>S.toLowerCase().includes(m.toLowerCase()));y.useEffect(()=>{const S=v=>{h.current&&!h.current.contains(v.target)&&l.current&&!l.current.contains(v.target)&&(u(!1),s(m))};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[m,s]);const x=S=>{const v=S.target.value;o(v),u(!0),c(0)},j=S=>{var v;o(S),s(S),u(!1),(v=l.current)==null||v.blur()},f=S=>{var v;if(!d&&(S.key==="ArrowDown"||S.key==="ArrowUp")){u(!0);return}if(d)switch(S.key){case"ArrowDown":S.preventDefault(),c(M=>M<b.length-1?M+1:M);break;case"ArrowUp":S.preventDefault(),c(M=>M>0?M-1:0);break;case"Enter":S.preventDefault(),b[i]&&j(b[i]);break;case"Escape":S.preventDefault(),u(!1),(v=l.current)==null||v.blur();break}},k=()=>{setTimeout(()=>{var S;(S=h.current)!=null&&S.contains(document.activeElement)||(u(!1),s(m))},200)};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:l,type:"text",value:m,onChange:x,onFocus:()=>u(!0),onBlur:k,onKeyDown:f,placeholder:r,className:`w-full h-10 rounded-lg border border-border bg-surface pl-3 pr-10 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15 ${a}`}),e.jsx("button",{type:"button",onClick:()=>{var S;u(!d),(S=l.current)==null||S.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition",children:e.jsx("svg",{className:`h-4 w-4 transition-transform ${d?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})})]}),d&&b.length>0&&e.jsx("div",{ref:h,className:"absolute z-50 mt-1 w-full rounded-lg border border-border bg-surface shadow-lg max-h-60 overflow-auto scrollbar-thin",children:b.map((S,v)=>e.jsx("button",{type:"button",onClick:()=>j(S),onMouseEnter:()=>c(v),className:`w-full text-left px-3 py-2 text-sm transition ${v===i?"bg-app text-text-primary":"text-text-secondary hover:bg-app hover:text-text-primary"}`,children:S},S))}),d&&m&&b.length===0&&e.jsx("div",{ref:h,className:"absolute z-50 mt-1 w-full rounded-lg border border-border bg-surface shadow-lg p-3",children:e.jsxs("p",{className:"text-sm text-text-secondary",children:['No matches found. Type to create "',m,'"']})})]})}function ge({title:t,actions:s}){return e.jsxs("div",{className:"h-16 px-10 flex items-center justify-between gap-6 bg-app border-b border-border",children:[t?e.jsx("h1",{className:"text-2xl font-semibold text-text-primary",children:t}):e.jsx("div",{className:"w-full max-w-md",children:e.jsx(se,{type:"search",placeholder:"Search complaints...",leadingIcon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),e.jsx("div",{className:"flex items-center gap-3",children:s})]})}function Bn(){const t=Ie(),{userId:s,token:n}=De(),[r,a]=y.useState(null),[d,u]=y.useState([]),[m,o]=y.useState("mine"),[i,c]=y.useState(!1),[l,h]=y.useState(!0),[b,x]=y.useState(null),j=()=>G(this,null,function*(){var k;if(n){h(!0),x(null);try{const S=yield V.get("/complaints/metrics",{params:{_:Date.now()}});a(S.data)}catch(S){if(((k=S==null?void 0:S.response)==null?void 0:k.status)===401)return;console.error("Failed to load dashboard metrics",S),x("Failed to load metrics. Please try again.")}finally{h(!1)}}});y.useEffect(()=>{j()},[n]),y.useEffect(()=>{if(!s||!n)return;G(this,null,function*(){var S;c(!0);try{let v=[];m==="mine"?v=((yield V.get("/complaints",{params:{handler_id:s,page:1,page_size:50,_:Date.now()}})).data||[]).filter(F=>F.status!=="Closed"):m==="unassigned"?v=((yield V.get("/complaints",{params:{page:1,page_size:100,_:Date.now()}})).data||[]).filter(F=>F.status!=="Closed").filter(F=>!F.assigned_handler_id):m==="breached"?v=((yield V.get("/complaints",{params:{overdue:!0,page:1,page_size:100,_:Date.now()}})).data||[]).filter(F=>F.status!=="Closed"):m==="oldest"&&(v=((yield V.get("/complaints",{params:{page:1,page_size:100,_:Date.now()}})).data||[]).filter(F=>F.status!=="Closed"),v.sort((F,Q)=>U(F.received_at).valueOf()-U(Q.received_at).valueOf()),v=v.slice(0,20)),u(v)}catch(v){if(((S=v==null?void 0:v.response)==null?void 0:S.status)===401)return;console.error("Failed to load queue",v)}finally{c(!1)}})},[s,n,m]);const f=k=>k===null?"N/A":`${Math.round(k)}%`;return e.jsxs(e.Fragment,{children:[e.jsx(ge,{actions:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{variant:"secondary",onClick:j,disabled:l,children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),l?"Refreshing...":"Refresh"]}),e.jsxs($,{variant:"primary",onClick:()=>t("/create"),children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"New Complaint"]})]})}),e.jsxs("div",{className:"px-10 py-6",children:[b&&e.jsxs("div",{className:"mb-6 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-4 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-semantic-error",children:b}),e.jsx($,{variant:"secondary",onClick:j,children:"Retry"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"Open Cases"}),e.jsx("div",{className:"mt-3 text-3xl font-semibold text-text-primary",children:l?"":(r==null?void 0:r.kpis.open)||0}),e.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"Total open complaints"})]}),e.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"My Open"}),e.jsx("div",{className:"mt-3 text-3xl font-semibold text-text-primary",children:l?"":(r==null?void 0:r.kpis.my_open)||0}),e.jsxs("div",{className:"mt-2 text-xs text-text-secondary",children:["Assigned to me",!l&&r&&e.jsx("button",{onClick:()=>t("/tasks"),className:"ml-2 text-brand hover:text-brand-dark font-medium",children:"View "})]})]}),e.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"SLA Breaches"}),e.jsx("div",{className:"mt-3 text-3xl font-semibold text-semantic-error",children:l?"":(r==null?void 0:r.kpis.open_sla_breaches)||0}),e.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"Open breaches"})]}),e.jsxs("div",{className:"rounded-card border border-border bg-app p-6",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary",children:"Stale (21d+)"}),e.jsx("div",{className:"mt-3 text-3xl font-semibold text-semantic-warning",children:l?"":(r==null?void 0:r.kpis.open_stale_21d)||0}),e.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:"No activity"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"7-Day Flow"})}),e.jsx(re,{children:l?e.jsx("div",{className:"text-center py-8 text-text-muted",children:"Loading..."}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-semantic-success"}),e.jsx("span",{className:"text-sm text-text-secondary",children:"New complaints"})]}),e.jsx("span",{className:"text-xl font-semibold text-text-primary",children:(r==null?void 0:r.flow_7d.new)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-gray-400"}),e.jsx("span",{className:"text-sm text-text-secondary",children:"Closed"})]}),e.jsx("span",{className:"text-xl font-semibold text-text-primary",children:(r==null?void 0:r.flow_7d.closed)||0})]}),e.jsx("div",{className:"pt-2 border-t border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Net change"}),e.jsxs("span",{className:`text-lg font-semibold ${((r==null?void 0:r.flow_7d.new)||0)-((r==null?void 0:r.flow_7d.closed)||0)>0?"text-semantic-warning":"text-semantic-success"}`,children:[((r==null?void 0:r.flow_7d.new)||0)-((r==null?void 0:r.flow_7d.closed)||0)>0?"+":"",((r==null?void 0:r.flow_7d.new)||0)-((r==null?void 0:r.flow_7d.closed)||0)]})]})})]})})]}),e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Age of Open Cases"})}),e.jsx(re,{children:l?e.jsx("div",{className:"text-center py-8 text-text-muted",children:"Loading..."}):e.jsx("div",{className:"space-y-3",children:[{label:"0-7 days",key:"0-7",color:"bg-semantic-success"},{label:"8-21 days",key:"8-21",color:"bg-semantic-info"},{label:"22-56 days",key:"22-56",color:"bg-semantic-warning"},{label:"56+ days",key:"56+",color:"bg-semantic-error"}].map(({label:k,key:S,color:v})=>{const M=r==null?void 0:r.aging_open;if(!M)return null;const F=M[S]||0,Q=Object.values(M).reduce((L,Z)=>L+Z,0),z=Q>0?F/Q*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-text-secondary",children:k}),e.jsx("span",{className:"text-sm font-semibold text-text-primary",children:F})]}),e.jsx("div",{className:"w-full h-2 bg-app rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${v} transition-all duration-300`,style:{width:`${Math.min(100,Math.max(0,z))}%`}})})]},S)})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(te,{children:e.jsxs(re,{children:[e.jsx("div",{className:"text-xs font-medium text-text-secondary mb-2",children:"Vulnerable Customers"}),e.jsx("div",{className:"text-2xl font-semibold text-text-primary",children:l?"":(r==null?void 0:r.risk.open_vulnerable.count)||0}),!l&&(r==null?void 0:r.risk.open_vulnerable.pct_of_open)!==null&&e.jsxs("div",{className:"mt-1 text-xs text-text-muted",children:[f(r.risk.open_vulnerable.pct_of_open)," of open"]})]})}),e.jsx(te,{children:e.jsxs(re,{children:[e.jsx("div",{className:"text-xs font-medium text-text-secondary mb-2",children:"Reopened Cases"}),e.jsx("div",{className:"text-2xl font-semibold text-semantic-warning",children:l?"":(r==null?void 0:r.risk.reopened.count)||0}),!l&&(r==null?void 0:r.risk.reopened.pct_all_time)!==null&&e.jsxs("div",{className:"mt-1 text-xs text-text-muted",children:[f(r.risk.reopened.pct_all_time)," of all time"]})]})}),e.jsx(te,{children:e.jsxs(re,{children:[e.jsx("div",{className:"text-xs font-medium text-text-secondary mb-2",children:"Escalated (Open)"}),e.jsx("div",{className:"text-2xl font-semibold text-semantic-error",children:l?"":(r==null?void 0:r.risk.escalated_open)||0}),e.jsx("div",{className:"mt-1 text-xs text-text-muted",children:"Requires attention"})]})}),e.jsx(te,{children:e.jsxs(re,{children:[e.jsx("div",{className:"text-xs font-medium text-text-secondary mb-2",children:"Final Response Rate"}),e.jsx("div",{className:"text-2xl font-semibold text-text-primary",children:l?"":f((r==null?void 0:r.risk.final_attachment_open_pct)||null)}),e.jsx("div",{className:"mt-1 text-xs text-text-muted",children:"Open with attachments"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Acknowledgement SLA (30d)"})}),e.jsx(re,{children:l?e.jsx("div",{className:"text-center py-8 text-text-muted",children:"Loading..."}):e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-text-secondary",children:"On-time rate"}),e.jsx("span",{className:"text-sm font-semibold text-text-primary",children:f((r==null?void 0:r.sla_30d.ack.on_time_pct)||null)})]}),e.jsx("div",{className:"w-full h-2 bg-app rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-semantic-success transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,(r==null?void 0:r.sla_30d.ack.on_time_pct)||0))}%`}})}),e.jsxs("div",{className:"mt-2 text-xs text-text-muted",children:[(r==null?void 0:r.sla_30d.ack.on_time)||0," / ",(r==null?void 0:r.sla_30d.ack.total)||0," on time"]})]})})]}),e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Final Response SLA (30d)"})}),e.jsx(re,{children:l?e.jsx("div",{className:"text-center py-8 text-text-muted",children:"Loading..."}):e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-text-secondary",children:"On-time rate"}),e.jsx("span",{className:"text-sm font-semibold text-text-primary",children:f((r==null?void 0:r.sla_30d.final.on_time_pct)||null)})]}),e.jsx("div",{className:"w-full h-2 bg-app rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-semantic-success transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,(r==null?void 0:r.sla_30d.final.on_time_pct)||0))}%`}})}),e.jsxs("div",{className:"mt-2 text-xs text-text-muted",children:[(r==null?void 0:r.sla_30d.final.on_time)||0," / ",(r==null?void 0:r.sla_30d.final.total)||0," on time"]})]})})]}),e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Team Workload"})}),e.jsx(re,{children:l?e.jsx("div",{className:"text-center py-8 text-text-muted",children:"Loading..."}):e.jsxs("div",{className:"mt-4 space-y-2",children:[((r==null?void 0:r.workload_open_by_handler)||[]).slice(0,5).map(k=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-text-secondary truncate pr-2",children:k.name}),e.jsx("span",{className:"text-sm font-semibold text-text-primary",children:k.count})]},k.id)),(!(r!=null&&r.workload_open_by_handler)||r.workload_open_by_handler.length===0)&&e.jsx("div",{className:"text-xs text-text-muted text-center py-4",children:"No workload data"})]})})]})]}),e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"My Queue"})}),e.jsx("div",{className:"mt-4 border-b border-border",children:e.jsx("div",{className:"flex gap-1 px-4",children:["mine","unassigned","breached","oldest"].map(k=>e.jsx("button",{onClick:()=>o(k),className:`px-4 py-2 text-sm font-medium capitalize transition border-b-2 ${m===k?"border-brand text-text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:k},k))})}),e.jsx("div",{className:"p-4",children:i?e.jsx("div",{className:"text-center py-8 text-text-muted",children:"Loading..."}):d.length===0?e.jsx("div",{className:"text-center py-8 text-text-muted",children:"No complaints in this queue"}):e.jsx("div",{className:"space-y-2",children:d.map(k=>e.jsxs("div",{onClick:()=>t(`/complaints/${k.id}`),className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-app cursor-pointer transition",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-text-primary truncate",children:k.reference}),e.jsx("div",{className:"text-xs text-text-secondary truncate mt-1",children:k.description||"No description"})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-4",children:[e.jsx("span",{className:"text-xs text-text-muted whitespace-nowrap",children:U(k.received_at).format("MMM D")}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium ${k.status==="New"?"bg-semantic-info/10 text-semantic-info":k.status==="Acknowledged"?"bg-semantic-success/10 text-semantic-success":"bg-app text-text-secondary"}`,children:k.status})]})]},k.id))})})]})]})]})}function St({status:t,className:s=""}){const n=r=>{switch(r){case"New":return"bg-semantic-info/10 text-semantic-info border-semantic-info/20";case"Acknowledged":return"bg-semantic-success/10 text-semantic-success border-semantic-success/20";case"In Investigation":return"bg-blue-50 text-blue-700 border-blue-200";case"Response Drafted":return"bg-purple-50 text-purple-700 border-purple-200";case"Awaiting Customer":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"Escalated":return"bg-semantic-warning/10 text-semantic-warning border-semantic-warning/20";case"Closed":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-app text-text-secondary border-border"}};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium border ${n(t)} ${s}`,children:t})}function Un(){const t=Ie(),[s,n]=y.useState([]),[r,a]=y.useState(!0),[d,u]=y.useState("");y.useEffect(()=>{V.get("/complaints",{params:{page:1,page_size:100}}).then(o=>{n(o.data||[]),a(!1)}).catch(o=>{console.error("Failed to load complaints",o),a(!1)})},[]);const m=s.filter(o=>{var i;return o.reference.toLowerCase().includes(d.toLowerCase())||((i=o.description)==null?void 0:i.toLowerCase().includes(d.toLowerCase()))});return e.jsxs(e.Fragment,{children:[e.jsx(ge,{title:"Complaints"}),e.jsxs("div",{className:"px-10 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-full max-w-md",children:e.jsx(se,{type:"search",placeholder:"Search complaints...",value:d,onChange:o=>u(o.target.value),leadingIcon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),e.jsxs($,{variant:"primary",onClick:()=>t("/create"),children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"New Complaint"]})]}),r?e.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading complaints..."}):e.jsxs(Rs,{children:[e.jsx($n,{children:e.jsxs(es,{children:[e.jsx(He,{children:"Reference"}),e.jsx(He,{children:"Status"}),e.jsx(He,{children:"Description"}),e.jsx(He,{children:"Received"}),e.jsx(He,{children:"Handler"})]})}),e.jsx(In,{children:m.map(o=>e.jsxs(es,{onClick:()=>t(`/complaints/${o.id}`),children:[e.jsx(Ye,{children:e.jsx("span",{className:"font-semibold",children:o.reference})}),e.jsx(Ye,{children:e.jsx(St,{status:o.status})}),e.jsx(Ye,{children:e.jsx("span",{className:"truncate max-w-md block",children:o.description||"No description"})}),e.jsx(Ye,{children:e.jsx("span",{className:"text-text-muted",children:U(o.received_at).format("MMM D, YYYY")})}),e.jsx(Ye,{children:e.jsx("span",{className:"text-text-muted",children:o.assigned_handler_name||"Unassigned"})})]},o.id))})]}),!r&&m.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-sm font-semibold text-text-primary",children:"No complaints found"}),e.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:"Try adjusting your search"})]})]})]})}function zn(){const{id:t}=Zs(),s=Ie(),{user:n}=De(),[r,a]=y.useState(null),[d,u]=y.useState([]),[m,o]=y.useState(!0),[i,c]=y.useState("overview"),[l,h]=y.useState([]),[b,x]=y.useState(!1),[j,f]=y.useState(""),[k,S]=y.useState(!1),[v,M]=y.useState(null),[F,Q]=y.useState(!1),[z,L]=y.useState({channel:"email",direction:"inbound",summary:"",occurred_at:U().format("YYYY-MM-DDTHH:mm"),is_final_response:!1}),[Z,X]=y.useState(null),[Y,ie]=y.useState(!1),[oe,O]=y.useState(null),[E,C]=y.useState(!1),[N,_]=y.useState({outcome:"upheld",notes:""}),[A,T]=y.useState(!1),[w,I]=y.useState(null),[H,R]=y.useState(!1),[D,q]=y.useState({payment_type:"financial_loss",amount:"",status:"pending",rationale:"",action_description:"",action_status:"not_started",notes:"",approved:!1}),[ce,Se]=y.useState(!1),[Ne,de]=y.useState(null),[we,je]=y.useState(!1),[Me,Fs]=y.useState(null),[Xe,Et]=y.useState(U().format("YYYY-MM-DDTHH:mm")),[Mt,Rt]=y.useState(!1);y.useEffect(()=>{t&&(_e(),Ds())},[t]);const Ps=()=>{t&&V.get(`/complaints/${t}/events`).then(g=>u(g.data)).catch(g=>console.error("Failed to load events",g))},_e=()=>{t&&(o(!0),V.get(`/complaints/${t}`).then(g=>{a(g.data),Ps(),o(!1)}).catch(g=>{console.error("Failed to load complaint",g),o(!1)}))},Ds=()=>{V.get("/users").then(g=>{const ee=g.data.filter(K=>K.is_active&&["admin","complaints_handler","complaints_manager","reviewer"].includes(K.role));h(ee)}).catch(g=>{console.error("Failed to load users",g)})},Ts=()=>G(this,null,function*(){var g,ee;if(!(!t||!n)){S(!0),M(null);try{yield V.post(`/complaints/${t}/assign`,null,{params:{handler_id:n.id}}),_e()}catch(K){M(((ee=(g=K==null?void 0:K.response)==null?void 0:g.data)==null?void 0:ee.detail)||"Failed to assign complaint")}finally{S(!1)}}}),$s=()=>G(this,null,function*(){var g,ee;if(!(!t||!j)){S(!0),M(null);try{yield V.post(`/complaints/${t}/assign`,null,{params:{handler_id:j}}),x(!1),f(""),_e()}catch(K){M(((ee=(g=K==null?void 0:K.response)==null?void 0:g.data)==null?void 0:ee.detail)||"Failed to assign complaint")}finally{S(!1)}}}),Is=()=>G(this,null,function*(){var g,ee;if(!(!t||!z.summary)){ie(!0),O(null);try{const K=new FormData;K.append("channel",z.channel),K.append("direction",z.direction),K.append("summary",z.summary),K.append("occurred_at",U(z.occurred_at).toISOString()),K.append("is_final_response",z.is_final_response.toString()),Z&&Array.from(Z).forEach(J=>{K.append("files",J)}),yield V.post(`/complaints/${t}/communications`,K,{headers:{"Content-Type":"multipart/form-data"}}),Q(!1),L({channel:"email",direction:"inbound",summary:"",occurred_at:U().format("YYYY-MM-DDTHH:mm"),is_final_response:!1}),X(null),_e()}catch(K){const J=(ee=(g=K==null?void 0:K.response)==null?void 0:g.data)==null?void 0:ee.detail;let ye="Failed to add communication";typeof J=="string"?ye=J:Array.isArray(J)?ye=J.map(Ot=>Ot.msg||JSON.stringify(Ot)).join(", "):J&&typeof J=="object"&&(ye=JSON.stringify(J)),O(ye)}finally{ie(!1)}}});if(m)return e.jsxs(e.Fragment,{children:[e.jsx(ge,{title:"Loading..."}),e.jsx("div",{className:"px-10 py-6",children:e.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading complaint details..."})})]});if(!r)return e.jsxs(e.Fragment,{children:[e.jsx(ge,{title:"Not Found"}),e.jsx("div",{className:"px-10 py-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-sm font-semibold text-text-primary",children:"Complaint not found"}),e.jsx($,{variant:"secondary",onClick:()=>s("/complaints"),className:"mt-4",children:"Back to Complaints"})]})})]});const Ge=(g,ee)=>G(this,null,function*(){var K,J;if(t)try{yield V.post(`/complaints/${t}/${g}`),alert(ee),_e()}catch(ye){alert(((J=(K=ye==null?void 0:ye.response)==null?void 0:K.data)==null?void 0:J.detail)||`Failed to ${ee.toLowerCase()}`)}}),Bs=()=>G(this,null,function*(){var g,ee;if(t){T(!0),I(null);try{yield V.post(`/complaints/${t}/outcome`,{outcome:N.outcome,notes:N.notes||null}),C(!1),_e()}catch(K){I(((ee=(g=K==null?void 0:K.response)==null?void 0:g.data)==null?void 0:ee.detail)||"Failed to save outcome")}finally{T(!1)}}}),Us=()=>G(this,null,function*(){var g,ee,K;if(t){Se(!0),de(null);try{yield V.post(`/complaints/${t}/redress`,{payment_type:D.payment_type,amount:D.amount?parseFloat(D.amount):null,status:D.status,rationale:D.rationale||null,action_description:D.action_description||null,action_status:D.action_status,notes:D.notes||null,approved:D.approved,outcome_id:((g=r==null?void 0:r.outcome)==null?void 0:g.id)||null}),R(!1),q({payment_type:"financial_loss",amount:"",status:"pending",rationale:"",action_description:"",action_status:"not_started",notes:"",approved:!1}),_e()}catch(J){de(((K=(ee=J==null?void 0:J.response)==null?void 0:ee.data)==null?void 0:K.detail)||"Failed to add redress")}finally{Se(!1)}}}),zs=()=>{r!=null&&r.outcome?_({outcome:r.outcome.outcome,notes:r.outcome.notes||""}):_({outcome:"upheld",notes:""}),I(null),C(!0)},At=g=>{Fs(g),Et(U().format("YYYY-MM-DDTHH:mm")),je(!0)},Hs=()=>G(this,null,function*(){if(!(!t||!Me)){Rt(!0);try{yield V.post(`/complaints/${t}/${Me}`,{closed_at:Xe?U(Xe).toISOString():null}),je(!1),_e()}catch(g){console.error("Failed to close complaint",g)}finally{Rt(!1)}}});return e.jsxs(e.Fragment,{children:[e.jsx(ge,{title:r.reference,actions:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(St,{status:r.status}),e.jsx($,{variant:"secondary",onClick:()=>s("/complaints"),children:"Back"})]})}),e.jsxs("div",{className:"px-10 py-6",children:[e.jsx("div",{className:"border-b border-border mb-6",children:e.jsx("div",{className:"flex gap-1",children:["overview","communications","outcome","history"].map(g=>e.jsx("button",{onClick:()=>c(g),className:`px-4 py-3 text-sm font-medium capitalize transition border-b-2 ${i===g?"border-brand text-text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:g},g))})}),i==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[(n==null?void 0:n.role)!=="read_only"&&e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Actions"})}),e.jsx(re,{children:e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[!r.acknowledged_at&&(r.status==="New"||r.status==="Reopened")&&e.jsx($,{variant:"primary",size:"sm",onClick:()=>Ge("acknowledge","Complaint acknowledged"),children:" Acknowledge"}),(r.status==="Acknowledged"||r.status==="New"||r.status==="Reopened")&&e.jsx($,{variant:"primary",size:"sm",onClick:()=>Ge("investigate","Investigation started"),children:" Start Investigation"}),r.status==="In Investigation"&&e.jsx($,{variant:"secondary",size:"sm",onClick:()=>s(`/complaints/${t}`),children:" Draft Response"}),r.outcome&&!r.final_response_at&&e.jsx($,{variant:"primary",size:"sm",onClick:()=>Ge("final-response","Final response issued"),children:" Issue Final Response"}),r.status!=="Closed"&&e.jsx($,{variant:"secondary",size:"sm",onClick:()=>Ge("close-non-reportable","Closed as non-reportable"),children:" Close as Non-Reportable"}),r.fos_complaint?e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-semantic-info/10 text-semantic-info border border-semantic-info/20",children:[e.jsx("span",{className:"text-sm font-medium",children:" Referred to FOS"}),r.fos_reference&&e.jsxs("span",{className:"text-xs",children:["(",r.fos_reference,")"]})]}):e.jsx($,{variant:"secondary",size:"sm",onClick:()=>{const g=prompt("Enter FOS Reference:");g&&V.post(`/complaints/${t}/refer-to-fos`,{fos_reference:g,fos_referred_at:new Date().toISOString()}).then(()=>{alert("Complaint referred to FOS"),_e()}).catch(ee=>{var K,J;alert(((J=(K=ee==null?void 0:ee.response)==null?void 0:K.data)==null?void 0:J.detail)||"Failed to refer to FOS")})},children:" Refer to Ombudsman"})]})})]}),e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Complaint Details"})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.description||"No description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Category"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.category||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Reason"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.reason||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Product"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.product||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Scheme"}),e.jsx("p",{className:"text-sm text-text-primary",children:r.scheme||"N/A"})]})]})]})})]}),r.complainant&&e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Complainant"})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx("p",{className:"text-sm text-text-primary font-medium",children:r.complainant.full_name}),r.complainant.email&&e.jsx("p",{className:"text-sm text-text-secondary",children:r.complainant.email}),r.complainant.phone&&e.jsx("p",{className:"text-sm text-text-secondary",children:r.complainant.phone})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Timeline"})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Received"}),e.jsx("p",{className:"text-sm text-text-primary",children:U(r.received_at).format("MMM D, YYYY h:mm A")})]}),r.acknowledged_at&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Acknowledged"}),e.jsx("p",{className:"text-sm text-text-primary",children:U(r.acknowledged_at).format("MMM D, YYYY h:mm A")})]}),r.closed_at&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Closed"}),e.jsx("p",{className:"text-sm text-text-primary",children:U(r.closed_at).format("MMM D, YYYY h:mm A")})]})]})})]}),e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Assignment"})}),e.jsx(re,{children:e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Current Handler"}),e.jsx("p",{className:"text-sm text-text-primary font-semibold",children:r.assigned_handler_name||"Unassigned"})]}),(n==null?void 0:n.role)!=="read_only"&&e.jsxs("div",{className:"space-y-2 pt-2 border-t border-border",children:[(!r.assigned_handler_id||r.assigned_handler_id!==(n==null?void 0:n.id))&&e.jsxs($,{variant:"secondary",size:"sm",onClick:Ts,disabled:k,className:"w-full",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Assign to Me"]}),((n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="complaints_manager"||(n==null?void 0:n.role)==="reviewer")&&e.jsxs($,{variant:"secondary",size:"sm",onClick:()=>x(!0),disabled:k,className:"w-full",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Assign to User"]})]})]})})]})]})]}),i==="communications"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Communications"}),e.jsxs($,{variant:"primary",onClick:()=>Q(!0),children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Add Communication"]})]}),r.communications&&r.communications.length>0?e.jsx("div",{className:"space-y-4",children:r.communications.sort((g,ee)=>U(ee.occurred_at).valueOf()-U(g.occurred_at).valueOf()).map(g=>e.jsx(te,{children:e.jsxs(re,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-app text-text-primary border border-border",children:g.channel}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium ${g.direction==="Inbound"?"bg-semantic-info/10 text-semantic-info":"bg-semantic-success/10 text-semantic-success"}`,children:g.direction}),g.is_final_response&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-semantic-warning/10 text-semantic-warning border border-semantic-warning/20",children:"Final Response"})]}),e.jsx("span",{className:"text-xs text-text-muted",children:U(g.occurred_at).format("MMM D, YYYY h:mm A")})]}),e.jsx("p",{className:"text-sm text-text-primary mt-2",children:g.summary}),g.attachments&&g.attachments.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:g.attachments.map(ee=>e.jsxs("a",{href:ee.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1 rounded-lg bg-app text-text-primary hover:bg-border text-xs transition",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),ee.file_name]},ee.id))})]})},g.id))}):e.jsxs("div",{className:"text-center py-12 rounded-lg border border-border bg-surface",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),e.jsx("p",{className:"mt-4 text-sm font-semibold text-text-primary",children:"No communications yet"}),e.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:'Click "Add Communication" to log your first interaction'})]})]}),i==="outcome"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(te,{children:[e.jsx(ne,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ae,{children:"Outcome"}),(n==null?void 0:n.role)!=="read_only"&&e.jsx($,{variant:"primary",size:"sm",onClick:zs,children:r.outcome?"Update Outcome":"Record Outcome"})]})}),e.jsx(re,{children:r.outcome?e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Outcome Type"}),e.jsx("p",{className:"text-sm text-text-primary capitalize",children:r.outcome.outcome.replace(/_/g," ")})]}),r.outcome.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm text-text-secondary",children:r.outcome.notes})]})]}):e.jsx("p",{className:"text-sm text-text-secondary mt-4",children:"No outcome recorded yet"})})]}),e.jsxs(te,{children:[e.jsx(ne,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ae,{children:"Redress Payments"}),(n==null?void 0:n.role)!=="read_only"&&e.jsxs($,{variant:"primary",size:"sm",onClick:()=>R(!0),children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Add Redress"]})]})}),e.jsx(re,{children:r.redress_payments&&r.redress_payments.length>0?e.jsx("div",{className:"space-y-4 mt-4",children:r.redress_payments.map(g=>e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-surface",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-text-primary capitalize",children:g.payment_type.replace(/_/g," ")}),g.amount&&e.jsxs("p",{className:"text-lg font-bold text-text-primary mt-1",children:["",g.amount.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium ${g.status==="paid"?"bg-semantic-success/10 text-semantic-success":g.status==="authorised"?"bg-semantic-warning/10 text-semantic-warning":"bg-app text-text-primary border border-border"}`,children:g.status.charAt(0).toUpperCase()+g.status.slice(1)}),g.approved&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-semantic-success/10 text-semantic-success border border-semantic-success/20",children:[e.jsx("svg",{className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Approved"]})]})]}),g.rationale&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Rationale"}),e.jsx("p",{className:"text-sm text-text-secondary",children:g.rationale})]}),g.action_description&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Action"}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("p",{className:"text-sm text-text-secondary flex-1",children:g.action_description}),g.action_status&&e.jsx("span",{className:`ml-3 inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium capitalize ${g.action_status==="completed"?"bg-semantic-success/10 text-semantic-success":g.action_status==="in_progress"?"bg-semantic-info/10 text-semantic-info":"bg-app text-text-muted border border-border"}`,children:g.action_status.replace(/_/g," ")})]})]}),g.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm text-text-secondary",children:g.notes})]})]},g.id))}):e.jsxs("div",{className:"text-center py-12 mt-4",children:[e.jsx("div",{className:"mx-auto h-12 w-12 rounded-full border-2 border-text-muted flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-text-muted",children:""})}),e.jsx("p",{className:"mt-4 text-sm font-semibold text-text-primary",children:"No redress payments"}),e.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:"No redress payments have been recorded for this complaint"})]})})]}),(n==null?void 0:n.role)!=="read_only"&&r.status!=="Closed"&&e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Close Complaint"})}),e.jsxs(re,{children:[e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4",children:[r.final_response_at&&e.jsx($,{variant:"primary",onClick:()=>At("close"),children:" Close Complaint"}),e.jsx($,{variant:"secondary",onClick:()=>At("close-non-reportable"),children:" Close as Non-Reportable"})]}),!r.final_response_at&&e.jsx("p",{className:"text-xs text-text-muted mt-3",children:"Note: Final response must be issued before closing the complaint normally."})]})]})]}),i==="history"&&e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Activity History"})}),e.jsx(re,{children:d&&d.length>0?e.jsx("div",{className:"space-y-0 mt-4",children:d.sort((g,ee)=>U(ee.created_at).valueOf()-U(g.created_at).valueOf()).map(g=>{const ee=J=>J==="created"?"":J==="accessed"?"":J==="updated"?"":J==="acknowledged"?"":J==="investigation_started"?"":J==="response_drafted"?"":J==="outcome_recorded"?"":J==="final_response_issued"?"":J==="closed"?"":J==="closed_non_reportable"?"":J==="reopened"?"":J==="escalated"?"":J==="assigned"?"":J==="referred_to_fos"?"":J==="communication_added"?"":J==="redress_added"||J==="redress_updated"?"":"",K=J=>J.split("_").map(ye=>ye.charAt(0).toUpperCase()+ye.slice(1)).join(" ");return e.jsxs("div",{className:"flex gap-4 py-3 border-b border-border last:border-0 hover:bg-surface/50 transition px-3 -mx-3 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 text-lg pt-0.5",children:ee(g.event_type)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-text-primary",children:K(g.event_type)}),g.description&&e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:g.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[g.created_by_name&&e.jsxs("span",{className:"text-xs text-text-muted",children:["by ",g.created_by_name]}),e.jsx("span",{className:"text-xs text-text-muted",children:U(g.created_at).format("MMM D, YYYY [at] h:mm A")})]})]})})})]},g.id)})}):e.jsxs("div",{className:"text-center py-12 mt-4",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"mt-4 text-sm font-semibold text-text-primary",children:"No history events recorded"})]})})]})]}),e.jsxs(he,{open:b,onClose:()=>x(!1),children:[e.jsx(fe,{onClose:()=>x(!1),children:"Assign Complaint"}),e.jsxs(pe,{children:[v&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:v}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"assign-handler",className:"block text-xs font-medium text-text-primary",children:"Select Handler *"}),e.jsxs("select",{id:"assign-handler",className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:j,onChange:g=>f(g.target.value),children:[e.jsx("option",{value:"",children:"-- Select a user --"}),l.map(g=>e.jsxs("option",{value:g.id,children:[g.full_name," (",g.role.replace(/_/g," "),")"]},g.id))]})]})})]}),e.jsxs(be,{children:[e.jsx($,{variant:"secondary",onClick:()=>x(!1),children:"Cancel"}),e.jsx($,{variant:"primary",onClick:$s,disabled:!j||k,children:k?"Assigning...":"Assign"})]})]}),e.jsxs(he,{open:we,onClose:()=>je(!1),children:[e.jsx(fe,{onClose:()=>je(!1),children:"Confirm Closure"}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Please confirm the closure date for this complaint."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"close-date",className:"block text-xs font-medium text-text-primary",children:"Closure Date & Time *"}),e.jsx(se,{id:"close-date",type:"datetime-local",value:Xe,onChange:g=>Et(g.target.value)})]})]})}),e.jsxs(be,{children:[e.jsx($,{variant:"secondary",onClick:()=>je(!1),children:"Cancel"}),e.jsx($,{variant:"primary",onClick:Hs,disabled:Mt||!Xe,children:Mt?"Closing...":"Confirm Closure"})]})]}),e.jsxs(he,{open:E,onClose:()=>C(!1),children:[e.jsx(fe,{onClose:()=>C(!1),children:r!=null&&r.outcome?"Update Outcome":"Record Outcome"}),e.jsxs(pe,{children:[w&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:w}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"outcome-type",className:"block text-xs font-medium text-text-primary",children:"Outcome *"}),e.jsxs("select",{id:"outcome-type",className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:N.outcome,onChange:g=>_(B(P({},N),{outcome:g.target.value})),children:[e.jsx("option",{value:"upheld",children:"Upheld"}),e.jsx("option",{value:"partially_upheld",children:"Partially Upheld"}),e.jsx("option",{value:"not_upheld",children:"Not Upheld"}),e.jsx("option",{value:"withdrawn",children:"Withdrawn"}),e.jsx("option",{value:"out_of_scope",children:"Out of Scope"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Notes"}),e.jsx("textarea",{className:"w-full min-h-[100px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:N.notes,onChange:g=>_(B(P({},N),{notes:g.target.value})),placeholder:"Add outcome notes..."})]})]})]}),e.jsxs(be,{children:[e.jsx($,{variant:"secondary",onClick:()=>C(!1),children:"Cancel"}),e.jsx($,{variant:"primary",onClick:Bs,disabled:A,children:A?"Saving...":"Save Outcome"})]})]}),e.jsxs(he,{open:H,onClose:()=>R(!1),children:[e.jsx(fe,{onClose:()=>R(!1),children:"Add Redress Payment"}),e.jsxs(pe,{children:[Ne&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:Ne}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"redress-type",className:"block text-xs font-medium text-text-primary",children:"Redress Type *"}),e.jsxs("select",{id:"redress-type",className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:D.payment_type,onChange:g=>q(B(P({},D),{payment_type:g.target.value})),children:[e.jsx("option",{value:"financial_loss",children:"Financial Loss"}),e.jsx("option",{value:"interest_on_financial_loss",children:"Interest on Financial Loss"}),e.jsx("option",{value:"distress_and_inconvenience",children:"Distress and Inconvenience"}),e.jsx("option",{value:"consequential_loss",children:"Consequential Loss"}),e.jsx("option",{value:"premium_refund_adjustment",children:"Premium Refund/Adjustment"}),e.jsx("option",{value:"goodwill_payment",children:"Goodwill Payment"}),e.jsx("option",{value:"third_party_payment",children:"Third Party Payment"}),e.jsx("option",{value:"apology_or_explanation",children:"Apology or Explanation"}),e.jsx("option",{value:"remedial_action",children:"Remedial Action"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Amount ()"}),e.jsx(se,{type:"number",step:"0.01",value:D.amount,onChange:g=>q(B(P({},D),{amount:g.target.value})),placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-text-muted",children:"Leave blank for non-monetary redress"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"redress-status",className:"block text-xs font-medium text-text-primary",children:"Status *"}),e.jsxs("select",{id:"redress-status",className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:D.status,onChange:g=>q(B(P({},D),{status:g.target.value})),children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"authorised",children:"Authorised"}),e.jsx("option",{value:"paid",children:"Paid"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Rationale"}),e.jsx("textarea",{className:"w-full min-h-[80px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:D.rationale,onChange:g=>q(B(P({},D),{rationale:g.target.value})),placeholder:"Why is this redress being offered?"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Action Description"}),e.jsx("textarea",{className:"w-full min-h-[80px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:D.action_description,onChange:g=>q(B(P({},D),{action_description:g.target.value})),placeholder:"What action needs to be taken?"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"action-status",className:"block text-xs font-medium text-text-primary",children:"Action Status *"}),e.jsxs("select",{id:"action-status",className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:D.action_status,onChange:g=>q(B(P({},D),{action_status:g.target.value})),children:[e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Notes"}),e.jsx("textarea",{className:"w-full min-h-[80px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:D.notes,onChange:g=>q(B(P({},D),{notes:g.target.value})),placeholder:"Additional notes..."})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.approved,onChange:()=>q(B(P({},D),{approved:!D.approved})),className:"h-4 w-4 rounded border-border text-brand focus:ring-2 focus:ring-brand/15"}),e.jsx("span",{className:"text-sm font-medium text-text-primary",children:"Approved"})]})]})]}),e.jsxs(be,{children:[e.jsx($,{variant:"secondary",onClick:()=>R(!1),children:"Cancel"}),e.jsx($,{variant:"primary",onClick:Us,disabled:ce,children:ce?"Adding...":"Add Redress"})]})]}),e.jsxs(he,{open:F,onClose:()=>Q(!1),children:[e.jsx(fe,{onClose:()=>Q(!1),children:"Add Communication"}),e.jsxs(pe,{children:[oe&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:oe}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"comm-channel",className:"block text-xs font-medium text-text-primary",children:"Channel *"}),e.jsxs("select",{id:"comm-channel",className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:z.channel,onChange:g=>L(B(P({},z),{channel:g.target.value})),children:[e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"phone",children:"Phone"}),e.jsx("option",{value:"letter",children:"Letter"}),e.jsx("option",{value:"web",children:"Web Form"}),e.jsx("option",{value:"third_party",children:"Third Party"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"comm-direction",className:"block text-xs font-medium text-text-primary",children:"Direction *"}),e.jsxs("select",{id:"comm-direction",className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:z.direction,onChange:g=>L(B(P({},z),{direction:g.target.value})),children:[e.jsx("option",{value:"inbound",children:"Inbound"}),e.jsx("option",{value:"outbound",children:"Outbound"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Date & Time *"}),e.jsx(se,{type:"datetime-local",value:z.occurred_at,onChange:g=>L(B(P({},z),{occurred_at:g.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Summary *"}),e.jsx("textarea",{className:"w-full min-h-[100px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:z.summary,onChange:g=>L(B(P({},z),{summary:g.target.value})),placeholder:"Describe the communication..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"comm-attachments",className:"block text-xs font-medium text-text-primary",children:"Attachments"}),e.jsx("input",{id:"comm-attachments",type:"file",multiple:!0,onChange:g=>X(g.target.files),className:"w-full text-sm text-text-primary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-brand file:text-white hover:file:opacity-90 cursor-pointer"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:z.is_final_response,onChange:()=>L(B(P({},z),{is_final_response:!z.is_final_response})),className:"h-4 w-4 rounded border-border text-brand focus:ring-2 focus:ring-brand/15"}),e.jsx("span",{className:"text-sm font-medium text-text-primary",children:"Mark as Final Response"})]})]})]}),e.jsxs(be,{children:[e.jsx($,{variant:"secondary",onClick:()=>Q(!1),children:"Cancel"}),e.jsx($,{variant:"primary",onClick:Is,disabled:!z.summary||Y,children:Y?"Adding...":"Add Communication"})]})]})]})}function Hn(){const t=Ie(),[s,n]=y.useState(!1),[r,a]=y.useState(null),[d,u]=y.useState([]),[m,o]=y.useState([]),[i,c]=y.useState([]);y.useEffect(()=>{Promise.all([V.get("/reference/products"),V.get("/reference/insurers"),V.get("/reference/brokers")]).then(([x,j,f])=>{u(x.data.map(k=>k.name)),o(j.data.map(k=>k.name)),c(f.data.map(k=>k.name))}).catch(x=>{console.error("Failed to load reference data",x)})},[]);const[l,h]=y.useState({source:"Email",received_at:U().format("YYYY-MM-DDTHH:mm"),description:"",category:"",reason:"",vulnerability_flag:!1,vulnerability_notes:"",policy_number:"",insurer:"",broker:"",product:"",scheme:"",complainant_name:"",complainant_email:"",complainant_phone:"",complainant_address:"",complainant_dob:""}),b=x=>G(this,null,function*(){var j,f;x.preventDefault(),a(null),n(!0);try{const k=yield V.post("/complaints",{source:l.source,received_at:U(l.received_at).toISOString(),description:l.description,category:l.category,reason:l.reason||null,fca_complaint:!0,fca_rationale:null,vulnerability_flag:l.vulnerability_flag,vulnerability_notes:l.vulnerability_notes||null,policy_number:l.policy_number||null,insurer:l.insurer||null,broker:l.broker||null,product:l.product||null,scheme:l.scheme||null,complainant:{full_name:l.complainant_name,email:l.complainant_email||null,phone:l.complainant_phone||null,address:l.complainant_address||null,date_of_birth:l.complainant_dob||null},policy:{policy_number:l.policy_number||null,insurer:l.insurer||null,broker:l.broker||null,product:l.product||null,scheme:l.scheme||null}});t(`/complaints/${k.data.id}`)}catch(k){a(((f=(j=k==null?void 0:k.response)==null?void 0:j.data)==null?void 0:f.detail)||"Failed to create complaint"),n(!1)}});return e.jsxs(e.Fragment,{children:[e.jsx(ge,{title:"Create New Complaint"}),e.jsxs("div",{className:"px-10 py-6 max-w-4xl",children:[r&&e.jsx("div",{className:"mb-6 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:r}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Receipt Information"})}),e.jsx(re,{children:e.jsx("div",{className:"space-y-4 mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Source *"}),e.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:l.source,onChange:x=>h(B(P({},l),{source:x.target.value})),required:!0,children:[e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"Letter",children:"Letter"}),e.jsx("option",{value:"Web Form",children:"Web Form"}),e.jsx("option",{value:"In Person",children:"In Person"}),e.jsx("option",{value:"Social Media",children:"Social Media"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Date Received *"}),e.jsx(se,{type:"datetime-local",value:l.received_at,onChange:x=>h(B(P({},l),{received_at:x.target.value})),required:!0})]})]})})})]}),e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Complainant Details"})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Full Name *"}),e.jsx(se,{value:l.complainant_name,onChange:x=>h(B(P({},l),{complainant_name:x.target.value})),placeholder:"John Doe",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Email"}),e.jsx(se,{type:"email",value:l.complainant_email,onChange:x=>h(B(P({},l),{complainant_email:x.target.value})),placeholder:"john@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Phone"}),e.jsx(se,{value:l.complainant_phone,onChange:x=>h(B(P({},l),{complainant_phone:x.target.value})),placeholder:"+44 20 1234 5678"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Date of Birth"}),e.jsx(se,{type:"date",value:l.complainant_dob,onChange:x=>h(B(P({},l),{complainant_dob:x.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Address"}),e.jsx(se,{value:l.complainant_address,onChange:x=>h(B(P({},l),{complainant_address:x.target.value})),placeholder:"Full address..."})]})]}),e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.vulnerability_flag,onChange:()=>h(B(P({},l),{vulnerability_flag:!l.vulnerability_flag})),className:"h-4 w-4 rounded border-border text-brand focus:ring-2 focus:ring-brand/15"}),e.jsx("span",{className:"text-sm font-medium text-text-primary",children:"Vulnerable Customer"})]}),l.vulnerability_flag&&e.jsxs("div",{className:"pl-7 space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Vulnerability Notes"}),e.jsx("textarea",{className:"w-full min-h-[80px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:l.vulnerability_notes,onChange:x=>h(B(P({},l),{vulnerability_notes:x.target.value})),placeholder:"Details about vulnerability..."})]})]})})]})})]}),e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Complaint Details"})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Description *"}),e.jsx("textarea",{className:"w-full min-h-[120px] rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text-primary placeholder:text-text-muted outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:l.description,onChange:x=>h(B(P({},l),{description:x.target.value})),placeholder:"Detailed description of the complaint...",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Category *"}),e.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:l.category,onChange:x=>h(B(P({},l),{category:x.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select category..."}),e.jsx("option",{value:"Claims",children:"Claims"}),e.jsx("option",{value:"Policy",children:"Policy"}),e.jsx("option",{value:"Service",children:"Service"}),e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Communication",children:"Communication"}),e.jsx("option",{value:"Sales",children:"Sales"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Reason"}),e.jsx(se,{value:l.reason,onChange:x=>h(B(P({},l),{reason:x.target.value})),placeholder:"Specific reason..."})]})]})]})})]}),e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Policy Information"})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Policy Number"}),e.jsx(se,{value:l.policy_number,onChange:x=>h(B(P({},l),{policy_number:x.target.value})),placeholder:"POL-12345"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Product"}),e.jsx(bt,{value:l.product,onChange:x=>h(B(P({},l),{product:x})),options:d,placeholder:"Select or type product..."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Insurer"}),e.jsx(bt,{value:l.insurer,onChange:x=>h(B(P({},l),{insurer:x})),options:m,placeholder:"Select or type insurer..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Broker"}),e.jsx(bt,{value:l.broker,onChange:x=>h(B(P({},l),{broker:x})),options:i,placeholder:"Select or type broker..."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Scheme"}),e.jsx(se,{value:l.scheme,onChange:x=>h(B(P({},l),{scheme:x.target.value})),placeholder:"Scheme name..."})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 sticky bottom-6 bg-app/95 backdrop-blur-sm p-4 rounded-lg border border-border",children:[e.jsx($,{variant:"secondary",onClick:()=>t("/complaints"),type:"button",children:"Cancel"}),e.jsx($,{variant:"primary",type:"submit",disabled:s,children:s?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Complaint"})]})]})]})]})}function Yn(){const t=Ie(),{user:s}=De(),[n,r]=y.useState(!0),[a,d]=y.useState([]);y.useEffect(()=>{u()},[]);const u=()=>G(this,null,function*(){r(!0);try{const i=(yield V.get("/complaints")).data.filter(f=>f.assigned_handler_id===(s==null?void 0:s.id)&&f.status!=="Closed"),c=i.filter(f=>(f.status==="New"||f.status==="Reopened")&&!f.acknowledged_at&&U(f.ack_due_at).isAfter(U())),l=i.filter(f=>(f.status==="New"||f.status==="Reopened")&&!f.acknowledged_at&&U(f.ack_due_at).isBefore(U())),h=i.filter(f=>f.status==="In Investigation"||f.status==="Acknowledged"),b=i.filter(f=>f.status==="Response Drafted"&&!f.final_response_at&&U(f.final_due_at).isAfter(U())),x=i.filter(f=>(f.status==="Response Drafted"||f.status==="In Investigation"||f.status==="Acknowledged")&&!f.final_response_at&&U(f.final_due_at).isBefore(U())),j=[];l.length>0&&j.push({title:"Acknowledgements Overdue",description:"These complaints need acknowledgement urgently",icon:"",color:"semantic-error",complaints:l.sort((f,k)=>U(f.ack_due_at).valueOf()-U(k.ack_due_at).valueOf())}),c.length>0&&j.push({title:"Acknowledgements Due",description:"These complaints need acknowledgement soon",icon:"",color:"semantic-warning",complaints:c.sort((f,k)=>U(f.ack_due_at).valueOf()-U(k.ack_due_at).valueOf())}),x.length>0&&j.push({title:"Final Responses Overdue",description:"These complaints need final response urgently",icon:"",color:"semantic-error",complaints:x.sort((f,k)=>U(f.final_due_at).valueOf()-U(k.final_due_at).valueOf())}),b.length>0&&j.push({title:"Final Responses Due",description:"These complaints are ready for final response",icon:"",color:"semantic-info",complaints:b.sort((f,k)=>U(f.final_due_at).valueOf()-U(k.final_due_at).valueOf())}),h.length>0&&j.push({title:"In Investigation",description:"These complaints are actively being worked on",icon:"",color:"brand",complaints:h.sort((f,k)=>U(f.received_at).valueOf()-U(k.received_at).valueOf())}),d(j)}catch(o){console.error("Failed to load tasks",o)}finally{r(!1)}}),m=()=>a.reduce((o,i)=>o+i.complaints.length,0);return n?e.jsxs(e.Fragment,{children:[e.jsx(ge,{title:"My Tasks"}),e.jsx("div",{className:"px-10 py-6",children:e.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading your tasks..."})})]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{title:"My Tasks"}),e.jsxs("div",{className:"px-10 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Your Work List"}),e.jsxs("p",{className:"text-sm text-text-secondary mt-1",children:["You have ",m()," ",m()===1?"task":"tasks"," requiring attention"]})]}),a.length===0?e.jsx(te,{children:e.jsx(re,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"mt-4 text-lg font-semibold text-text-primary",children:"All caught up!"}),e.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"You don't have any tasks requiring immediate attention."})]})})}):e.jsx("div",{className:"space-y-6",children:a.map((o,i)=>e.jsxs(te,{children:[e.jsx(ne,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:o.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ae,{children:o.title}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:o.description})]}),e.jsx("span",{className:`inline-flex items-center justify-center h-8 min-w-8 rounded-full bg-${o.color}/10 text-${o.color} px-2 text-sm font-bold`,children:o.complaints.length})]})}),e.jsx(re,{children:e.jsx("div",{className:"space-y-3 mt-4",children:o.complaints.map(c=>{var l;return e.jsxs("div",{className:"flex items-center justify-between gap-4 p-4 rounded-lg border border-border hover:bg-surface transition",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-sm font-bold text-text-primary",children:c.reference}),e.jsx(St,{status:c.status})]}),e.jsx("p",{className:"text-sm text-text-secondary truncate mb-2",children:c.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-text-muted",children:[((l=c.complainant)==null?void 0:l.full_name)&&e.jsxs("span",{children:[" ",c.complainant.full_name]}),e.jsxs("span",{children:[" Received ",U(c.received_at).format("MMM D, YYYY")]}),o.title.includes("Acknowledgement")&&e.jsxs("span",{className:U(c.ack_due_at).isBefore(U())?"text-semantic-error font-semibold":"",children:[" Ack due ",U(c.ack_due_at).format("MMM D, YYYY")]}),o.title.includes("Final Response")&&e.jsxs("span",{className:U(c.final_due_at).isBefore(U())?"text-semantic-error font-semibold":"",children:[" Final due ",U(c.final_due_at).format("MMM D, YYYY")]})]})]}),e.jsx($,{variant:"primary",size:"sm",onClick:()=>t(`/complaints/${c.id}`),children:"Go to Claim"})]},c.id)})})})]},i))})]})]})}function qn(){const[t,s]=y.useState([]),[n,r]=y.useState(!0),[a,d]=y.useState(!1),[u,m]=y.useState(!1),[o,i]=y.useState(!1),[c,l]=y.useState(!1),[h,b]=y.useState(null),[x,j]=y.useState(null),[f,k]=y.useState(null),[S,v]=y.useState(null),[M,F]=y.useState(!1),[Q,z]=y.useState(!1),[L,Z]=y.useState({email:"",full_name:"",role:"complaints_handler",password:"",is_active:!0});y.useEffect(()=>{X()},[]);const X=()=>G(this,null,function*(){r(!0);try{const w=yield V.get("/users");s(w.data)}catch(w){console.error("Failed to load users",w)}finally{r(!1)}}),Y=()=>G(this,null,function*(){var w,I;if(!L.email||!L.full_name||!L.password){v("Please fill in all required fields");return}F(!0),v(null);try{yield V.post("/users",L),d(!1),A(),X()}catch(H){v(((I=(w=H==null?void 0:H.response)==null?void 0:w.data)==null?void 0:I.detail)||"Failed to create user")}finally{F(!1)}}),ie=()=>G(this,null,function*(){var w,I;if(!h||!L.email||!L.full_name){v("Please fill in all required fields");return}F(!0),v(null);try{yield V.patch(`/users/${h.id}`,P({email:L.email,full_name:L.full_name,role:L.role,is_active:L.is_active},L.password?{password:L.password}:{})),m(!1),b(null),A(),X()}catch(H){v(((I=(w=H==null?void 0:H.response)==null?void 0:w.data)==null?void 0:I.detail)||"Failed to update user")}finally{F(!1)}}),oe=()=>G(this,null,function*(){var w,I;if(h){F(!0),v(null);try{const H=yield V.post(`/users/${h.id}/reset-password`);j(H.data.temporary_password),X()}catch(H){v(((I=(w=H==null?void 0:H.response)==null?void 0:w.data)==null?void 0:I.detail)||"Failed to reset password")}finally{F(!1)}}}),O=()=>{A(),d(!0)},E=w=>{b(w),Z({email:w.email,full_name:w.full_name,role:w.role,password:"",is_active:w.is_active}),v(null),m(!0)},C=w=>{b(w),j(null),v(null),i(!0)},N=w=>G(this,null,function*(){var I,H;if(window.confirm(`Reset MFA for ${w.full_name}? This will disable MFA and require re-enrollment.`)){z(!0),v(null);try{yield V.post(`/auth/mfa/reset/${w.id}`),X()}catch(R){v(((H=(I=R==null?void 0:R.response)==null?void 0:I.data)==null?void 0:H.detail)||"Failed to reset MFA")}finally{z(!1)}}}),_=w=>G(this,null,function*(){var I,H;z(!0),v(null),b(w);try{const R=yield V.post(`/auth/mfa/recovery/${w.id}/regenerate`);k(R.data.recovery_codes||[]),l(!0)}catch(R){v(((H=(I=R==null?void 0:R.response)==null?void 0:I.data)==null?void 0:H.detail)||"Failed to regenerate recovery codes")}finally{z(!1)}}),A=()=>{Z({email:"",full_name:"",role:"complaints_handler",password:"",is_active:!0}),v(null)},T=w=>w==="admin"?"bg-semantic-error/10 text-semantic-error":w==="complaints_manager"?"bg-semantic-warning/10 text-semantic-warning":w==="reviewer"?"bg-semantic-info/10 text-semantic-info":w==="complaints_handler"?"bg-semantic-success/10 text-semantic-success":"bg-app text-text-muted border border-border";return n?e.jsxs(e.Fragment,{children:[e.jsx(ge,{title:"User Management"}),e.jsx("div",{className:"px-10 py-6",children:e.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading users..."})})]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{title:"User Management",actions:e.jsxs($,{variant:"primary",onClick:O,children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Create User"]})}),e.jsx("div",{className:"px-10 py-6",children:e.jsxs(te,{children:[e.jsx(ne,{children:e.jsxs(ae,{children:["Users (",t.length,")"]})}),e.jsx(re,{children:e.jsxs("div",{className:"mt-4",children:[e.jsxs(Rs,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"MFA"}),e.jsx("th",{children:"Created"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:t.map(w=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-semibold",children:w.full_name}),e.jsx("td",{className:"text-text-secondary",children:w.email}),e.jsx("td",{children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium capitalize ${T(w.role)}`,children:w.role.replace(/_/g," ")})}),e.jsx("td",{children:w.is_active?e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-semantic-success/10 text-semantic-success",children:"Active"}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-app text-text-muted border border-border",children:"Inactive"})}),e.jsx("td",{children:w.mfa_enabled?e.jsx("span",{className:"text-semantic-success",children:" Enabled"}):e.jsx("span",{className:"text-text-muted",children:"Disabled"})}),e.jsx("td",{className:"text-text-secondary text-sm",children:U(w.created_at).format("MMM D, YYYY")}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>E(w),className:"text-brand hover:text-brand-dark text-sm font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>C(w),className:"text-semantic-warning hover:opacity-80 text-sm font-medium",children:"Reset Password"}),e.jsx("button",{onClick:()=>N(w),className:"text-semantic-error hover:opacity-80 text-sm font-medium disabled:opacity-50",disabled:Q,children:"Reset MFA"}),e.jsx("button",{onClick:()=>_(w),className:"text-text-secondary hover:text-text-primary text-sm font-medium disabled:opacity-50",disabled:Q,children:"Recovery Codes"})]})})]},w.id))})]}),t.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-sm text-text-secondary",children:"No users found"})})]})})]})}),e.jsxs(he,{open:a,onClose:()=>d(!1),children:[e.jsx(fe,{onClose:()=>d(!1),children:"Create New User"}),e.jsxs(pe,{children:[S&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:S}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Full Name *"}),e.jsx(se,{type:"text",value:L.full_name,onChange:w=>Z(B(P({},L),{full_name:w.target.value})),placeholder:"John Doe"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Email *"}),e.jsx(se,{type:"email",value:L.email,onChange:w=>Z(B(P({},L),{email:w.target.value})),placeholder:"john.doe@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Role *"}),e.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:L.role,onChange:w=>Z(B(P({},L),{role:w.target.value})),children:[e.jsx("option",{value:"complaints_handler",children:"Complaints Handler"}),e.jsx("option",{value:"complaints_manager",children:"Complaints Manager"}),e.jsx("option",{value:"reviewer",children:"Reviewer"}),e.jsx("option",{value:"read_only",children:"Read Only"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Initial Password *"}),e.jsx(se,{type:"password",value:L.password,onChange:w=>Z(B(P({},L),{password:w.target.value})),placeholder:""}),e.jsx("p",{className:"text-xs text-text-muted",children:"User will be required to change this on first login"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:L.is_active,onChange:()=>Z(B(P({},L),{is_active:!L.is_active})),className:"h-4 w-4 rounded border-border text-brand focus:ring-2 focus:ring-brand/15"}),e.jsx("span",{className:"text-sm font-medium text-text-primary",children:"Active"})]})]})]}),e.jsxs(be,{children:[e.jsx($,{variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx($,{variant:"primary",onClick:Y,disabled:M,children:M?"Creating...":"Create User"})]})]}),e.jsxs(he,{open:u,onClose:()=>m(!1),children:[e.jsx(fe,{onClose:()=>m(!1),children:"Edit User"}),e.jsxs(pe,{children:[S&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:S}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Full Name *"}),e.jsx(se,{type:"text",value:L.full_name,onChange:w=>Z(B(P({},L),{full_name:w.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Email *"}),e.jsx(se,{type:"email",value:L.email,onChange:w=>Z(B(P({},L),{email:w.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Role *"}),e.jsxs("select",{className:"w-full h-10 rounded-lg border border-border bg-surface px-3 text-sm text-text-primary outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/15",value:L.role,onChange:w=>Z(B(P({},L),{role:w.target.value})),children:[e.jsx("option",{value:"complaints_handler",children:"Complaints Handler"}),e.jsx("option",{value:"complaints_manager",children:"Complaints Manager"}),e.jsx("option",{value:"reviewer",children:"Reviewer"}),e.jsx("option",{value:"read_only",children:"Read Only"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"New Password"}),e.jsx(se,{type:"password",value:L.password,onChange:w=>Z(B(P({},L),{password:w.target.value})),placeholder:"Leave blank to keep current password"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:L.is_active,onChange:()=>Z(B(P({},L),{is_active:!L.is_active})),className:"h-4 w-4 rounded border-border text-brand focus:ring-2 focus:ring-brand/15"}),e.jsx("span",{className:"text-sm font-medium text-text-primary",children:"Active"})]})]})]}),e.jsxs(be,{children:[e.jsx($,{variant:"secondary",onClick:()=>m(!1),children:"Cancel"}),e.jsx($,{variant:"primary",onClick:ie,disabled:M,children:M?"Saving...":"Save Changes"})]})]}),e.jsxs(he,{open:c,onClose:()=>l(!1),children:[e.jsx(fe,{onClose:()=>l(!1),children:"Recovery Codes"}),e.jsxs(pe,{children:[S&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:S}),f&&f.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-text-secondary",children:["Provide these codes to ",e.jsx("strong",{className:"text-text-primary",children:h==null?void 0:h.full_name}),". Each code can be used once."]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:f.map(w=>e.jsx("code",{className:"text-sm font-mono bg-app border border-border rounded px-2 py-2 text-text-primary text-center",children:w},w))}),e.jsx("p",{className:"text-xs text-text-muted",children:"Users should store these codes securely. They can be used if the authenticator device is unavailable."})]}):e.jsx("p",{className:"text-sm text-text-secondary",children:"No recovery codes generated."})]}),e.jsx(be,{children:e.jsx($,{variant:"primary",onClick:()=>l(!1),children:"Close"})})]}),e.jsxs(he,{open:o,onClose:()=>i(!1),children:[e.jsx(fe,{onClose:()=>i(!1),children:"Reset Password"}),e.jsxs(pe,{children:[S&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:S}),x?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"rounded-lg border border-semantic-success/30 bg-semantic-success/5 p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-semantic-success mb-2",children:"Password reset successful!"}),e.jsxs("p",{className:"text-sm text-text-secondary mb-3",children:["Please provide this temporary password to ",e.jsx("strong",{children:h==null?void 0:h.full_name}),":"]}),e.jsx("div",{className:"rounded-lg bg-app border border-border p-3",children:e.jsx("code",{className:"text-lg font-mono font-bold text-text-primary",children:x})}),e.jsx("p",{className:"text-xs text-text-muted mt-3",children:"The user will be required to change this password on their next login."})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-text-secondary",children:["Are you sure you want to reset the password for ",e.jsx("strong",{className:"text-text-primary",children:h==null?void 0:h.full_name}),"?"]}),e.jsx("p",{className:"text-sm text-text-secondary",children:"A temporary password will be generated that you can provide to the user. They will be required to change it on their next login."})]})]}),e.jsx(be,{children:x?e.jsx($,{variant:"primary",onClick:()=>i(!1),children:"Close"}):e.jsxs(e.Fragment,{children:[e.jsx($,{variant:"secondary",onClick:()=>i(!1),children:"Cancel"}),e.jsx($,{variant:"primary",onClick:oe,disabled:M,children:M?"Resetting...":"Reset Password"})]})})]})]})}function Wn(){const{user:t}=De(),s=(t==null?void 0:t.role)==="admin",[n,r]=y.useState("products"),[a,d]=y.useState([]),[u,m]=y.useState(!0),[o,i]=y.useState(""),[c,l]=y.useState(!1),[h,b]=y.useState(""),[x,j]=y.useState(!1),[f,k]=y.useState(null),[S,v]=y.useState(!1),[M,F]=y.useState(null),[Q,z]=y.useState(!1),[L,Z]=y.useState(null),[X,Y]=y.useState(null);y.useEffect(()=>{ie()},[n]);const ie=()=>G(this,null,function*(){m(!0);try{const N=yield V.get(`/reference/${n}`);d(N.data||[])}catch(N){console.error("Failed to load reference items",N)}finally{m(!1)}}),oe=()=>G(this,null,function*(){var N,_;if(h.trim()){j(!0),k(null);try{yield V.post(`/reference/${n}`,{name:h.trim()}),b(""),l(!1),ie()}catch(A){k(((_=(N=A==null?void 0:A.response)==null?void 0:N.data)==null?void 0:_.detail)||"Failed to create item")}finally{j(!1)}}}),O=()=>G(this,null,function*(){var N,_;if(M){z(!0),Z(null),Y(null);try{const A=new FormData;A.append("file",M);const T=yield V.post(`/reference/${n}/import`,A,{headers:{"Content-Type":"multipart/form-data"}});Y(`Successfully imported ${T.data.added} items`),F(null),ie(),setTimeout(()=>v(!1),2e3)}catch(A){Z(((_=(N=A==null?void 0:A.response)==null?void 0:N.data)==null?void 0:_.detail)||"Failed to import file")}finally{z(!1)}}}),E=a.filter(N=>N.name.toLowerCase().includes(o.toLowerCase())),C=N=>{switch(N){case"products":return"Products";case"brokers":return"Brokers";case"insurers":return"Insurers"}};return e.jsxs(e.Fragment,{children:[e.jsx(ge,{title:"Reference Data Management"}),e.jsx("div",{className:"px-10 py-6",children:e.jsxs(te,{children:[e.jsx(ne,{children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(ae,{children:"Reference Lists"}),s&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{variant:"secondary",size:"sm",onClick:()=>v(!0),children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Import CSV"]}),e.jsxs($,{variant:"primary",size:"sm",onClick:()=>l(!0),children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Add New"]})]})]})}),e.jsx("div",{className:"border-b border-border",children:e.jsx("div",{className:"flex gap-1 px-4",children:["products","brokers","insurers"].map(N=>e.jsxs("button",{onClick:()=>r(N),className:`px-4 py-3 text-sm font-medium capitalize transition border-b-2 ${n===N?"border-brand text-text-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[C(N),e.jsx("span",{className:"ml-2 inline-flex items-center justify-center h-5 min-w-5 px-1 rounded-full bg-app text-[11px] font-semibold text-text-secondary border border-border",children:N===n?E.length:a.length})]},N))})}),e.jsxs(re,{children:[e.jsx("div",{className:"mt-4 mb-6",children:e.jsx(se,{type:"search",placeholder:`Search ${C(n).toLowerCase()}...`,value:o,onChange:N=>i(N.target.value),leadingIcon:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),u?e.jsx("div",{className:"text-center py-12 text-text-muted",children:"Loading..."}):E.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"mt-4 text-sm font-semibold text-text-primary",children:o?"No items match your search":`No ${C(n).toLowerCase()} yet`}),!o&&s&&e.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:'Click "Add New" to create your first entry'})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:E.map(N=>e.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border bg-surface hover:bg-app transition",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary truncate",children:N.name}),e.jsxs("div",{className:"text-xs text-text-muted",children:["ID: ",N.id.substring(0,8),"..."]})]})},N.id))})]})]})}),e.jsxs(he,{open:c,onClose:()=>l(!1),children:[e.jsxs(fe,{onClose:()=>l(!1),children:["Add New ",C(n).slice(0,-1)]}),e.jsxs(pe,{children:[f&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:f}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Name *"}),e.jsx(se,{value:h,onChange:N=>b(N.target.value),placeholder:`Enter ${C(n).slice(0,-1).toLowerCase()} name...`,autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&h.trim()&&oe()}})]})]}),e.jsxs(be,{children:[e.jsx($,{variant:"secondary",onClick:()=>l(!1),children:"Cancel"}),e.jsx($,{variant:"primary",onClick:oe,disabled:!h.trim()||x,children:x?"Creating...":"Create"})]})]}),e.jsxs(he,{open:S,onClose:()=>v(!1),children:[e.jsxs(fe,{onClose:()=>v(!1),children:["Import ",C(n)," from CSV"]}),e.jsxs(pe,{children:[L&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:L}),X&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-success/30 bg-semantic-success/5 p-3 text-sm text-semantic-success",children:X}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary mb-3",children:'Upload a CSV file with a "name" column. Duplicate names will be skipped.'}),e.jsxs("div",{className:"rounded-lg border-2 border-dashed border-border p-6 text-center",children:[e.jsx("input",{type:"file",accept:".csv",onChange:N=>{var _;return F(((_=N.target.files)==null?void 0:_[0])||null)},className:"hidden",id:"csv-upload"}),e.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("p",{className:"mt-2 text-sm font-medium text-text-primary",children:"Click to select CSV file"}),e.jsx("p",{className:"mt-1 text-xs text-text-muted",children:"or drag and drop"})]})]}),M&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-text-primary",children:[e.jsx("svg",{className:"h-5 w-5 text-semantic-success",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),M.name]})]}),e.jsxs("div",{className:"rounded-lg bg-app p-3 text-xs text-text-secondary",children:[e.jsx("p",{className:"font-semibold text-text-primary mb-1",children:"CSV Format Example:"}),e.jsxs("code",{className:"block bg-surface p-2 rounded border border-border font-mono",children:["name",e.jsx("br",{}),"Product A",e.jsx("br",{}),"Product B",e.jsx("br",{}),"Product C"]})]})]})]}),e.jsxs(be,{children:[e.jsx($,{variant:"secondary",onClick:()=>v(!1),children:"Cancel"}),e.jsx($,{variant:"primary",onClick:O,disabled:!M||Q,children:Q?"Importing...":"Import"})]})]})]})}function ts(){var h;const{user:t}=De(),[s,n]=y.useState(""),[r,a]=y.useState(""),[d,u]=y.useState(""),[m,o]=y.useState(null),[i,c]=y.useState(!1),l=b=>G(this,null,function*(){var x,j;if(b.preventDefault(),o(null),r!==d){o({type:"error",text:"New passwords do not match"});return}if(r.length<8){o({type:"error",text:"Password must be at least 8 characters"});return}c(!0);try{yield V.post("/auth/change-password",{current_password:s,new_password:r}),o({type:"success",text:"Password changed successfully"}),n(""),a(""),u("")}catch(f){o({type:"error",text:((j=(x=f==null?void 0:f.response)==null?void 0:x.data)==null?void 0:j.detail)||"Failed to change password"})}finally{c(!1)}});return e.jsxs(e.Fragment,{children:[e.jsx(ge,{title:"Profile & Settings"}),e.jsxs("div",{className:"px-10 py-6 max-w-2xl",children:[e.jsxs(te,{className:"mb-6",children:[e.jsx(ne,{children:e.jsx(ae,{children:"User Information"})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Name"}),e.jsx("div",{className:"text-sm text-text-primary",children:t==null?void 0:t.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Email"}),e.jsx("div",{className:"text-sm text-text-primary",children:t==null?void 0:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Role"}),e.jsx("div",{className:"text-sm text-text-primary capitalize",children:(h=t==null?void 0:t.role)==null?void 0:h.replace("_"," ")})]})]})})]}),e.jsxs(te,{children:[e.jsx(ne,{children:e.jsx(ae,{children:"Change Password"})}),e.jsxs(re,{children:[m&&e.jsx("div",{className:`mt-4 rounded-lg border p-3 text-sm ${m.type==="success"?"border-semantic-success/30 bg-semantic-success/5 text-semantic-success":"border-semantic-error/30 bg-semantic-error/5 text-semantic-error"}`,children:m.text}),e.jsxs("form",{onSubmit:l,className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Current Password"}),e.jsx(se,{type:"password",value:s,onChange:b=>n(b.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"New Password"}),e.jsx(se,{type:"password",value:r,onChange:b=>a(b.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Confirm New Password"}),e.jsx(se,{type:"password",value:d,onChange:b=>u(b.target.value),required:!0})]}),e.jsx($,{type:"submit",variant:"primary",disabled:i,children:i?"Changing...":"Change Password"})]})]})]})]})]})}var Vn=Object.defineProperty,at=Object.getOwnPropertySymbols,As=Object.prototype.hasOwnProperty,Os=Object.prototype.propertyIsEnumerable,ss=(t,s,n)=>s in t?Vn(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Jn=(t,s)=>{for(var n in s||(s={}))As.call(s,n)&&ss(t,n,s[n]);if(at)for(var n of at(s))Os.call(s,n)&&ss(t,n,s[n]);return t},Qn=(t,s)=>{var n={};for(var r in t)As.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&at)for(var r of at(t))s.indexOf(r)<0&&Os.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Pe;(t=>{const s=class{constructor(o,i,c,l){if(this.version=o,this.errorCorrectionLevel=i,this.modules=[],this.isFunction=[],o<s.MIN_VERSION||o>s.MAX_VERSION)throw new RangeError("Version value out of range");if(l<-1||l>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let h=[];for(let x=0;x<this.size;x++)h.push(!1);for(let x=0;x<this.size;x++)this.modules.push(h.slice()),this.isFunction.push(h.slice());this.drawFunctionPatterns();const b=this.addEccAndInterleave(c);if(this.drawCodewords(b),l==-1){let x=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const f=this.getPenaltyScore();f<x&&(l=j,x=f),this.applyMask(j)}}d(0<=l&&l<=7),this.mask=l,this.applyMask(l),this.drawFormatBits(l),this.isFunction=[]}static encodeText(o,i){const c=t.QrSegment.makeSegments(o);return s.encodeSegments(c,i)}static encodeBinary(o,i){const c=t.QrSegment.makeBytes(o);return s.encodeSegments([c],i)}static encodeSegments(o,i,c=1,l=40,h=-1,b=!0){if(!(s.MIN_VERSION<=c&&c<=l&&l<=s.MAX_VERSION)||h<-1||h>7)throw new RangeError("Invalid value");let x,j;for(x=c;;x++){const v=s.getNumDataCodewords(x,i)*8,M=m.getTotalBits(o,x);if(M<=v){j=M;break}if(x>=l)throw new RangeError("Data too long")}for(const v of[s.Ecc.MEDIUM,s.Ecc.QUARTILE,s.Ecc.HIGH])b&&j<=s.getNumDataCodewords(x,v)*8&&(i=v);let f=[];for(const v of o){r(v.mode.modeBits,4,f),r(v.numChars,v.mode.numCharCountBits(x),f);for(const M of v.getData())f.push(M)}d(f.length==j);const k=s.getNumDataCodewords(x,i)*8;d(f.length<=k),r(0,Math.min(4,k-f.length),f),r(0,(8-f.length%8)%8,f),d(f.length%8==0);for(let v=236;f.length<k;v^=253)r(v,8,f);let S=[];for(;S.length*8<f.length;)S.push(0);return f.forEach((v,M)=>S[M>>>3]|=v<<7-(M&7)),new s(x,i,S,h)}getModule(o,i){return 0<=o&&o<this.size&&0<=i&&i<this.size&&this.modules[i][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let c=0;c<this.size;c++)this.setFunctionModule(6,c,c%2==0),this.setFunctionModule(c,6,c%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const o=this.getAlignmentPatternPositions(),i=o.length;for(let c=0;c<i;c++)for(let l=0;l<i;l++)c==0&&l==0||c==0&&l==i-1||c==i-1&&l==0||this.drawAlignmentPattern(o[c],o[l]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){const i=this.errorCorrectionLevel.formatBits<<3|o;let c=i;for(let h=0;h<10;h++)c=c<<1^(c>>>9)*1335;const l=(i<<10|c)^21522;d(l>>>15==0);for(let h=0;h<=5;h++)this.setFunctionModule(8,h,a(l,h));this.setFunctionModule(8,7,a(l,6)),this.setFunctionModule(8,8,a(l,7)),this.setFunctionModule(7,8,a(l,8));for(let h=9;h<15;h++)this.setFunctionModule(14-h,8,a(l,h));for(let h=0;h<8;h++)this.setFunctionModule(this.size-1-h,8,a(l,h));for(let h=8;h<15;h++)this.setFunctionModule(8,this.size-15+h,a(l,h));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let c=0;c<12;c++)o=o<<1^(o>>>11)*7973;const i=this.version<<12|o;d(i>>>18==0);for(let c=0;c<18;c++){const l=a(i,c),h=this.size-11+c%3,b=Math.floor(c/3);this.setFunctionModule(h,b,l),this.setFunctionModule(b,h,l)}}drawFinderPattern(o,i){for(let c=-4;c<=4;c++)for(let l=-4;l<=4;l++){const h=Math.max(Math.abs(l),Math.abs(c)),b=o+l,x=i+c;0<=b&&b<this.size&&0<=x&&x<this.size&&this.setFunctionModule(b,x,h!=2&&h!=4)}}drawAlignmentPattern(o,i){for(let c=-2;c<=2;c++)for(let l=-2;l<=2;l++)this.setFunctionModule(o+l,i+c,Math.max(Math.abs(l),Math.abs(c))!=1)}setFunctionModule(o,i,c){this.modules[i][o]=c,this.isFunction[i][o]=!0}addEccAndInterleave(o){const i=this.version,c=this.errorCorrectionLevel;if(o.length!=s.getNumDataCodewords(i,c))throw new RangeError("Invalid argument");const l=s.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][i],h=s.ECC_CODEWORDS_PER_BLOCK[c.ordinal][i],b=Math.floor(s.getNumRawDataModules(i)/8),x=l-b%l,j=Math.floor(b/l);let f=[];const k=s.reedSolomonComputeDivisor(h);for(let v=0,M=0;v<l;v++){let F=o.slice(M,M+j-h+(v<x?0:1));M+=F.length;const Q=s.reedSolomonComputeRemainder(F,k);v<x&&F.push(0),f.push(F.concat(Q))}let S=[];for(let v=0;v<f[0].length;v++)f.forEach((M,F)=>{(v!=j-h||F>=x)&&S.push(M[v])});return d(S.length==b),S}drawCodewords(o){if(o.length!=Math.floor(s.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let i=0;for(let c=this.size-1;c>=1;c-=2){c==6&&(c=5);for(let l=0;l<this.size;l++)for(let h=0;h<2;h++){const b=c-h,j=(c+1&2)==0?this.size-1-l:l;!this.isFunction[j][b]&&i<o.length*8&&(this.modules[j][b]=a(o[i>>>3],7-(i&7)),i++)}}d(i==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let i=0;i<this.size;i++)for(let c=0;c<this.size;c++){let l;switch(o){case 0:l=(c+i)%2==0;break;case 1:l=i%2==0;break;case 2:l=c%3==0;break;case 3:l=(c+i)%3==0;break;case 4:l=(Math.floor(c/3)+Math.floor(i/2))%2==0;break;case 5:l=c*i%2+c*i%3==0;break;case 6:l=(c*i%2+c*i%3)%2==0;break;case 7:l=((c+i)%2+c*i%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[i][c]&&l&&(this.modules[i][c]=!this.modules[i][c])}}getPenaltyScore(){let o=0;for(let h=0;h<this.size;h++){let b=!1,x=0,j=[0,0,0,0,0,0,0];for(let f=0;f<this.size;f++)this.modules[h][f]==b?(x++,x==5?o+=s.PENALTY_N1:x>5&&o++):(this.finderPenaltyAddHistory(x,j),b||(o+=this.finderPenaltyCountPatterns(j)*s.PENALTY_N3),b=this.modules[h][f],x=1);o+=this.finderPenaltyTerminateAndCount(b,x,j)*s.PENALTY_N3}for(let h=0;h<this.size;h++){let b=!1,x=0,j=[0,0,0,0,0,0,0];for(let f=0;f<this.size;f++)this.modules[f][h]==b?(x++,x==5?o+=s.PENALTY_N1:x>5&&o++):(this.finderPenaltyAddHistory(x,j),b||(o+=this.finderPenaltyCountPatterns(j)*s.PENALTY_N3),b=this.modules[f][h],x=1);o+=this.finderPenaltyTerminateAndCount(b,x,j)*s.PENALTY_N3}for(let h=0;h<this.size-1;h++)for(let b=0;b<this.size-1;b++){const x=this.modules[h][b];x==this.modules[h][b+1]&&x==this.modules[h+1][b]&&x==this.modules[h+1][b+1]&&(o+=s.PENALTY_N2)}let i=0;for(const h of this.modules)i=h.reduce((b,x)=>b+(x?1:0),i);const c=this.size*this.size,l=Math.ceil(Math.abs(i*20-c*10)/c)-1;return d(0<=l&&l<=9),o+=l*s.PENALTY_N4,d(0<=o&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{const o=Math.floor(this.version/7)+2,i=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2;let c=[6];for(let l=this.size-7;c.length<o;l-=i)c.splice(1,0,l);return c}}static getNumRawDataModules(o){if(o<s.MIN_VERSION||o>s.MAX_VERSION)throw new RangeError("Version number out of range");let i=(16*o+128)*o+64;if(o>=2){const c=Math.floor(o/7)+2;i-=(25*c-10)*c-55,o>=7&&(i-=36)}return d(208<=i&&i<=29648),i}static getNumDataCodewords(o,i){return Math.floor(s.getNumRawDataModules(o)/8)-s.ECC_CODEWORDS_PER_BLOCK[i.ordinal][o]*s.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let i=[];for(let l=0;l<o-1;l++)i.push(0);i.push(1);let c=1;for(let l=0;l<o;l++){for(let h=0;h<i.length;h++)i[h]=s.reedSolomonMultiply(i[h],c),h+1<i.length&&(i[h]^=i[h+1]);c=s.reedSolomonMultiply(c,2)}return i}static reedSolomonComputeRemainder(o,i){let c=i.map(l=>0);for(const l of o){const h=l^c.shift();c.push(0),i.forEach((b,x)=>c[x]^=s.reedSolomonMultiply(b,h))}return c}static reedSolomonMultiply(o,i){if(o>>>8||i>>>8)throw new RangeError("Byte out of range");let c=0;for(let l=7;l>=0;l--)c=c<<1^(c>>>7)*285,c^=(i>>>l&1)*o;return d(c>>>8==0),c}finderPenaltyCountPatterns(o){const i=o[1];d(i<=this.size*3);const c=i>0&&o[2]==i&&o[3]==i*3&&o[4]==i&&o[5]==i;return(c&&o[0]>=i*4&&o[6]>=i?1:0)+(c&&o[6]>=i*4&&o[0]>=i?1:0)}finderPenaltyTerminateAndCount(o,i,c){return o&&(this.finderPenaltyAddHistory(i,c),i=0),i+=this.size,this.finderPenaltyAddHistory(i,c),this.finderPenaltyCountPatterns(c)}finderPenaltyAddHistory(o,i){i[0]==0&&(o+=this.size),i.pop(),i.unshift(o)}};let n=s;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(o,i,c){if(i<0||i>31||o>>>i)throw new RangeError("Value out of range");for(let l=i-1;l>=0;l--)c.push(o>>>l&1)}function a(o,i){return(o>>>i&1)!=0}function d(o){if(!o)throw new Error("Assertion error")}const u=class{constructor(o,i,c){if(this.mode=o,this.numChars=i,this.bitData=c,i<0)throw new RangeError("Invalid argument");this.bitData=c.slice()}static makeBytes(o){let i=[];for(const c of o)r(c,8,i);return new u(u.Mode.BYTE,o.length,i)}static makeNumeric(o){if(!u.isNumeric(o))throw new RangeError("String contains non-numeric characters");let i=[];for(let c=0;c<o.length;){const l=Math.min(o.length-c,3);r(parseInt(o.substr(c,l),10),l*3+1,i),c+=l}return new u(u.Mode.NUMERIC,o.length,i)}static makeAlphanumeric(o){if(!u.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let i=[],c;for(c=0;c+2<=o.length;c+=2){let l=u.ALPHANUMERIC_CHARSET.indexOf(o.charAt(c))*45;l+=u.ALPHANUMERIC_CHARSET.indexOf(o.charAt(c+1)),r(l,11,i)}return c<o.length&&r(u.ALPHANUMERIC_CHARSET.indexOf(o.charAt(c)),6,i),new u(u.Mode.ALPHANUMERIC,o.length,i)}static makeSegments(o){return o==""?[]:u.isNumeric(o)?[u.makeNumeric(o)]:u.isAlphanumeric(o)?[u.makeAlphanumeric(o)]:[u.makeBytes(u.toUtf8ByteArray(o))]}static makeEci(o){let i=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)r(o,8,i);else if(o<16384)r(2,2,i),r(o,14,i);else if(o<1e6)r(6,3,i),r(o,21,i);else throw new RangeError("ECI assignment value out of range");return new u(u.Mode.ECI,0,i)}static isNumeric(o){return u.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return u.ALPHANUMERIC_REGEX.test(o)}getData(){return this.bitData.slice()}static getTotalBits(o,i){let c=0;for(const l of o){const h=l.mode.numCharCountBits(i);if(l.numChars>=1<<h)return 1/0;c+=4+h+l.bitData.length}return c}static toUtf8ByteArray(o){o=encodeURI(o);let i=[];for(let c=0;c<o.length;c++)o.charAt(c)!="%"?i.push(o.charCodeAt(c)):(i.push(parseInt(o.substr(c+1,2),16)),c+=2);return i}};let m=u;m.NUMERIC_REGEX=/^[0-9]*$/,m.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,m.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=m})(Pe||(Pe={}));(t=>{(s=>{const n=class{constructor(a,d){this.ordinal=a,this.formatBits=d}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),s.Ecc=r})(t.QrCode||(t.QrCode={}))})(Pe||(Pe={}));(t=>{(s=>{const n=class{constructor(a,d){this.modeBits=a,this.numBitsCharCount=d}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),s.Mode=r})(t.QrSegment||(t.QrSegment={}))})(Pe||(Pe={}));var We=Pe;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Kn={L:We.QrCode.Ecc.LOW,M:We.QrCode.Ecc.MEDIUM,Q:We.QrCode.Ecc.QUARTILE,H:We.QrCode.Ecc.HIGH},Xn=128,Gn="L",Zn="#FFFFFF",ea="#000000",ta=!1,Ls=4,sa=.1;function ra(t,s=0){const n=[];return t.forEach(function(r,a){let d=null;r.forEach(function(u,m){if(!u&&d!==null){n.push(`M${d+s} ${a+s}h${m-d}v1H${d+s}z`),d=null;return}if(m===r.length-1){if(!u)return;d===null?n.push(`M${m+s},${a+s} h1v1H${m+s}z`):n.push(`M${d+s},${a+s} h${m+1-d}v1H${d+s}z`);return}u&&d===null&&(d=m)})}),n.join("")}function na(t,s){return t.slice().map((n,r)=>r<s.y||r>=s.y+s.h?n:n.map((a,d)=>d<s.x||d>=s.x+s.w?a:!1))}function aa(t,s,n,r){if(r==null)return null;const a=n?Ls:0,d=t.length+a*2,u=Math.floor(s*sa),m=d/s,o=(r.width||u)*m,i=(r.height||u)*m,c=r.x==null?t.length/2-o/2:r.x*m,l=r.y==null?t.length/2-i/2:r.y*m;let h=null;if(r.excavate){let b=Math.floor(c),x=Math.floor(l),j=Math.ceil(o+c-b),f=Math.ceil(i+l-x);h={x:b,y:x,w:j,h:f}}return{x:c,y:l,h:i,w:o,excavation:h}}(function(){try{new Path2D().addPath(new Path2D)}catch(t){return!1}return!0})();function oa(t){const s=t,{value:n,size:r=Xn,level:a=Gn,bgColor:d=Zn,fgColor:u=ea,includeMargin:m=ta,imageSettings:o}=s,i=Qn(s,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let c=We.QrCode.encodeText(n,Kn[a]).getModules();const l=m?Ls:0,h=c.length+l*2,b=aa(c,r,m,o);let x=null;o!=null&&b!=null&&(b.excavation!=null&&(c=na(c,b.excavation)),x=qe.createElement("image",{xlinkHref:o.src,height:b.h,width:b.w,x:b.x+l,y:b.y+l,preserveAspectRatio:"none"}));const j=ra(c,l);return qe.createElement("svg",Jn({height:r,width:r,viewBox:`0 0 ${h} ${h}`},i),qe.createElement("path",{fill:d,d:`M0,0 h${h}v${h}H0z`,shapeRendering:"crispEdges"}),qe.createElement("path",{fill:u,d:j,shapeRendering:"crispEdges"}),x)}function ia(){const{token:t,role:s,name:n,login:r,logout:a,mustChangePassword:d,ready:u}=De(),[m,o]=y.useState(""),[i,c]=y.useState(""),[l,h]=y.useState(!1),[b,x]=y.useState(!1),[j,f]=y.useState(""),[k,S]=y.useState(""),[v,M]=y.useState(null),[F,Q]=y.useState(!1),[z,L]=y.useState(!1),[Z,X]=y.useState(null),[Y,ie]=y.useState(null),[oe,O]=y.useState(0),[E,C]=y.useState(!1),N=Ie(),_=rs();y.useEffect(()=>{u&&(t||_.pathname!=="/"&&N("/",{replace:!0}))},[u,t,_.pathname,N]),y.useEffect(()=>{t&&d&&_.pathname!=="/profile"&&N("/profile",{replace:!0,state:{forced:!0}})},[t,d,_.pathname,N]);const A=()=>G(this,null,function*(){var R,D;M(null),x(!0);try{const q=yield r(m,i,F?j:void 0,F?k:void 0);Q(!1),f(""),S(""),q!=null&&q.mfa_enrollment_required?(O(q.mfa_remaining_skips||0),yield T()):N("/")}catch(q){const ce=(D=(R=q==null?void 0:q.response)==null?void 0:R.data)==null?void 0:D.detail;ce==="MFA code required"||(ce==null?void 0:ce.code)==="mfa_required"?(Q(!0),M("Enter your 6-digit MFA code or a recovery code.")):M(ce==="Invalid recovery code"||ce==="Invalid MFA code"||ce==="Invalid code"?"Invalid code. Please try again.":"Login failed. Check your credentials.")}finally{x(!1)}}),T=()=>G(this,null,function*(){var R,D;try{const q=yield V.post("/auth/mfa/enroll");X(q.data),ie(null),L(!0)}catch(q){M(((D=(R=q==null?void 0:q.response)==null?void 0:R.data)==null?void 0:D.detail)||"Could not start MFA enrollment")}}),w=()=>G(this,null,function*(){var R,D;C(!0);try{const q=yield V.post("/auth/mfa/verify",{code:j});ie(q.data.recovery_codes),L(!1),f(""),O(0),N("/")}catch(q){M(((D=(R=q==null?void 0:q.response)==null?void 0:R.data)==null?void 0:D.detail)||"Invalid code")}finally{C(!1)}}),I=()=>G(this,null,function*(){var R,D;try{const q=yield V.post("/auth/mfa/skip");O(q.data.remaining_skips),L(!1),X(null)}catch(q){M(((D=(R=q==null?void 0:q.response)==null?void 0:R.data)==null?void 0:D.detail)||"Cannot skip MFA")}}),H=()=>{if(!Y)return;const R=Y.join(`
`);navigator.clipboard.writeText(R).then(()=>{alert("Recovery codes copied to clipboard")})};return t?e.jsx(Tn,{children:e.jsxs(er,{children:[e.jsx(ke,{path:"/",element:e.jsx(Bn,{})}),e.jsx(ke,{path:"/tasks",element:e.jsx(Yn,{})}),e.jsx(ke,{path:"/complaints",element:e.jsx(Un,{})}),e.jsx(ke,{path:"/create",element:e.jsx(Hn,{})}),e.jsx(ke,{path:"/complaints/:id",element:e.jsx(zn,{})}),e.jsx(ke,{path:"/profile",element:e.jsx(ts,{})}),e.jsx(ke,{path:"/users",element:e.jsx(qn,{})}),e.jsx(ke,{path:"/reference",element:e.jsx(Wn,{})}),e.jsx(ke,{path:"/settings",element:e.jsx(ts,{})})]})}):e.jsxs("div",{className:"min-h-screen bg-app flex items-center justify-center p-4",children:[e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"rounded-card border border-border bg-surface shadow-card p-8",children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-text-primary mb-2",children:"Sign in to Compass"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Use your credentials to access the complaints workspace"})]}),v&&e.jsx("div",{className:"mb-4 rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:v}),e.jsxs("form",{onSubmit:R=>{R.preventDefault(),A()},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Email"}),e.jsx(se,{type:"email",value:m,onChange:R=>o(R.target.value),placeholder:"you@example.com",autoComplete:"email",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(se,{type:l?"text":"password",value:i,onChange:R=>c(R.target.value),placeholder:"",autoComplete:"current-password",required:!0}),e.jsx("button",{type:"button",onClick:()=>h(!l),"aria-label":l?"Hide password":"Show password",className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition",children:l?e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.75,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),F&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"MFA Code (6 digits)"}),e.jsx(se,{type:"text",autoFocus:!0,value:j,onChange:R=>f(R.target.value),placeholder:"123456",maxLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Recovery Code (optional)"}),e.jsx(se,{type:"text",value:k,onChange:R=>S(R.target.value),placeholder:"recovery-code"})]})]}),e.jsx($,{type:"submit",variant:"primary",className:"w-full mt-6",disabled:b,children:b?"Signing in...":"Sign in"})]})]})}),e.jsxs(he,{open:z,onClose:oe>0?()=>{L(!1),M(null)}:()=>{},children:[e.jsx(fe,{onClose:oe>0?()=>{L(!1),M(null)}:void 0,children:"Set up Multi-Factor Authentication"}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-4",children:[oe<=0?e.jsx("div",{className:"rounded-lg border border-semantic-error/30 bg-semantic-error/5 p-3 text-sm text-semantic-error",children:"You must enable MFA to continue."}):e.jsxs("p",{className:"text-sm text-text-secondary",children:["We recommend enabling MFA for enhanced security. You can skip up to ",oe," more time(s)."]}),Z?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-text-primary mb-2",children:"Scan with your authenticator app"}),e.jsx("div",{className:"flex justify-center p-4 bg-app rounded-lg",children:e.jsx(oa,{value:Z.otpauth_url,size:180})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-text-primary mb-1",children:"Manual entry secret"}),e.jsx("code",{className:"block text-xs bg-app p-2 rounded border border-border font-mono",children:Z.secret})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary",children:"Enter 6-digit code"}),e.jsx(se,{type:"text",autoFocus:!0,value:j,onChange:R=>f(R.target.value),placeholder:"123456",maxLength:6})]}),Y&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-medium text-text-primary",children:"Recovery codes (store securely)"}),e.jsx("button",{onClick:H,className:"text-xs text-brand hover:text-brand-dark font-medium",children:"Copy All"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Y.map(R=>e.jsx("code",{className:"text-xs bg-app p-2 rounded border border-border font-mono",children:R},R))}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Save these codes in a secure location. They can be used to access your account if you lose your authenticator device."})]})]}):e.jsx("p",{className:"text-sm text-text-muted",children:"Preparing enrollment..."})]})}),e.jsxs(be,{children:[e.jsx($,{variant:"secondary",onClick:I,disabled:oe<=0,children:"Skip for now"}),e.jsx($,{variant:"primary",onClick:w,disabled:!j||j.length<6||E,children:E?"Verifying...":"Verify & Enable"})]})]})]})}gt.createRoot(document.getElementById("root")).render(e.jsx(qe.StrictMode,{children:e.jsx(tr,{children:e.jsx(Pn,{children:e.jsx(ia,{})})})}))});export default la();
